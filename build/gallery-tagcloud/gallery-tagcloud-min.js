YUI.add("gallery-tagcloud",function(d){function b(g,n){var m=0,l,k,j,h,e,f;if(g.nodeType===3){l=g.data.toUpperCase().indexOf(n);if(l>=0){if(g.parentNode.nodeName==="SPAN"){g.parentNode.className="highlight";}else{j=d.Node.getDOMNode(d.Node.create("<span />").addClass("highlight"));h=g.splitText(l);e=h.splitText(n.length);f=h.cloneNode(true);j.appendChild(f);h.parentNode.replaceChild(j,h);m=1;}}}else{if(g.nodeType===1&&g.childNodes&&!/(script|style)/i.test(g.tagName)){for(k=0;k<g.childNodes.length;k+=1){k+=b(g.childNodes[k],n);}}}return m;}function a(e){d.all("span.highlight").removeClass("highlight");return e;}d.Node.addMethod("highlight",b);d.Node.addMethod("removeHighlight",a);d.NodeList.importMethod(d.Node.prototype,"highlight");d.NodeList.importMethod(d.Node.prototype,"removeHighlight");function c(f,g,q){var j,h={},m=[],l=0,k,e,o,p;g=g||"#dynacloud";q=q||{};q.max=q.max||20;q.scale=q.scale||4;q.sort=q.sort===undefined?true:q.sort;q.fieldDelimeter=q.fieldDelimeter||" ";q.fieldRegex=q.fieldRegex||new RegExp(/\W/g);p=d.one(f).get("text").replace(q.fieldRegex,q.fieldDelimeter).split(q.fieldDelimeter);e=p.length;for(k=0;k<e;k+=1){o=p[k].toLowerCase();if(o){if(typeof h[o]==="undefined"){h[o]={count:1,el:o};}else{h[o].count+=1;}l=Math.max(h[o].count,l);}}for(o in h){if(h[o]){m[m.length]=h[o];}}if(q.sort){m.sort(function(n,i){if(n.el<i.el){return -1;}else{return 1;}});}j=d.one(g);if(j===null){d.one("body").append('<p id="dynacloud"></p>');j=d.one(g);}j.empty(true);e=Math.min(q.max,m.length);for(k=0;k<e;k+=1){j.append('<a href="#'+m[k].el+'" style="font-size: '+Math.ceil((m[k].count/l)*q.scale)+'em"><span>'+m[k].el+"</span></a> &nbsp; ");}d.on("click",function(n){var i=n.currentTarget;d.one(this).removeHighlight().highlight(i.get("text").toUpperCase());},g+" a",f);}d.Node.addMethod("tagCloud",c);},"gallery-2011.02.16-20-31",{requires:["node"]});