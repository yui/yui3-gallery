YUI.add("gallery-itsaviewmodelpanel",function(e,t){"use strict";var n=e.ClassNameManager.getClassName,r=e.Lang,i="yui3-itsaformelement",s="focusable",o="closeclick",u="submitclick",a="saveclick",f="resetclick",l="addclick",c="destroyclick";e.ITSAViewModelPanel=e.Base.create("itsaviewmodelpanel",e.ITSAViewModel,[e.WidgetPosition,e.WidgetStdMod,e.WidgetAutohide,e.WidgetButtons,e.WidgetModality,e.WidgetPositionAlign,e.WidgetPositionConstrain,e.WidgetStack],{initializer:function(){var e=this;e.set("bodyContent","")},_bindViewUI:function(){var t=this,n=t._eventhandlers,r=t.get("staticPosition"),i=t.get("boundingBox"),s=t.view,o;r&&i.addClass("itsa-staticposition"),t.get("dragable")&&!r&&(o=t.getStdModNode(e.WidgetStdMod.HEADER),e.use("dd-plugin",function(e){i.plug(e.Plugin.Drag),o&&i.dd.addHandle(".yui3-widget-hd")})),t.constructor.superclass._bindViewUI.apply(t),n.push(s.after("*:destroy",function(n){n.target instanceof e.Model&&t.hide()})),n.push(t.after("staticPositionChange",function(e){var t=e.newVal;i.toggleClass("itsa-staticposition",t),i.setStyle("position","")})),n.push(t.after("dragableChange",function(n){var r=n.newVal;r&&!t.get("staticPosition")?(o=t.getStdModNode(e.WidgetStdMod.HEADER),e.use("dd-plugin",function(e){i.plug(e.Plugin.Drag),o&&i.dd.addHandle(".yui3-widget-hd")})):i.unplug("dd")}))},_addModel:function(t){var n=this,r=n.get("model"),i,s,o;r&&(t.buttonNode=t.target,t.target=r,t.type=l,i=n.get("newModelClass"),o=new i,r.hasPlugin("itsaeditmodel")&&(s=e.clone(r.itsaeditmodel.getAttrs()),e.use("gallery-itsaeditmodel",function(e){o.plug(e.Plugin.ITSAEditModel,s)})),t.newModel=o,r.fire(l,t))},_closeModel:function(e){var t=this,n=t.get("model");n&&(e.buttonNode=e.target,e.target=n,e.type=o,t.hide(),n.fire(o,e))},_destroyModel:function(t){var n=this,r=n.get("model"),i,s;r&&(t.buttonNode=t.target,t.target=r,t.type=c,i=n.get("syncOptions"),s=e.merge({remove:!0},i.destroy||{}),t.promise=r.destroyPromise(s),r.fire(c,t))},_resetModel:function(e){var t=this,n=t.get("model"),r;n&&(r=e.target,r.focus(),e.buttonNode=r,e.target=n,e.type=f,n.fire(f,e))},_saveModel:function(e){var t=this,n=t.get("model"),r=t.get("actionAfterSave"),i,s,o;n&&(i=e.target,i.focus(),e.buttonNode=i,e.target=n,e.type=a,s=t.get("syncOptions"),o=s.save||{},e.promise=n.savePromise(o),n.fire(a,e),r===1&&t.hide(),r===2&&n.unplug("itsaeditmodel"))},_submitModel:function(e){var t=this,n=t.get("model"),r=t.get("actionAfterSubmit"),i,s,o;n&&(i=e.target,i.focus(),e.buttonNode=i,e.target=n,e.type=u,s=t.get("syncOptions"),o=s.submit||{},e.promise=n.submitPromise(o),n.fire(u,e),r===1&&t.hide(),r===2&&n.unplug("itsaeditmodel"))},_getViewContainer:function(){return this.getStdModNode(e.WidgetStdMod.BODY)},_widgetRenderer:function(){var e=this;e.constructor.superclass.constructor.superclass.renderer.apply(e)},_setZIndex:function(e){return typeof e=="string"&&(e=parseInt(e,10)),typeof e!="number"&&(e=1),e<1&&(e=1),e},_uiSetXY:function(e){var t=this;t.get("staticPosition")||t._posNode.setXY(e)},BUTTONS:{add:{label:"Add",action:"_addModel",template:'<button type="button" />',classNames:[i+"-add",s]},close:{label:"Close",action:"_closeModel",section:"header",template:'<button type="button" />',classNames:n("button","close")},destroy:{label:"Destroy",action:"_destroyModel",template:'<button type="button" />',classNames:[i+"-destroy",s]},reset:{label:"Reset",action:"_resetModel",template:'<button type="button" />',classNames:[i+"-reset",s]},save:{label:"Save",action:"_saveModel",template:'<button type="button" />',classNames:[i+"-save",s]},submit:{label:"Submit",action:"_submitModel",template:'<button type="button" />',classNames:[i+"-submit",s]}}},{ATTRS:{actionAfterSave:{value:0,validator:function(e){return typeof e=="number"&&e>=0&&e<=2}},actionAfterSubmit:{value:0,validator:function(e){return typeof e=="number"&&e>=0&&e<=2}},buttons:{value:["close"]},dragable:{value:!1,validator:function(e){return typeof e=="boolean"}},title:{value:null,lazyAdd:!1,validator:function(e){return typeof e=="string"},setter:function(e){this.set("headerContent",e)}},statusText:{value:null,lazyAdd:!1,validator:function(e){return typeof e=="string"},setter:function(e){this.set("footerContent",e)}},newModelClass:{value:e.Model},staticPosition:{value:!1,validator:function(e){return typeof e=="boolean"}},syncOptions:{value:{},validator:function(e){return r.isObject(e)}},zIndex:{value:1,setter:"_setZIndex"}}})},"gallery-2013.06.13-01-19",{requires:["base-build","classnamemanager","pluginhost-base","model","gallery-itsaviewmodel","widget-autohide","widget-buttons","widget-modality","widget-position","widget-position-align","widget-position-constrain","widget-stack","widget-stdmod"],skinnable:!0});
