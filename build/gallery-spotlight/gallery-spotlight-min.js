YUI.add("gallery-spotlight",function(b){function a(c){a.superclass.constructor.apply(this,arguments);}a.NAME="Spotlight";a.ATTRS={data:{},liTplId:{},contentTplId:{},containerId:{},numVisible:3,height:200,width:300};b.extend(a,b.Base,{register:function(){var d=this,i,f,g,j,h,e,c;i=d.get("containerId");f=i+"-carousel";g=b.one("#"+i+"-content");h=d.get("data");e=d.get("contentTplId");j=new b.Carousel({boundingBox:"#"+f,contentBox:"#"+f+" > ol",animation:{speed:0.5},numVisible:d.get("numVisible"),isVertical:false,height:d.get("height"),width:d.get("width")});j.on("itemSelected",function(l){var k;k=h[l.pos];if(k&&e){d.templatize(e,i+"-content",k);}});c=d.get("height")-40+"px";j.render();b.one("#"+i+"-ol").setStyle("height",c);j.scrollTo(1);j.scrollTo(0);},templatize:function(g,j,h){var d=this,f="",e="",c,i;c=b.one("#"+g);i=b.one("#"+j);if(c){e=c.get("innerHTML");}if(h instanceof Array){b.each(h,function(k){f+=b.substitute(e,k);},this);}else{f+=b.substitute(e,h);}i.set("innerHTML",f);d.lazyLoad(j);},lazyLoad:function(c){b.all("#"+c+" img[xrc]").each(function(f,e){var d=f.getAttribute("xrc");if(d){f.setAttribute("src",d);f.removeAttribute("xrc");}});},doSkeleton:function(){var c=this,e={},f,d,g;d=c.get("containerId");g=b.one("#"+d);e.containerId=d;f=b.substitute(c.tpl,e);if(g){g.set("innerHTML",f);}},process:function(){var c=this,g,f,d,e;g=c.get("containerId");f=c.get("data");d=c.get("contentTplId");e=c.get("liTplId");if(!g||!f||!d){return;}c.doSkeleton();c.templatize(e,g+"-ol",c.get("data"));c.register();},tpl:'<div class="spotlight"><div id="{containerId}-carousel" class="yui3-carousel yui3-carousel-horizontal">'+'<ol id="{containerId}-ol"></ol></div>'+'<div id="{containerId}-content"></div>'+'<div id="{containerId}-hiddencontent" style="dislay:none"></div></div>'});b.Spotlight=a;},"gallery-2011.05.04-20-03",{requires:["gallery-carousel","gallery-carousel-anim","substitute"],skinnable:true});