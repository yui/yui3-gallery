YUI.add("gallery-spotlight",function(b){function a(c){a.superclass.constructor.apply(this,arguments);}a.NAME="Spotlight";a.ATTRS={data:{},liTplId:{},contentTplId:{},containerId:{},numVisible:3,height:200,width:300};b.extend(a,b.Base,{getHtml:function(e){var c,d;if(e){d=b.one("#"+e);if(d){c=d.get("innerHTML");}}return c;},templatize:function(d,h,f){var c=this,e="",g;g=b.one("#"+h);if(f&&f instanceof Array){b.each(f,function(j){e+=b.substitute(d,j);},this);}else{e+=b.substitute(d,f);}if(g){g.set("innerHTML",e);b.LazyloadImages.processnow("#"+h);}},register:function(){var d=this,i,e,f,j,h,c,g;i=d.get("containerId");e=i+"-carousel";f=b.one("#"+i+"-content");h=d.get("data");g=d.getHtml(d.get("contentTplId"));g=(g)?g:d.conTpl;j=new b.Carousel({boundingBox:"#"+e,contentBox:"#"+e+" > ol",animation:{speed:0.5},numVisible:d.get("numVisible"),isVertical:false,height:d.get("height"),width:d.get("width")});j.on("itemSelected",function(l){var k;k=h[l.pos];if(k&&g){d.templatize(g,i+"-content",k);}});c=d.get("height")-40+"px";j.render();b.one("#"+i+"-ol").setStyle("height",c);j.scrollTo(1);j.scrollTo(0);},buildSkeleton:function(e){var c=this,d={},f,g;g=b.one("#"+e);d.containerId=e;f=b.substitute(c.tpl,d);if(g){g.set("innerHTML",f);}},buildThumbnails:function(d){var c=this,e;e=c.getHtml(c.get("liTplId"));e=(e)?e:c.liTpl;e="<li>"+e+"</li>";c.templatize(e,d+"-ol",c.get("data"));},process:function(){var c=this,e,d;e=c.get("containerId");d=c.get("data");if(!e||!d){return;}c.buildSkeleton(e);c.buildThumbnails(e);c.register();},tpl:'<div class="spotlight"><div id="{containerId}-carousel" class="yui3-carousel yui3-carousel-horizontal">'+'<ol id="{containerId}-ol"></ol></div>'+'<div id="{containerId}-content"></div>'+'<div id="{containerId}-hiddencontent" style="dislay:none"></div></div>',liTpl:'<div class="arrow"><img data-src="{photo}" class="thumbnail" title="{title}" alt="{title}"><p class="title">{title}</p></div>',conTpl:'<div class="spot-content"><img data-src="{photo}"/></div>'});b.Spotlight=a;},"gallery-2011.05.12-13-26",{requires:["gallery-carousel","gallery-carousel-anim","substitute","gallery-lazyloadimages"],skinnable:true});