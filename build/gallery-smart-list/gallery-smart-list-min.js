YUI.add("gallery-smart-list",function(C){var N=C.UA,F="width",O="height",H="px",R="host",Q="active",S="items",M="adjustHeight",T="filter",A="sort",K="selector",G=[A,T,M,K],E="role",P="aria-hidden",B="tabIndex",I=C.Lang,J=I.isString,D=function(){D.superclass.constructor.apply(this,arguments);};D.NAME="SmartList";D.NS="smartlist";D.ATTRS={items:{readOnly:true,getter:function(){return this._all;}},active:{readOnly:true,getter:function(){return this._root.all(this.get(K));}},adjustHeight:{value:"auto",writeOnce:true,validator:J},selector:{value:"li",writeOnce:true,validator:J},filter:{value:"",validator:J},sort:{value:"asc",validator:function(L){return((L=="asc")||(L=="desc")||(C.Lang.isFunction(L)));}}};C.extend(D,C.Plugin.Base,{_root:null,initializer:function(L){var V=this.get(R),U=this;L=L||{};if(V){this._root=V;C.Array.each(G,function(W){if(L[A]){U.set(A,L[A]);}});this.sync()._compute();this.after(T+"Change",function(W){U.refresh();});}},destructor:function(){this._all=null;this._bench=null;this._root=null;},_setToFloat:function(V){var L=V.get("region"),U=["marginTop","marginLeft","borderLeftWidth","borderTopWidth"];C.Array.each(U,function(W){L[W]=parseInt(V.getStyle(W),10)||0;});V.setStyles({top:L.top-L.borderTopWidth-L.marginTop,left:L.left-L.borderLeftWidth-L.marginLeft,position:"absolute"});return L;},_compute:function(V){var X=[],U=this.get(Q),L=[],W=this.get(A),Z=this.get(T),Y=this;V=V||[];this.get(S).each(function(b,a){if(V.indexOf(b)<0){if(!Z||(Z==="")||b.test(Z)){L.push(b);}else{X.push(b);}}});U._nodes.reverse();U.each(this._setToFloat,this);(this._bench._nodes=C.all(X)).each(this._disappear,this);L.reverse();C.all(L).each(function(b,a){Y._root.prepend(b.remove());if((U.indexOf(b)<0)||Y._isHidden(b)){b.setStyles({position:"absolute",top:100+H,left:100+H,opacity:0,display:"block",visibility:"visible"});Y._appear(b,a);b.set(P,false).set(B,0);}else{Y._move(b,a);b.set(P,"true").set(B,-1);}});},_isHidden:function(U){var L=this._root;return(!U||!U.ancestor(function(V){return(L===V);})||(U.getStyle("display").toLowerCase()=="none")||(U.getStyle("visibility").toLowerCase()=="hidden")||(parseInt(U.getStyle("opacity"),10)===0));},_getXY:function(L){return{top:0,left:0};},_disappear:function(U){var L=function(){U.remove();};if(!this._isHidden(U)){this._animate(U,{opacity:0},L);}else{L.call();}},_appear:function(U,L){U.setStyles(this._getXY(L));this._animate(U,{opacity:1},function(){U.setStyles({top:0,left:0,position:"relative"});});},_move:function(U,L){this._animate(U,this._getXY(L),function(){U.setStyles({top:0,left:0,position:"relative"});});},_animate:function(V,L,U){V.setStyles(L);U.call();},clear:function(){this._compute(this.get(S));return this;},sync:function(){this._bench=C.all([]);this._all=this.get(Q);this._all.set(E,"presentation").set(B,0).toFrag();return this;},refresh:function(){this._compute();return this;},addItem:function(L){return this.addItems([L]);},removeItem:function(L){if(this.get(S).indexOf(C.one(L))>=0){this._compute(C.all(L));}return this;},addItems:function(L){var U=this;L=C.all(L);L.each(function(V){U.get(S)._nodes.push(V);});this._compute();return this;}});C.namespace("Plugin");C.Plugin.SmartList=D;},"gallery-2010.03.11-21",{optional:["anim"],requires:["node-base","node-style","plugin"]});