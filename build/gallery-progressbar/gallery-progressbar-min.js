YUI.add("gallery-progressbar",function(A){A.ProgressBar=A.Base.create("progressBar",A.Widget,[],{currentLabel:"",renderUI:function(){this.get("contentBox").append(A.substitute(this.get("layout"),{sliderClass:this.getClassName("slider"),labelClass:this.getClassName("label")}));},bindUI:function(){this.after("labelChange",this._updateLabel);this.after("progressChange",this._updateBackground);},syncUI:function(){this._updateBackground();},increment:function(B){B=B||1;this.set("progress",this.get("progress")+parseFloat(B,10));return this;},update:function(B){this.set("progress",B);return this;},setLabelAt:function(B,D){var C=this.get("label");B=parseFloat(B,10);C[B]=D;this.set("label",C);return this;},removeLabelAt:function(B){var C=this.get("label");B=parseFloat(B,10);if(C[B]!==undefined&&C[B]!==null){delete C[B];}this.get("label",C);return this;},_updateLabel:function(I){var F=this.getAttrs(),E=this.get("label"),D=this.get("progress"),H,C;if(E[D]!==undefined&&E[D]!==null){C=E[D];}else{H=A.Object.keys(E);H.sort(A.Array.numericSort);var G=-1,B=H.length;while(++G<B){if(H[G]<=D){C=E[H[G]];}}}F.label=C||"";this.get("contentBox").one("."+this.getClassName("label")).set("text",A.substitute(this.get("labelTemplate"),F));},_updateBackground:function(D){var C=this.get("contentBox").one("."+this.getClassName("slider")),B=C.get("offsetWidth")*this.get("progress")/100;C.setStyle("backgroundPosition",B+"px center");this._updateLabel();}},{ATTRS:{labelTemplate:{value:"{label} - {progress}%"},label:{value:{0:"Loading",100:"Complete"},validator:function(B){return(A.Lang.isString(B)||A.Lang.isObject(B));},setter:function(B){if(A.Lang.isString(B)){B={0:B};}return B;}},layout:{value:'<div class="{sliderClass} {labelClass}"></div>'},precision:{value:2,setter:function(B){return parseInt(B,10);}},progress:{value:0,setter:function(C){var B=Math.pow(10,this.get("precision"));C=parseFloat(C,10);if(C<0){C=0;}else{if(C>100){C=100;}}return Math.round(C*B)/B;}}}});},"gallery-2010.06.30-19-54",{requires:["widget","substitute"]});