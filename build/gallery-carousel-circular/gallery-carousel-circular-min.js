YUI.add("gallery-carousel-circular",function(h){var b=h.ClassNameManager.getClassName,a="children",e="circular-carousel",g="first-child",f="last-child",c=10,d={circularCarousel:b(e),circularCarouselItem:b(e,"item"),end:b(e,"end"),left:b(e,"left"),right:b(e,"right"),selectedCarouselItem:b(e,"selected"),start:b(e,"start")};h.CircularCarousel=h.Base.create("circularcarousel",h.Widget,[h.WidgetParent],{initializer:function(){this.list=this.get("srcNode");this.listNodes=this.list.all("li");this.totalNodes=this.get("totalNodes");this.numNodesToDisplay=this.get("numNodesToDisplay");this.publish("goPrev",{defaultFn:this._goPrev},this);this.publish("goNext",{defaultFn:this._goNext},this);},_initScroll:function(){var l,m,k,j=[];m=this.list;this.currentNode=m.one("."+d.selectedCarouselItem);this.firstNode=m.one("."+d.start);this.lastNode=m.one("."+d.end);k=0;if(typeof this.prevCount==="undefined"){this.prevCount=this.totalNodes-this.numNodesToDisplay+1;}if(!this.nextCount){this.nextCount=this.numNodesToDisplay-1;}l=this.currentNode;this.rightNode=l.next();this.leftNode=l.previous();if(!this.rightNode){this.rightNode=this.firstNode;}if(!this.leftNode){this.leftNode=this.lastNode;}this.rightNode.addClass(d.right);this.leftNode.addClass(d.left);h.each(this.listNodes,function(i){j[k]=i;if(!i.hasClass("yui3-circular-carousel-selected")&&!i.hasClass("yui3-circular-carousel-right")&&!i.hasClass("yui3-circular-carousel-left")&&!i.hasClass("yui3-circular-carousel-start")&&!i.hasClass("yui3-circular-carousel-end")){i.remove();}k++;});this.arr=j;},renderUI:function(){var i=this.list;i.addClass(d.circularCarousel);i.one(":"+g).addClass(d.start);i.one(":"+g).addClass(d.selectedCarouselItem);i.one(":"+f).addClass(d.end);i.get(a).addClass(d.circularCarouselItem);if(i){this._initScroll();}},bindUI:function(){this.list.on("gesturemovestart",h.bind(this._detectSwipe,this));h.on("swipedLeft",this._goPrev,this);h.on("swipedRight",this._goNext,this);},syncUI:function(){},_detectSwipe:function(m){var k=m.currentTarget,n,j,l,i;k.setData("swipeStart",m.pageX);k.once("gesturemoveend",function(o){n=k.getData("swipeStart");j=o.pageX;l=(n-j)>c;i=(j-n)>c;if(l){h.fire("swipedRight");}else{if(i){h.fire("swipedLeft");}}});},_goPrev:function(){var i,j;if(this.prevCount<0){this.prevCount=this.totalNodes-1;}else{if(this.prevCount>(this.totalNodes-1)){this.prevCount=0;}}i=this.leftNode;j=this.arr[this.prevCount];this.list.prepend(j);this.currentNode.replaceClass(d.selectedCarouselItem,d.right);this.rightNode.removeClass(d.right);this.prevCount--;this.nextCount--;if(this.nextCount<0){this.nextCount=this.totalNodes-1;}this.rightNode.remove();this.rightNode=this.currentNode;i.replaceClass(d.left,d.selectedCarouselItem);this.currentNode=i;if(!j){j=this.lastNode;}j.addClass(d.left);this.leftNode=j;},_goNext:function(){var i,j;if(this.nextCount==this.totalNodes){this.nextCount=0;}else{if(this.nextCount<0){this.nextCount=this.totalNodes-1;}}i=this.rightNode;j=this.arr[this.nextCount];this.list.append(j);this.currentNode.replaceClass(d.selectedCarouselItem,d.left);this.leftNode.removeClass(d.left);this.nextCount++;this.prevCount++;if(this.prevCount>this.totalNodes-1){this.prevCount=0;}this.leftNode.remove();this.leftNode=this.currentNode;i.replaceClass(d.right,d.selectedCarouselItem);this.currentNode=i;if(!j){j=this.firstNode;}j.addClass(d.right);this.rightNode=j;}},{NAME:"circularcarousel",ATTRS:{label:{validator:h.Lang.isString},tabIndex:{value:-1},totalNodes:{value:20},numNodesToDisplay:{value:13}}});},"gallery-2012.03.23-18-00",{requires:["node","event"]});