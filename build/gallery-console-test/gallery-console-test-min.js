YUI.add("gallery-console-test",function(c){function a(d){a.superclass.constructor.call(this,d);}a.NAME="ConsoleTestPlugin";a.NS="test";function b(e){var d=c.Node.getDOMNode(e);d.length=0;d[0]=new Option("All tests",-1);c.Array.each(c.Test.Runner.masterSuite.items,function(g,f){d[f+1]=new Option(g.name,f);});}c.extend(a,c.Plugin.Base,{initializer:function(d){this.doAfter("renderUI",this.renderUI);if(this.get("host").get("rendered")){this.renderUI();}},destructor:function(){this.container.remove();},renderUI:function(){var g=this.get("host").get("contentBox").one("."+c.Console.CHROME_CLASSES.console_ft_class);if(g){this.container=c.Node.create(c.Lang.sub('<div class="{c}">'+'<select class="menu"></select>'+'<button class="run">{b1}</button>'+'<button class="refresh">{b2}</button>'+"</div>",{c:c.ClassNameManager.getClassName("console","test","container"),b1:"Run",b2:"Refresh"}));var f=this.container.one("select");b(f);this.container.one("button.run").on("click",function(){var j=f.get("value");if(j>=0){var l=c.Test.Runner.masterSuite.items;c.Test.Runner.clear();c.Test.Runner.add(l[j]);var k=c.Test.Runner.on("complete",function(){k.detach();c.Test.Runner.clear();c.Array.each(l,function(h){c.Test.Runner.add(h);});});}c.Test.Runner.run();});this.container.one("button.refresh").on("click",function(){b(f);});var e=g.one("."+c.Console.CHROME_CLASSES.console_controls_class);var d=e.get("nextSibling");if(d){g.insertBefore(this.container,d);}else{g.appendChild(this.container);}}}});c.namespace("Plugin");c.Plugin.ConsoleTest=a;},"gallery-2011.06.29-23-18",{requires:["console","plugin","test"],skinnable:true});