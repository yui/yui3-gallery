YUI.add("gallery-effects",function(b){var f=b.Lang,i=b.DOM,h="global",e={};e.EffectQueues={instances:{},get:function(k){if(!f.isString(k)){return k;}if(!this.instances[k]){this.instances[k]=new b.AsyncQueue();}return this.instances[k];}};e.GlobalQueue=e.EffectQueues.get(h);b.mix(b.DOM,{show:function(k){b.DOM.setStyle(k,"display","");},hide:function(k){b.DOM.setStyle(k,"display","none");},displayed:function(k){return b.DOM.getStyle(k,"display")!=="none";},toggle:function(k){b.DOM[b.DOM.displayed(k)?"hide":"show"](k);},getPositionedOffset:function(l){var k=0,n=0;do{k+=l.offsetTop||0;n+=l.offsetLeft||0;l=l.offsetParent;if(l){if(l.tagName==="BODY"){break;}var m=i.getStyle(l,"position");if(m!=="static"){break;}}}while(l);return[n,k];},positionAbsolutely:function(l){if(i.getStyle(l,"position")==="absolute"){return;}var k=i.getPositionedOffset(l);i.setStyles(l,{position:"absolute",top:k[1]+"px",left:k[0]+"px",width:l.clientWidth+"px",height:l.clientHeight+"px"});},getDimensions:function(l){var o;if(i.displayed(l)){o=i.region(l);return[o.width,o.height];}var m=i.getStyle(l,"visibility"),p=i.getStyle(l,"position"),k=i.getStyle(l,"display"),n;i.setStyles(l,{visibility:"hidden",position:"absolute",display:"block"});o=i.region(l);n=[o.width,o.height];i.setStyles(l,{visibility:m,position:p,display:k});return n;},makePositioned:function(k){var l=i.getStyle(k,"position");if(l==="static"||!l){i.setStyle(k,"position","relative");}},undoPositioned:function(k){i.setStyles(k,{position:"",top:"",left:"",bottom:"",right:""});},_makeClipping:function(k){if(k._overflow){return k;}k._overflow=i.getStyle(k,"overflow")||"auto";if(k._overflow!=="hidden"){i.setStyle(k,"overflow","hidden");}},_undoClipping:function(k){if(!k._overflow){return;}i.setStyle(k,"overflow",k._overflow==="auto"?"":k._overflow);k._overflow=undefined;}});b.Node.importMethod(b.DOM,["show","hide","displayed","toggle","getPositionedOffset","positionAbsolutely","getDimensions","makePositioned","undoPositioned","_makeClipping","_undoClipping"]);var c="queue",j="setup",d="finish";e.BaseEffect=function(k){e.BaseEffect.superclass.constructor.apply(this,arguments);};e.BaseEffect.NAME="baseEffect";e.BaseEffect.ATTRS={scope:{value:h,validator:f.isString},wait:{value:true,validator:f.isBoolean},managed:{value:false,validator:f.isBoolean},anim:{validator:function(k){return k instanceof b.Anim;}},node:{writeOnce:true,validator:function(k){return k instanceof b.Node;}},config:{validator:f.isObject}};b.extend(e.BaseEffect,b.Base,{initializer:function(k){this.set("config",k);this.set("node",b.one(k.node));this.publish(c,{defaultFn:this._queue});this.publish(j,{defaultFn:this.setup});this.publish(d,{defaultFn:this.finish});if(k.beforeStart){this.on(c,k.beforeStart);}if(k.beforeSetup){this.on(j,k.beforeSetup);}if(k.afterSetup){this.after(j,k.afterSetup);}if(k.beforeFinish){this.on(d,k.beforeFinish);}if(k.afterFinish){this.after(d,k.afterFinish);}},setup:function(){},addToQueue:function(){if(!this.get("managed")){this.fire(c);}},run:function(){this.fire(j);var k=this.get("anim");k.on("end",function(l){this.fire(d,{animEnd:l});},this);k.run();},finish:function(){this._finish();if(!this.get("managed")&&!this._getQueue().isRunning()){this._getQueue().run();}},_queue:function(){var k=this._getQueue();k.add({fn:this.run,context:this,autoContinue:!this.get("wait")});if(!k.isRunning()){k.run();}},_getQueue:function(){return e.EffectQueues.get(this.get("scope"));},_finish:function(){}});e.Parallel=function(k){e.Parallel.superclass.constructor.apply(this,arguments);};e.Parallel.NAME="parallel";e.Parallel.ATTRS={effects:{value:[],validator:f.isArray}};b.extend(e.Parallel,e.BaseEffect,{initializer:function(k){this.addToQueue();},run:function(){var l=this.get("effects"),k=this.get("config");this.fire(j);if(l.length){l[l.length-1].after("animChange",function(m){m.newVal.on("end",function(){this.fire(d,{animEnd:null});},this);},this);b.Array.each(l,function(m){m.set("config",b.merge(m.get("config"),k));m.run();});}else{this.fire(d,{animEnd:null});}}});e.Opacity=function(k){e.Opacity.superclass.constructor.apply(this,arguments);};e.Opacity.NAME="opacity";b.extend(e.Opacity,e.BaseEffect,{_startOpacity:0,initializer:function(k){this._startOpacity=this.get("node").getStyle("opacity")||0;this.addToQueue();},setup:function(){var k=this.get("config");k.from={opacity:k.from!==undefined?k.from:this._startOpacity};k.to={opacity:k.to!==undefined?k.to:1};this.set("anim",new b.Anim(k));}});e.Move=function(k){e.Move.superclass.constructor.apply(this,arguments);};e.Move.NAME="move";b.extend(e.Move,e.BaseEffect,{initializer:function(k){this.addToQueue();},setup:function(){var k=this.get("config"),m=this.get("node"),l=b.Node.getDOMNode(m);m.makePositioned();if(k.mode==="absolute"){k.to={xy:[k.x,k.y]};}else{k.to={left:((k.x||0)+parseFloat(l.style.left||"0"))+"px",top:((k.y||0)+parseFloat(l.style.top||"0"))+"px"};}this.set("anim",new b.Anim(k));}});e.Scroll=function(k){e.Scroll.superclass.constructor.apply(this,arguments);};e.Scroll.NAME="scroll";b.extend(e.Scroll,e.BaseEffect,{initializer:function(k){this.addToQueue();},setup:function(){var k=this.get("config");k.to={scroll:k.to};k.from={scroll:k.from};this.set("anim",new b.Anim(k));}});e.Morph=function(k){e.Morph.superclass.constructor.apply(this,arguments);};e.Morph.NAME="morph";b.extend(e.Morph,e.BaseEffect,{initializer:function(k){this.addToQueue();},setup:function(){this.set("anim",new b.Anim(this.get("config")));}});e.Scale=function(k){e.Scale.superclass.constructor.apply(this,arguments);};e.Scale.NAME="scale";e.Scale.ATTRS={scaleX:{value:true,validator:f.isBoolean},scaleY:{value:true,validator:f.isBoolean},scaleContent:{value:true,validator:f.isBoolean},scaleFromCenter:{value:false,validator:f.isBoolean},scaleMode:{value:"box",validator:function(k){return k==="box"||k==="contents"||f.isObject(k);}},scaleFrom:{value:100,validator:f.isNumber},scaleTo:{value:200,validator:f.isNumber,setter:function(k){return k;}},restoreAfterFinish:{value:false,validator:f.isBoolean}};
b.extend(e.Scale,e.BaseEffect,{_originalStyle:{},initializer:function(k){this.addToQueue();},setup:function(){var H=this.get("config"),B=this.get("node"),G=this.get("scaleX"),F=this.get("scaleY"),A=this.get("scaleContent"),s=this.get("scaleFromCenter"),D=this.get("scaleMode"),J=this.get("scaleFrom"),q=this.get("scaleTo"),t=B.getStyle("position"),u=B.getPositionedOffset(),o=B.getStyle("fontSize")||"100%",y,z;b.Array.each(["top","left","width","height","fontSize"],b.bind(function(K){this._originalStyle[K]=B.getStyle(K);},this));b.Array.each(["em","px","%","pt"],function(K){if(o.toString().indexOf(K)>0){o=parseFloat(o);y=K;}});if(D==="box"){z=[B.get("offsetHeight"),B.get("offsetWidth")];}else{if(/^content/.test(D)){z=[B.get("scrollHeight"),B.get("scrollWidth")];}else{z=[D.originalHeight,D.originalWidth];}}var n={},C={},w=q/100,l=J/100,x=z[1]*l,v=z[0]*l,m=z[1]*w,r=z[0]*w;if(A&&o){C.fontSize=o*l+y;n.fontSize=o*w+y;}if(G){C.width=x+"px";n.width=m+"px";}if(F){C.height=v+"px";n.height=r+"px";}if(s){var k=(v-z[0])/2,E=(x-z[1])/2,I=(r-z[0])/2,p=(m-z[1])/2;if(t==="absolute"){if(F){C.top=(u[1]-k)+"px";n.top=(u[1]-I)+"px";}if(G){C.left=(u[0]-E)+"px";n.left=(u[0]-p)+"px";}}else{if(F){C.top=-k+"px";n.top=-I+"px";}if(G){C.left=-E+"px";n.left=-p+"px";}}}H.to=n;H.from=C;this.set("anim",new b.Anim(H));},_finish:function(){if(this.get("restoreAfterFinish")){this.get("node").setStyles(this._originalStyle);}}});e.Highlight=function(k){if(!b.one(k.node).displayed()){return;}e.Highlight.superclass.constructor.apply(this,arguments);};e.Highlight.NAME="highlight";e.Highlight.ATTRS={startColor:{value:"#ff9",validator:f.isString},endColor:{value:"#fff",validator:f.isString},restoreColor:{value:"",validator:f.isString}};b.extend(e.Highlight,e.BaseEffect,{_previousBackgroundImage:"",initializer:function(k){this.addToQueue();},setup:function(){var k=b.merge({iterations:1,direction:"alternate"},this.get("config")),l=this.get("node");k.from={backgroundColor:this.get("startColor")};k.to={backgroundColor:this.get("endColor")};if(!this.get("restoreColor")){this.set("restoreColor",l.getStyle("backgroundColor"));}this._previousBackgroundImage=l.getStyle("backgroundImage");l.setStyle("backgroundImage","none");this.set("anim",new b.Anim(k));},_finish:function(){this.get("node").setStyles({backgroundImage:this._previousBackgroundImage,backgroundColor:this.get("restoreColor")});}});e.Puff=function(k){var n=b.one(k.node),m={opacity:n.getStyle("opacity"),position:n.getStyle("position"),top:n.getStyle("top"),left:n.getStyle("left"),width:n.getStyle("width"),height:n.getStyle("height")},l=new e.Parallel(b.merge({effects:[new e.Scale({node:n,managed:true,scaleTo:200,scaleFromCenter:true,scaleContent:true,restoreAfterFinish:true}),new e.Opacity({node:n,managed:true,to:0})],duration:1},k));l.on("setup",function(){this.get("node").positionAbsolutely();});l.after("finish",function(){this.get("node").hide().setStyles(m);});return l;};e.Appear=function(k){var m=b.one(k.node),n=!m.displayed()?0:m.getStyle("opacity")||0,l=new e.Opacity(b.merge({from:n,to:1},k));l.on("setup",function(){this.get("node").setStyle("opacity",n).show();});return l;};e.Fade=function(l){var o=b.one(l.node),m=o.getStyle("opacity"),k=l.to||0,n=new e.Opacity(b.merge({from:m||1,to:k},l));n.after("finish",function(){if(k!==0){return;}this.get("node").hide().setStyle("opacity",m);});return n;};e.BlindUp=function(k){var m=b.one(k.node);m._makeClipping();var l=new e.Scale(b.merge({scaleTo:0,scaleContent:false,scaleX:false,restoreAfterFinish:true},k));l.after("finish",function(){this.get("node").hide()._undoClipping();});return l;};e.BlindDown=function(l){var n=b.one(l.node),k=n.getDimensions(),m=new e.Scale(b.merge({scaleTo:100,scaleContent:false,scaleX:false,scaleFrom:0,scaleMode:{originalHeight:k[1],originalWidth:k[0]},restoreAfterFinish:true},l));m.after("setup",function(){var o=this.get("node");o._makeClipping().setStyle("height","0px").show();});m.after("finish",function(){this.get("node")._undoClipping();});return m;};e.SwitchOff=function(l){var k,m=new e.Appear(b.merge({duration:0.4,from:0,easing:function(o,n,r,p){var q=((-Math.cos(o/p*Math.PI)/4)+0.75)+Math.random()/4;return r*(q>1?1:q)+n;}},l));m.on("setup",function(){k=this.get("node").getStyle("opacity");});m.after("finish",function(){var n=new e.Scale({node:this.get("node"),scaleTo:1,duration:0.3,scaleFromCenter:false,scaleX:false,scaleContent:false,restoreAfterFinish:true});n.on("setup",function(){this.get("node").makePositioned()._makeClipping();});n.after("finish",function(){this.get("node").hide()._undoClipping().undoPositioned().setStyle("opacity",k);});});return m;};e.DropOut=function(l){var k,m=new e.Parallel(b.merge({effects:[new e.Move({node:l.node,managed:true,x:0,y:100}),new e.Opacity({node:l.node,managed:true,to:0})],duration:0.5},l));m.on("setup",function(){var n=this.get("node");k={top:n.getStyle("top"),left:n.getStyle("left"),opacity:n.getStyle("opacity")};this.get("node").makePositioned();});m.after("finish",function(){this.get("node").hide().undoPositioned().setStyles(k);});return m;};e.Squish=function(k){var l=new e.Scale(b.merge({scaleTo:0,restoreAfterFinish:true},k));l.on("setup",function(){this.get("node")._makeClipping();});l.after("finish",function(){this.get("node").hide()._undoClipping();});return l;};e.Shake=function(l){l=b.merge({distance:20,duration:0.5},l);var k,o=parseFloat(l.distance),m=parseFloat(l.duration)/10,n=new e.Move({node:l.node,x:o,y:0,duration:m,afterFinish:function(p){new e.Move({node:l.node,x:-o*2,y:0,duration:m*2,afterFinish:function(q){new e.Move({node:l.node,x:o*2,y:0,duration:m*2,afterFinish:function(r){new e.Move({node:l.node,x:-o*2,y:0,duration:m*2,afterFinish:function(s){new e.Move({node:l.node,x:o*2,y:0,duration:m*2,afterFinish:function(t){new e.Move({node:l.node,x:-o,y:0,duration:m,afterFinish:function(u){l.node.undoPositioned().setStyles(k);}});}});}});}});}});}});n.on("setup",function(){var p=l.node;k={top:p.getStyle("top"),left:p.getStyle("left")};p.makePositioned();
});return n;};b.Effects=e;var g={},a="opacity move scroll scale morph highlight appear fade puff blindUp blindDown switchOff dropOut squish shake".split(" ");b.Array.each(a,function(k){g[k]=function(m,l){l=b.merge({node:b.get(m)},l||{});var n=new b.Effects[k.charAt(0).toUpperCase()+k.substring(1)](l);};});b.Node.importMethod(g,a);},"@VERSION@",{requires:["node","anim","async-queue"]});