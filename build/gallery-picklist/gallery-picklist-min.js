YUI.add("gallery-picklist",function(d){var c=d.Lang,b=c.sub;function a(e){a.superclass.constructor.apply(this,arguments);}a.NAME="picklist";a.ATTRS={options:{value:[],validator:c.isArray},selections:{value:[],validator:c.isArray},optionsMap:{value:{value:"value",text:"text",title:"title"},writeOnce:true,validator:function(e){if(!c.isObject(e)){return false;}if(e.text&&!e.value){e.value="value";}else{if(e.value&&!e.text){e.text="text";}}if(!e.title){e.title="title";}return true;}},optClassName:{value:"",validator:c.isString},selClassName:{value:"",validator:c.isString},template:{value:"",validator:c.isString},buttonType:{value:"htmlbutton",writeOnce:true,validator:function(e){if(c.isString(e)){if(e.search(/htmlbutton|ybutton|cssbutton|link/i)!==-1){return true;}}return false;}},srcNode:{value:null,validator:c.isString,writeOnce:true},selectSize:{value:10,validator:c.isNumber},selectWidth:{value:"9em",validator:c.isString},stackMode:{value:false,writeOnce:true,validator:c.isBoolean},preserveOrder:{value:false,writeOnce:true,validator:c.isBoolean},actionLabelAll:{value:"Add All",validator:c.isString},actionLabelOne:{value:"Add",validator:c.isString},actionLabelRmv:{value:"Remove",validator:c.isString},actionLabelRmvAll:{value:"Remove All",validator:c.isString}};a.INPUT_CLASS=d.ClassNameManager.getClassName(a.NAME,"value");d.extend(a,d.Widget,{TMPL_control:'<table><tr><td valign="top">Available:<br/>{OPTIONS_CONTAINER}</td><td valign="middle">'+'{ACTION_ALL}<br/>{ACTION_ONE}<br/>{ACTION_BACK}<br/>{ACTION_ALLBACK}</td><td valign="top">'+"Selected:<br/>{SELECTIONS_CONTAINER}</td></tr></table>",TMPL_inputs:'<select size="{size}" class="{className}" multiple="1"></select>',TMPL_option:'<option value="{optValue}" title="{optTitle}">{optText}</option>',TMPL_button:'<button class="{className}">{content}</button>',TMPL_cssbtn:'<button class="yui3-button {className}">{lcontent}<span class="yui3-button-icon yui3-button-icon-{subName}"></span>{rcontent}</button>',TMPL_alink:'<a class="{className}" href="javascript:void(0);">{content}</a>',CLASS_ACTION:"action",_optionNode:null,_selectNode:null,_eventHandles:[],_ybuttons:[],_optOrder:[],initializer:function(e){this._eventHandles=[];this._ybuttons=[];this._optOrder=[];this._optionNode=null;this._selectNode=null;return true;},destructor:function(){d.Array.each(this._ybuttons,function(e){e.destroy();});this._ybuttons.length=0;d.Array.each(this._eventHandles,function(e){e.detach();});this._eventHandles.length=0;this._optOrder.length=0;this._optionNode.destroy();this._selectNode.destroy();return true;},renderUI:function(){this._renderInput();if(this.get("options")){this._loadOptions();}this._optionNode.focus();this.fire("render");},bindUI:function(){if(this.get("buttonType")==="ybutton"){var g=this._ybuttons;if(g[0]){this._eventHandles.push(g[0].on("click",d.bind(this._onButtonAll,this)));}if(g[1]){this._eventHandles.push(g[1].on("click",d.bind(this._onButtonOne,this)));}if(g[2]){this._eventHandles.push(g[2].on("click",d.bind(this._onButtonBack,this)));}if(g[3]){this._eventHandles.push(g[3].on("click",d.bind(this._onButtonAllBack,this)));}}else{var i=this.get("contentBox"),f=i.one("."+this.getClassName(this.CLASS_ACTION,"all")),j=i.one("."+this.getClassName(this.CLASS_ACTION,"one")),e=i.one("."+this.getClassName(this.CLASS_ACTION,"rmv")),h=i.one("."+this.getClassName(this.CLASS_ACTION,"rmvall"));if(f){this._eventHandles.push(f.on("click",d.bind(this._onButtonAll,this)));}if(j){this._eventHandles.push(j.on("click",d.bind(this._onButtonOne,this)));}if(e){this._eventHandles.push(e.on("click",d.bind(this._onButtonBack,this)));}if(h){this._eventHandles.push(h.on("click",d.bind(this._onButtonAllBack,this)));}}this.after("optionsChange",d.bind(this._loadOptions,this,false));this.after("selectionsChange",d.bind(this._loadOptions,this,true));return true;},syncUI:function(){},clearOptions:function(){this._optOrder.length=0;return this._clearOptions(this._optionNode);},clearSelections:function(){return this._clearOptions(this._selectNode);},getSelections:function(){var e=this._selectNode,f=[];e.get("options").each(function(h,g){f.push({value:h.get("value"),text:h.get("text"),title:h.get("title")});});return f;},_renderInput:function(){var k=this.get("contentBox"),m=(this.get("template"))?d.one(this.get("template")).getContent():null;var j=m||this.TMPL_control;k.addClass(this.getClassName());var e,g,i,l,h,f;h=b(this.TMPL_inputs,{size:this.get("selectSize"),className:this.getClassName("options")+" "+this.get("optClassName")});f=b(this.TMPL_inputs,{size:this.get("selectSize"),className:this.getClassName("selected")+" "+this.get("selClassName")});if(this.get("buttonType")==="htmlbutton"||this.get("buttonType")==="ybutton"){e=this._createHtmlButton("all","actionLabelAll");g=this._createHtmlButton("one","actionLabelOne");i=this._createHtmlButton("rmv","actionLabelRmv");l=this._createHtmlButton("rmvall","actionLabelRmvAll");}if(this.get("buttonType")==="link"){e=this._createALinkButton("all","actionLabelAll");g=this._createALinkButton("one","actionLabelOne");i=this._createALinkButton("rmv","actionLabelRmv");l=this._createALinkButton("rmvall","actionLabelRmvAll");}if(this.get("buttonType")==="cssbutton"){e=this._createCssButton("all",null,"actionLabelAll");g=this._createCssButton("one",null,"actionLabelOne");i=this._createCssButton("rmv",null,"actionLabelRmv");l=this._createCssButton("rmvall",null,"actionLabelRmvAll");}k.setContent(b(j,{OPTIONS_CONTAINER:h||"",SELECTIONS_CONTAINER:f||"",ACTION_ALLBACK:l||"",ACTION_ALL:e||"",ACTION_ONE:g||"",ACTION_BACK:i||""}));this._optionNode=k.one("."+this.getClassName("options"));this._selectNode=k.one("."+this.getClassName("selected"));if(this._optionNode&&!this.get("optClassName")){this._optionNode.setStyle("width",this.get("selectWidth"));}if(this._selectNode&&!this.get("selClassName")){this._selectNode.setStyle("width",this.get("selectWidth"));}this._optionNode.set("selectedIndex",-1);this._selectNode.set("selectedIndex",-1);if(this.get("buttonType")==="ybutton"){this._ybuttons.push(this._createYButtonNode(k.one("."+this.getClassName(this.CLASS_ACTION,"all"))));
this._ybuttons.push(this._createYButtonNode(k.one("."+this.getClassName(this.CLASS_ACTION,"one"))));this._ybuttons.push(this._createYButtonNode(k.one("."+this.getClassName(this.CLASS_ACTION,"rmv"))));this._ybuttons.push(this._createYButtonNode(k.one("."+this.getClassName(this.CLASS_ACTION,"rmvall"))));}return true;},_createOption:function(e){var f=b(this.TMPL_option,{optValue:e.value||"",optText:e.text||"",optTitle:e.title||""});return opt_node=d.Node.create(f);},_loadOptions:function(g){g=(g===undefined)?false:g;var f=(g)?this._selectNode:this._optionNode,e=f.getDOMNode(),h=(g)?this.get("selections"):this.get("options");if(h){if(!g){this.clearOptions();}this.clearSelections();}d.Array.each(h,function(j){var i=this._optStdFormat(j),k=this._createOption(i);f.append(k);if(this.get("stackMode")&&this.get("preserveOrder")){this._optOrder.push(i.value||i.text);}},this);this.fire("load",{obj:this,opts:h});return h.length;},_clearOptions:function(e){e=e||this._optionNode;e.getDOMNode().options.length=0;return true;},_optStdFormat:function(g){var f=this.get("optionsMap"),h=null,e=null,i=null;if(c.isObject(g)){h=g[f.value]||null;e=g[f.text]||null;i=g[f.title]||null;}else{h=g;e=g;}h=h||e;return{value:h,text:e,title:i};},_returnOptionPerOrder:function(l){var g=this._optionNode,h=this._selectNode,e=this.get("preserveOrder");var k=l.get("value"),j=l.get("text");var f=k||j||null;if(f&&this.get("preserveOrder")&&this.get("stackMode")){var i=this._optOrder.indexOf(l);}},_createYButtonNode:function(e){var f=new d.Button({srcNode:e});return f;},_createCssButton:function(i,h,f){var g=(h)?this.get(h):"";var e=(f)?this.get(f):"";return b(this.TMPL_cssbtn,{className:this.getClassName(this.CLASS_ACTION,i),subName:i,lcontent:g||"",rcontent:e||""});},_createHtmlButton:function(f,e){return b(this.TMPL_button,{"content":this.get(e),className:this.getClassName(this.CLASS_ACTION,f)});},_createALinkButton:function(f,e){return b(this.TMPL_alink,{"content":this.get(e),className:this.getClassName(this.CLASS_ACTION,f)});},_getSelectedOptions:function(f){var e=[];f.get("options").each(function(h,g){if(h.get("selected")===true){e.push({"index":g,optionObj:h});}});return e;},_selOptionExists:function(h){var e=this._selectNode,g=h.get("value"),f=false;e.get("options").some(function(i){if(i.get("value")===g){f=true;return true;}},this);return f;},_onButtonAll:function(i){var f=this._optionNode,g=this._selectNode,h=f.get("options");h.each(function(e){if(this._selOptionExists(e)){return;}if(this.get("stackMode")){g.append(e);}else{g.append(e.cloneNode(true));}},this);this.fire("clickAll",{evt:i,opts:h});},_findInsertIndex:function(k,g){var e=-1;var j=this._optOrder,h=[];g.get("options").each(function(i){h.push(i.get("value"));});var f=0;},_onButtonOne:function(i){var f=this._optionNode,g=this._selectNode;var h=this._getSelectedOptions(f);d.Array.each(h,function(e){this._findInsertIndex(e,g);e.optionObj.set("selected",false);if(this._selOptionExists(e.optionObj)){return;}if(this.get("stackMode")){g.append(e.optionObj);}else{g.append(e.optionObj.cloneNode(true));}},this);this.fire("clickOne",{evt:i,opts:h});},_onButtonBack:function(i){var f=this._optionNode,h=this._selectNode;var g=this._getSelectedOptions(h);d.Array.each(g,function(e){this._findInsertIndex(e,f);e.optionObj.set("selected",false);if(this.get("stackMode")){f.append(e.optionObj);}else{e.optionObj.remove();}},this);this.fire("clickRemove",{evt:i,opts:g});},_onButtonAllBack:function(h){var f=this._optionNode,g=this._selectNode,i=g.get("options");i.each(function(e){if(this.get("stackMode")){f.append(e);}else{e.remove();}},this);this.fire("clickRemoveAll",{evt:h,opts:i});}});d.PickList=a;},"gallery-2012.03.23-18-00",{requires:["base-build","widget","event","button","cssbutton"],skinnable:false});