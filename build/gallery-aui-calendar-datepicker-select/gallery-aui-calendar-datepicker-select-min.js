YUI.add("gallery-aui-calendar-datepicker-select",function(T){var N=T.Lang,f=N.isArray,a=function(A){return T.one(A);},F=function(){return T.Node.create(u);},G="appendOrder",r="baseName",Y="",z="body",AC="button",AA="calendar",E="clearfix",s="currentDay",i="currentMonth",m="currentYear",t="data-auiComponentID",R="datepicker",w="dateFormat",AG="day",n="dayField",k="dayFieldName",C="display",M="displayBoundingBox",c=".",x="helper",AB="maxDate",v="minDate",J="month",W="monthField",S="monthFieldName",p="name",U="option",AF="populateDay",X="populateMonth",AH="populateYear",Z="select",j="selected",H="trigger",AE="wrapper",d="year",g="yearField",AD="yearFieldName",h="yearRange",I=T.ClassNameManager.getClassName,l=I(R),b=I(R,AC,AE),e=I(R,AG),o=I(R,C),D=I(R,J),y=I(R,Z,AE),P=I(R,d),K=I(x,E),u="<select></select>",Q="<option></option>",V="<div></div>",B='<div class="'+b+'"></div>',O="<div class="+y+"></div>";var q=T.Component.create({NAME:R,ATTRS:{appendOrder:{value:["m","d","y"],validator:f},baseName:{value:R},displayBoundingBox:{value:null,setter:a},dayField:{setter:a,valueFn:F},monthField:{setter:a,valueFn:F},yearField:{setter:a,valueFn:F},dayFieldName:{value:AG},monthFieldName:{value:J},yearFieldName:{value:d},trigger:{valueFn:function(){return T.Node.create(B).cloneNode();}},visible:{value:false},yearRange:{valueFn:function(){var A=new Date().getFullYear();return[A-10,A+10];},validator:f},setValue:{value:false},populateDay:{value:true},populateMonth:{value:true},populateYear:{value:true}},EXTENDS:T.Calendar,prototype:{renderUI:function(){var A=this;q.superclass.renderUI.apply(this,arguments);A._renderElements();A._renderTriggerButton();},bindUI:function(){var A=this;q.superclass.bindUI.apply(this,arguments);A.after("datesChange",A._selectCurrentValues);A.after("currentMonthChange",A._afterSetCurrentMonth);A.after("disabledChange",A._afterDisabledChangeDatePicker);A._bindSelectEvents();},syncUI:function(){var A=this;q.superclass.syncUI.apply(this,arguments);A._pupulateSelects();A._selectCurrentValues();},_afterDisabledChangeDatePicker:function(AI){var A=this;var L=AI.newVal;A.get(n).set("disabled",L);A.get(W).set("disabled",L);A.get(g).set("disabled",L);},_getAppendOrder:function(){var L=this;var AJ=L.get(G);var AK={d:L.get(n),m:L.get(W),y:L.get(g)};var AL=AK[AJ[0]];var A=AK[AJ[1]];var AI=AK[AJ[2]];var AM=L.get("id");AL.setAttribute(t,AM);A.setAttribute(t,AM);AI.setAttribute(t,AM);return[AL,A,AI];},_renderElements:function(){var L=this;var AK=L.get(M);if(!AK){AK=T.Node.create(V);L.set(M,AK);T.one(z).append(AK);}var AL=L.get(n);var AI=L.get(W);var A=L.get(g);AL.addClass(e);AI.addClass(D);A.addClass(P);AK.addClass(l);AK.addClass(o);AK.addClass(K);L._selectWrapper=T.Node.create(O);AI.set(p,L.get(S));A.set(p,L.get(AD));AL.set(p,L.get(k));var AJ=L._getAppendOrder();L._selectWrapper.append(AJ[0]);L._selectWrapper.append(AJ[1]);L._selectWrapper.append(AJ[2]);AK.append(L._selectWrapper);},_renderTriggerButton:function(){var A=this;var L=A.get(H).item(0);var AI=A.get(M);A._buttonItem=new T.ButtonItem(AA);AI.append(L);L.setAttribute(t,A.get("id"));if(L.test(c+b)){A._buttonItem.render(L);}},_bindSelectEvents:function(){var A=this;var L=A._selectWrapper.all(Z);L.on("change",T.bind(A._onSelectChange,A));L.on("keypress",T.bind(A._onSelectChange,A));},_selectCurrentValues:function(){var A=this;A._selectCurrentDay();A._selectCurrentMonth();A._selectCurrentYear();},_selectCurrentDay:function(){var A=this;var L=A.getCurrentDate();A.get(n).val(String(L.getDate()));},_selectCurrentMonth:function(){var A=this;var L=A.getCurrentDate();A.get(W).val(String(L.getMonth()));},_selectCurrentYear:function(){var A=this;var L=A.getCurrentDate();A.get(g).val(String(L.getFullYear()));},_pupulateSelects:function(){var AQ=this;AQ._populateDays();AQ._populateMonths();AQ._populateYears();var AP=AQ.get(W).all(U);var AR=AQ.get(g).all(U);var AN=AP.size()-1;var L=AR.size()-1;var AI=AP.item(0).val();var AL=AR.item(0).val();var AO=AP.item(AN).val();var AM=AR.item(L).val();var AJ=AQ.getDaysInMonth(AM,AO);var AK=new Date(AL,AI,1);var A=new Date(AM,AO,AJ);AQ.set(AB,A);AQ.set(v,AK);},_populateYears:function(){var L=this;var AI=L.get(h);var A=L.get(g);if(L.get(AH)){L._populateSelect(A,AI[0],AI[1]);}},_populateMonths:function(){var L=this;var AI=L.get(W);var A=L._getLocaleMap();var AJ=A.B;if(L.get(X)){L._populateSelect(AI,0,(AJ.length-1),AJ);}},_populateDays:function(){var A=this;var AI=A.get(n);var L=A.getDaysInMonth();if(A.get(AF)){A._populateSelect(AI,1,L);}},_populateSelect:function(AM,AL,A,AI,AO){var L=0;var AJ=AL;var AP=this;AM.empty();AI=AI||[];AO=AO||[];while(AJ<=A){var AN=AO[AJ]||AJ;var AK=AI[AJ]||AJ;T.Node.getDOMNode(AM).options[L]=new Option(AK,AJ);L++;AJ++;}},_onSelectChange:function(AK){var A=this;var AM=AK.currentTarget||AK.target;var AI=AM.test(c+D);var AL=A.get(n).val();var AJ=A.get(W).val();var L=A.get(g).val();A.set(s,AL);A.set(i,AJ);A.set(m,L);if(AI){A._afterSetCurrentMonth();}A._selectDate();},_afterSetCurrentMonth:function(L){var A=this;A._populateDays();A._selectCurrentDay();}}});T.DatePickerSelect=q;},"gallery-2010.06.07-17-52",{skinnable:true,requires:["gallery-aui-calendar-base","gallery-aui-button-item"]});