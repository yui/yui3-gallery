YUI.add("gallery-popup-calendar",function(c){var b="input",a="tabindex";c.PopupCalendar=c.Base.create("popup-calendar",c.Calendar,[c.WidgetPosition,c.WidgetPositionAlign,c.WidgetAutohide],{initializer:function(){this._bindEvents();this.setHideOn();this.set("tabIndex",0);if(this.get("autoTabIndexFormElements")){this.get(b).ancestor("form").all(b).setAttribute(a,"1");}},_bindEvents:function(){var d=this.get(b);d.on("focus",this.showCalendar,this);d.on("keydown",this.testKey,this);this.on("selectionChange",this._emitDate,this);this.after("autoFocusOnFieldFocusChange",this.setHideOn,this);},_setPopupTabindex:function(){var d=this.get(b),e=d.getAttribute(a);this.get(b).insert(this.get("boundingBox"),"after");if(e===""){e="0";}this.get("boundingBox").setAttribute(a,e);},_emitDate:function(d){this.fire("dateSelected",d);this.hideCalendar();},_testKey:function(d){if(d.keyCode===9){this.hideCalendar();}},destructor:function(){this.get(b).detachAll();},setHideOn:function(){var d=[{eventName:"mousedownoutside"},{eventName:"key",node:c.one("document"),keyCode:"esc"}];if(this.get("autoFocusOnFieldFocus")){d.push({eventName:"keyupoutside"});}else{d.push({eventName:"keydownoutside"});}this.set("hideOn",d);},showCalendar:function(){if(this.get("rendered")){this.show();}else{this.render();this._setPopupTabindex();}if(this.get("autoFocusOnFieldFocus")){this.focus();}},hideCalendar:function(){this.hide();}},{ATTRS:{input:{value:null},autoFocusOnFieldFocus:{value:false},autoTabIndexFormElements:{value:false}}});},"gallery-2012.04.18-20-14",{skinnable:true,requires:["calendar","widget-position","widget-position-align","widget-autohide"]});