YUI.add("gallery-dialog",function(B){var I=B.Lang,E={CANCEL:"Cancel",OK:"OK"},D={CANCEL:"cancel",OK:"ok"},C=function(){},J="callbacks",H="defaultButton",G="draggable",F="returnVal",A="type";B.Dialog=B.Base.create("dialog",B.Overlay,[],{handleEnter:null,handleEscape:null,initializer:function(K){this.plug(B.Plugin.WidgetAnim);this.plug(B.Plugin.OverlayModal);this.plug(B.Plugin.OverlayKeepaligned);},hide:function(L){B.one("body").set("tabIndex",-1).focus();B.Dialog.superclass.hide.apply(this,arguments);var K=(L)?this.getCallback(L):null;if(I.isFunction(K)){(B.bind(K,this,this.get(F)))();this.set(F,null);}else{K=this.getCallback(D.CANCEL);if(K){(K)();}}this.anim.get("animHide").on("end",B.bind(function(){this.purge();},this));},show:function(){this.get(G);this.handleEscape=B.once("esc",B.bind(function(){this.hide();},this),B.config.doc);B.Dialog.superclass.show.apply(this,arguments);var K=this.get(H);if(K){K.focus();}this.get("boundingBox").set("tabIndex",-1);},header:function(L,K){this._setContent(B.WidgetStdMod.HEADER,L,K);},body:function(L,K){this._setContent(B.WidgetStdMod.BODY,L,K);},footer:function(L,K){this._setContent(B.WidgetStdMod.FOOTER,L,K);},build:function(P,K,O){var N,L,M;this.purge();if(P){this.header(P);}if(K){this.body(K||null);}if(O){for(N=0,L=O.length;N<L;N++){M=O[N];M.render();if(M.get("default")){this.set(H,M);}this.footer(M.get("boundingBox"),"after");}}return this;},getCallback:function(K){return(this.get(J)[K]||null);},addCallback:function(L,K){if(I.isFunction(K)){this.get(J)[L]=K;}},removeCallback:function(K){if(this.get(J)[K]){this.get(J)[K]=null;}},addCloseButton:function(){var K=new B.Button({label:"X",callback:B.bind(function(L){this.hide();},this),type:"close"});K.render();this.header(K.get("boundingBox"),"after");return this;},purge:function(){this.header(null);this.body(null);this.footer(null);},alert:function(N,M,P){this.set(A,"alert");this.addCallback(D.CANCEL,P||C);var O=M||this._getDefaultTitle(),K=N||null,L=new B.Button({label:E.OK,callback:B.bind(function(Q){this.hide();},this),"default":true});this.build(O,K,[L]).addCloseButton().show();},confirm:function(Q,P,O,L){this.set(A,"confirm");this.addCallback(D.OK,O||C);this.addCallback(D.CANCEL,L||C);var R=P||this._getDefaultTitle(),K=Q||null,M=new B.Button({label:E.OK,callback:B.bind(function(S){this.hide(D.OK);},this),"default":true}),N=new B.Button({label:E.CANCEL,callback:B.bind(function(S){this.hide();},this)});this.build(R,K,[M,N]).addCloseButton().show();},prompt:function(K,Q,N,S){this.set(A,"prompt");this.addCallback(D.OK,N||C);this.addCallback(D.CANCEL,S||C);var L=Q||this._getDefaultTitle(),M=K||null,R,O=new B.Button({label:E.OK,callback:B.bind(function(T){this.hide(D.OK);},this),"default":true}),P=new B.Button({label:E.CANCEL,callback:B.bind(function(T){this.hide();},this)});this.build(L,M,[O,P]);R=B.Node.create('<input type="text" style="display: block; margin-top: 0.5em;">');if(B.UA.ie<8){R.setStyle("width","300px");}else{R.setStyle("width","100%");}R.on("keyup",B.bind(function(T){this.set(F,R.get("value"));},this));this.handleEnter=B.once("enter",B.bind(function(U){var T=this.get(H);if(T){T.fire("press");}},this),R);this.body(R,"after");this.addCloseButton().show();},_getDefaultTitle:function(){return"The page "+location.protocol+"//"+location.host+"/ says:";},_updateDraggable:function(K){var M=this.get("boundingBox"),L=M.all(".yui3-widget-hd");if(K){M.plug(B.Plugin.Drag,{handle:L}).dd.plug(B.Plugin.DDConstrained,{constrain2view:true,gutter:"20"});}else{M.unplug(B.Plugin.Drag).unplug(B.Plugin.DDContrained);}},_setContent:function(M,L,K){this.setStdModContent(M,L,this._standardizePlacement(K));},_standardizePlacement:function(K){var L=(I.isString(K))?K.toLowerCase():null;switch(L){case"prepend":case"before":return B.WidgetStdMod.BEFORE;case"append":case"after":return B.WidgetStdMod.AFTER;default:return B.WidgetStdMod.REPLACE;}}},{ATTRS:{callbacks:{value:{}},constrain:{value:true},defaultButton:{validator:function(K){return(K instanceof B.Button);}},draggable:{value:true,validator:I.isBoolean,setter:function(K){this._updateDraggable(K);return K;}},render:{value:true},returnVal:{value:null},type:{validator:I.isString,setter:function(K){this.get("boundingBox").replaceClass(this.getClassName(A,this.get(A)||"default"),this.getClassName(A,K||"default"));return K;}},visible:{value:false},zIndex:{value:20000}}});},"gallery-2010.09.08-19-45",{requires:["gallery-overlay-extras","gallery-button","overlay","widget-anim","node","gallery-event-nav-keys","dd"]});