YUI.add("gallery-dialog",function(a){var h=a.Lang,i="Cancel",k="OK",l="cancel",d="ok",c=function(){},j="callbacks",g="defaultButton",f="draggable",e="returnVal",b="icon";a.Dialog=a.Base.create("dialog",a.Overlay,[],{handleEnter:null,handleEscape:null,initializer:function(m){this.plug(a.Plugin.WidgetAnim);this.plug(a.Plugin.OverlayModal);this.plug(a.Plugin.OverlayKeepaligned);},hide:function(n){a.one("body").set("tabIndex",-1).focus();a.Dialog.superclass.hide.apply(this,arguments);var m=(n)?this.getCallback(n):this.getCallback(l);if(h.isFunction(m)){(a.bind(m,this,this.get(e)))();this.set(e,null);}this.anim.get("animHide").on("end",a.bind(function(){this.purge();},this));},show:function(){this.get(f);this.handleEscape=a.once("esc",a.bind(function(){this.hide();},this),a.config.doc);a.Dialog.superclass.show.apply(this,arguments);this.syncUI();var m=this.get(g);if(m){m.focus();}this.get("boundingBox").set("tabIndex",-1);},header:function(n,m){this._setContent(a.WidgetStdMod.HEADER,n,m);},body:function(n,m){this._setContent(a.WidgetStdMod.BODY,n,m);},footer:function(n,m){this._setContent(a.WidgetStdMod.FOOTER,n,m);},build:function(r,m,q){var p,n,o;this.purge();if(r){this.header(r);}if(m){this.body(m||null);}if(q){for(p=0,n=q.length;p<n;p++){o=q[p];o.render();if(o.get("default")){this.set(g,o);}this.footer(o.get("boundingBox"),"after");}}return this;},getCallback:function(m){return(this.get(j)[m]||null);},addCallback:function(n,m){if(h.isFunction(m)){this.get(j)[n]=m;}},removeCallback:function(m){if(this.get(j)[m]){this.get(j)[m]=null;}},addCloseButton:function(){var m=new a.Button({label:"X",callback:a.bind(function(n){this.hide();},this),title:"Close"});m.render();this.header(m.get("boundingBox"),"after");return this;},purge:function(){this.header(null);this.body(null);this.footer(null);},alert:function(p,o,r){this.set(b,"alert");this.addCallback(l,r||c);var q=o||this._getDefaultTitle(),m=p||null,n=new a.Button({label:k,callback:a.bind(function(s){this.hide();},this),"default":true});this.build(q,m,[n]).addCloseButton().show();},confirm:function(s,r,q,n){this.set(b,"confirm");this.addCallback(d,q||c);this.addCallback(l,n||c);var t=r||this._getDefaultTitle(),m=s||null,o=new a.Button({label:k,callback:a.bind(function(u){this.hide(d);},this),"default":true}),p=new a.Button({label:i,callback:a.bind(function(u){this.hide();},this)});this.build(t,m,[o,p]).addCloseButton().show();},prompt:function(m,s,p,u){this.set(b,"prompt");this.addCallback(d,p||c);this.addCallback(l,u||c);var n=s||this._getDefaultTitle(),o=m||null,t,q=new a.Button({label:k,callback:a.bind(function(v){this.hide(d);},this),"default":true}),r=new a.Button({label:i,callback:a.bind(function(v){this.hide();},this)});this.build(n,o,[q,r]);t=a.Node.create('<input type="text" style="display: block; margin-top: 0.5em;">');t.addClass(this.getClassName("prompt"));t.on("keyup",a.bind(function(v){this.set(e,t.get("value"));},this));this.handleEnter=a.once("enter",a.bind(function(w){var v=this.get(g);if(v){v.fire("press");}},this),t);this.body(t,"after");this.addCloseButton().show();},_getDefaultTitle:function(){return"The page "+location.protocol+"//"+location.host+"/ says:";},_updateDraggable:function(m){var o=this.get("boundingBox"),n=o.all(".yui3-widget-hd");if(m){o.plug(a.Plugin.Drag,{handle:n}).dd.plug(a.Plugin.DDConstrained,{constrain2view:true,gutter:"20"});}else{o.unplug(a.Plugin.Drag).unplug(a.Plugin.DDContrained);}},_setContent:function(o,n,m){this.setStdModContent(o,n,this._standardizePlacement(m));},_standardizePlacement:function(m){var n=(h.isString(m))?m.toLowerCase():null;switch(n){case"prepend":case"before":return a.WidgetStdMod.BEFORE;case"append":case"after":return a.WidgetStdMod.AFTER;default:return a.WidgetStdMod.REPLACE;}}},{ATTRS:{centered:{value:true},callbacks:{value:{}},constrain:{value:true},defaultButton:{validator:function(m){return(m instanceof a.Button);}},draggable:{value:true,validator:h.isBoolean,setter:function(m){this._updateDraggable(m);return m;}},render:{value:true},returnVal:{value:null},icon:{validator:h.isString,setter:function(m){this.get("boundingBox").replaceClass(this.getClassName(b,this.get(b)||"default"),this.getClassName(b,m||"default"));return m;}},visible:{value:false},zIndex:{value:20000}}});},"gallery-2011.03.11-23-49",{requires:["gallery-overlay-extras","gallery-button","overlay","widget-anim","node","gallery-event-nav-keys","dd-plugin"]});