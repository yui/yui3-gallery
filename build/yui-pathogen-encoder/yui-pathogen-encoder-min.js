YUI.add("yui-pathogen-encoder",function(e,t){function d(e){this.tree={weight:Number.MAX_VALUE,path:"/",children:{}},this.moduleDelimLen=e.moduleDelim&&e.moduleDelim.length||0,this.subgroupDelimLen=e.subgroupDelim&&e.subgroupDelim.length||0,this.groupDelimLen=e.groupDelim&&e.groupDelim.length||0}var n=e.Loader.prototype.resolve,r="p/",i=";",s="+",o=",",u=/-(min|debug).js/,a=/\.(?:js|css)$/,f=/^(?:yui:)?gallery-([^\/]+)/,l={js:!0,css:!0},c,h,p;e.Loader.prototype.buildCombo=function(e,t,n){var r=t,u=t.length+n.length,a,f,l,c,p,d,v,m;for(m=0,v=e.length;m<v;m+=1){d=e[m],a=r===t?"":i,f=d.key,c=d.modules;while(c.length){l=a+f,l=l?l+s:o,c.length===1&&f===c[0]&&(l=a),p=l+c[0];if(!(u+p.length<h))return r+n;r+=p,u+=p.length,c.shift(),a=f=""}}return r+=n,r.length===t.length+n.length&&(r=null),r},e.Loader.prototype.aggregateGroups=function(t){var n={},r,u,l,c,h,v,m,g,y;for(y=0,g=t.length;y<g;y+=1){v=t[y],h=v.name,c=this.groups&&this.groups[v.group];if(c){if(!c.combine||v.fullpath)continue}else if(!this.combine)continue;if(!v.combine&&v.ext)continue;if(!v.group)m="c"+s+YUI.version;else if(v.group==="gallery")p||(r=f.exec(this.groups.gallery.root),p=r&&r[1]),h=h.split("gallery-").pop(),m="g"+s+p;else if(v.path.indexOf(h+"/"+h)===0)m=c.root,m[0]==="/"&&(m=m.slice(1)),m[m.length-1]==="/"&&(m=m.slice(0,-1)),m="s"+s+m;else{h=v.path.split(a).shift(),c&&c.root&&(h=c.root+h),h[0]==="/"&&(h=h.slice(1));if(e.config.fullpathCompression){l=l||new d({moduleDelim:o,subgroupDelim:s,groupDelim:i}),l.add(h);continue}m=h}n[m]=n[m]||[],n[m].push(h),e.config.customComboFallback&&(v.group==="gallery"&&(h="gallery-"+h),this.pathogenSeen[h]=!0)}if(l){u=l.compress();for(y=0,g=u.length;y<g;y+=1)m=u[y].root,n[m]=n[m]||[],n[m].push(u[y].name);l.destroy(),l=null}return n},d.prototype={add:function(e){var t=this.tree,n=e.split("/"),r=[],i,s,o,u;while(n.length)u=n.shift(),o=t.children[u],r.push(u),i=n.join("/"),o?o.weight+=this.moduleDelimLen+i.length:(s=r.join("/"),o=t.children[u]={path:s,weight:0},i?(o.weight=s.length+this.subgroupDelimLen+i.length,o.children={}):o.weight=Number.MAX_VALUE),t=o},compress:function(){var e=[],t=[],n,r,i,s,o,u,a,f;for(a in this.tree.children)this.tree.children.hasOwnProperty(a)&&e.push(this.tree.children[a]);while(e.length){s=0,n=[],u=e.pop();for(a in u.children)u.children.hasOwnProperty(a)&&(o=u.children[a],s+=o.weight,n.push(o));s+=n.length-1;if(u.weight<=s){r=new RegExp("^"+u.path+"/"),i=this.getLeafNodes(u);for(f=0;f<i.length;f+=1)t.push({name:i[f].path.replace(r,""),root:u.path})}else e=e.concat(n)}return t},getLeafNodes:function(e){var t=[],n;if(!e.children)return t.push(e),t;for(n in e.children)e.children.hasOwnProperty(n)&&(t=t.concat(this.getLeafNodes(e.children[n])));return t},destroy:function(){this.tree=null},stringify:function(e){return JSON&&JSON.stringify(e,null,4)}},e.Loader.prototype.sortAggregatedGroups=function(e){var t=[],n,r,i;for(n in e)e.hasOwnProperty(n)&&t.push({key:n,modules:e[n]});t.sort(function(e,t){return e.key>t.key});for(i=0,r=t.length;i<r;i+=1)t[i].modules.sort();return t},e.Loader.prototype.customResolve=function(t,n){var r=this.aggregateGroups(t),i=this.sortAggregatedGroups(r),s=[],o,a,f,l;a||(f=u.exec(e.config.loaderPath),a=f&&f[1]||"raw",a=n==="css"&&a==="debug"?"raw":"min",o=a==="min"?"":"."+a,o=o+"."+n),l=this.buildCombo(i,c,o);while(l)s.push(l),l=this.buildCombo(i,c,o);return s},e.Loader.prototype.shouldFallback=function(e){var t,n,r,i,s;if(this.fallbackMode)return this.fallbackMode;for(r in l)if(l.hasOwnProperty(r)){t=e[r+"Mods"];for(s=0,i=t.length;s<i;s+=1){n=t[s].name;if(this.pathogenSeen[n])return this.fallbackMode=!0,this.fallbackMode}}},e.Loader.prototype.resolve=function(){var t=n.apply(this,arguments),i=this.combine,s,o,u,a,f,p,d,v,m,g,y;if(!i)for(d in this.groups)if(this.groups.hasOwnProperty(d)&&!i&&d.combine){i=d.combine;break}!c&&e.config.customComboBase&&(c=e.config.customComboBase.replace(/\/+$/,""),c+="/"+r);if(e.config.customComboFallback){this.pathogenSeen=this.pathogenSeen||{};if(this.shouldFallback(t))return t}if(c&&i){h=this.maxURLLength;for(v in l){if(!l.hasOwnProperty(v))continue;a=[],f=v,p=v+"Mods",t[f]=s=t[f]||[],t[p]=o=t[p]||[];for(y=0,g=s.length;y<g;y+=1)m=s[y],(typeof m=="object"||typeof m=="string"&&m.indexOf("/combo?")===-1)&&a.push(m);u=this.customResolve(o,v),s.length&&window.JSON,t[v]=[].concat(u,a)}}return t}},"gallery-2014.05.29-15-46",{requires:["loader-base"]});
