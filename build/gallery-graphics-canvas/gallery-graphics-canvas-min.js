YUI.add("gallery-graphics-canvas",function(e){function d(f){this.initializer.apply(this,arguments);}d.prototype={autoSize:true,initializer:function(g){g=g||{};var f=g.width||0,i=g.height||0;this.node=e.config.doc.createElement("div");this.setSize(f,i);if(g.render){this.render(g.render);}},setSize:function(f,g){if(this.autoSize){if(f>this.node.getAttribute("width")){this.node.style.width=f+"px";this.node.setAttribute("width",f);}if(g>this.node.getAttribute("height")){this.node.style.height=g+"px";this.node.setAttribute("height",g);}}},_trackSize:function(f,g){if(f>this._width){this._width=f;}if(g>this._height){this._height=g;}this.setSize(f,g);},setPosition:function(f,g){this.node.style.left=f+"px";this.node.style.top=g+"px";},render:function(j){var k=this.node,f=e.one(j),g=f.get("width")||f.get("offsetWidth"),i=f.get("height")||f.get("offsetHeight");k.style.display="block";k.style.position="absolute";k.style.left=e.one(k).getStyle("left");k.style.top=e.one(k).getStyle("top");k.style.pointerEvents="visiblePainted";f=f||e.config.doc.body;f.appendChild(this.node);this.setSize(g,i);return this;},toggleVisible:function(f){this.node.style.visibility=f?"visible":"hidden";},addShape:function(f){var g=f.get("node");this.node.appendChild(g);if(!this._graphicsList){this._graphicsList=[];}this._graphicsList.push(g);},destroy:function(){this._removeChildren(this.node);if(this.node&&this.node.parentNode){this.node.parentNode.removeChild(this.node);}},_removeChildren:function(f){if(f.hasChildNodes()){var g;while(f.firstChild){g=f.firstChild;this._removeChildren(g);f.removeChild(g);}}}};e.Graphic=d;var b;function c(){if(!b){b=e.config.doc.createElement("div");}b.style.height=0;b.style.width=0;b.style.overflow="hidden";e.config.doc.documentElement.appendChild(b);return b;}function a(){}a.prototype={_reHex:/^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i,_2RGBA:function(g,f){f=(f!==undefined)?f:1;if(this._reHex.exec(g)){g="rgba("+[parseInt(RegExp.$1,16),parseInt(RegExp.$2,16),parseInt(RegExp.$3,16)].join(",")+","+f+")";}return g;},_2RGB:function(g){var f=c();f.style.background=g;return f.style.backgroundColor;},setSize:function(f,g){if(this.get("autoSize")){if(f>this.node.getAttribute("width")){this.node.style.width=f+"px";this.node.setAttribute("width",f);}if(g>this.node.getAttribute("height")){this.node.style.height=g+"px";this.node.setAttribute("height",g);}}},_updatePosition:function(f,g){this._updateCoords(f,g);if(f<=this._left){this._left=f;}else{if(f>=this._right){this._right=f;}}if(g<=this._top){this._top=g;}else{if(g>=this._bottom){this._bottom=g;}}this._width=this._right-this._left;this._height=this._bottom-this._top;},_updateCoords:function(f,g){this._xcoords.push(f);this._ycoords.push(g);},_clearAndUpdateCoords:function(){var f=this._xcoords.pop()||0,g=this._ycoords.pop()||0;this._updateCoords(f,g);},_updateNodePosition:function(){var g=this.get("node"),f=this.get("x"),h=this.get("y");g.style.position="absolute";g.style.left=(f+this._left)+"px";g.style.top=(h+this._top)+"px";},_methods:null,_properties:null,_updateDrawingQueue:function(f){if(!this._methods){this._methods=[];}this._methods.push(f);},lineTo:function(l,k,h){var g=arguments,j,f;if(!this._lineToMethods){this._lineToMethods=[];}if(typeof l==="string"||typeof l==="number"){g=[[l,k]];}for(j=0,f=g.length;j<f;++j){this._updateDrawingQueue(["lineTo",g[j][0],g[j][1]]);this._lineToMethods[this._lineToMethods.length]=this._methods[this._methods.length-1];this._updateShapeProps.apply(this,g[j]);this._updatePosition(g[j][0],g[j][1]);}this._drawingComplete=false;return this;},moveTo:function(f,g){this._updateDrawingQueue(["moveTo",f,g]);this._updateShapeProps(f,g);this._updatePosition(f,g);this._drawingComplete=false;return this;},curveTo:function(i,g,n,m,l,k){var j,h,f,o;this._updateDrawingQueue(["bezierCurveTo",i,g,n,m,l,k]);this._drawingComplete=false;this._updateShapeProps(l,k);j=Math.max(l,Math.max(i,n));h=Math.max(k,Math.max(g,m));f=Math.min(l,Math.min(i,n));o=Math.min(k,Math.min(g,m));this._updatePosition(j,h);this._updatePosition(f,o);return this;},quadraticCurveTo:function(j,i,f,m){var h,g,l,k;this._updateDrawingQueue(["quadraticCurveTo",j,i,f,m]);this._drawingComplete=false;this._updateShapeProps(f,m);h=Math.max(f,j);g=Math.max(m,i);l=Math.min(f,j);k=Math.min(m,i);this._updatePosition(h,g);this._updatePosition(l,k);return this;},drawCircle:function(g,k,f){var i=0,h=2*Math.PI,j=f*2;this._shape={x:g,y:k,w:j,h:j};this._drawingComplete=false;this._updatePosition(g+j,k+j);this._updateDrawingQueue(["arc",g+f,k+f,f,i,h,false]);return this;},drawEllipse:function(s,q,t,B){this._shape={x:s,y:q,w:t,h:B};if(this._stroke&&this._strokeWeight>0){t-=this._strokeWeight*2;B-=this._strokeWeight*2;s+=this._strokeWeight;q+=this._strokeWeight;}var v=8,n=-(45/180)*Math.PI,D=0,m,j=t/2,k=B/2,z=0,p=s+j,o=q+k,u,r,C,A,g,f;u=p+Math.cos(0)*j;r=o+Math.sin(0)*k;this.moveTo(u,r);for(;z<v;z++){D+=n;m=D-(n/2);C=p+Math.cos(D)*j;A=o+Math.sin(D)*k;g=p+Math.cos(m)*(j/Math.cos(n/2));f=o+Math.sin(m)*(k/Math.cos(n/2));this.quadraticCurveTo(g,f,C,A);}this._trackPos(s,q);this._trackSize(s+t,q+B);return this;},drawRect:function(f,j,g,i){this._shape={x:f,y:j,w:g,h:i};this._drawingComplete=false;this.moveTo(f,j);this.lineTo(f+g,j);this.lineTo(f+g,j+i);this.lineTo(f,j+i);this.lineTo(f,j);return this;},drawRoundRect:function(f,l,g,j,i,k){this._shape={x:f,y:l,w:g,h:j};this._drawingComplete=false;this._updateDrawingQueue(["moveTo",f,l+k]);this._updateDrawingQueue(["lineTo",f,l+j-k]);this._updateDrawingQueue(["quadraticCurveTo",f,l+j,f+i,l+j]);this._updateDrawingQueue(["lineTo",f+g-i,l+j]);this._updateDrawingQueue(["quadraticCurveTo",f+g,l+j,f+g,l+j-k]);this._updateDrawingQueue(["lineTo",f+g,l+k]);this._updateDrawingQueue(["quadraticCurveTo",f+g,l,f+g-i,l]);this._updateDrawingQueue(["lineTo",f+i,l]);this._updateDrawingQueue(["quadraticCurveTo",f,l,f,l+k]);this._trackPos(f,l);this._trackSize(g,j);this._paint();return this;},drawWedge:function(j){var q=j.x,o=j.y,u=j.startAngle,n=j.arc,h=j.radius,k=j.yRadius,t,s,m,A,l,r,p,z,w,g,f,v=0;
this._drawingComplete=false;this._updateRenderQueue(["moveTo",q,o]);k=k||h;if(Math.abs(n)>360){n=360;}t=Math.ceil(Math.abs(n)/45);s=n/t;m=-(s/180)*Math.PI;A=-(u/180)*Math.PI;if(t>0){r=q+Math.cos(u/180*Math.PI)*h;p=o+Math.sin(-u/180*Math.PI)*k;this.lineTo(r,p);for(;v<t;++v){A+=m;l=A-(m/2);z=q+Math.cos(A)*h;w=o+Math.sin(A)*k;g=q+Math.cos(l)*(h/Math.cos(m/2));f=o+Math.sin(l)*(k/Math.cos(m/2));this._updateRenderQueue(["quadraticCurveTo",g,f,z,w]);}this._updateRenderQueue(["lineTo",q,o]);}this._trackPos(q,o);this._trackSize(h,h);this._paint();},end:function(){this._paint();return this;},_initProps:function(){var f=this._context;this._methods=[];this._lineToMethods=[];this._xcoords=[0];this._ycoords=[0];this._width=0;this._height=0;this._left=0;this._top=0;this._right=0;this._bottom=0;this._x=0;this._y=0;},_drawingComplete:false,_createGraphic:function(f){var g=e.config.doc.createElement("canvas");return g;},_trackSize:function(f,g){if(f>this._width){this._width=f;}if(g>this._height){this._height=g;}},_trackPos:function(f,g){if(f>this._x){this._x=f;}if(g>this._y){this._y=g;}},_updateShapeProps:function(f,j){var g,i;if(!this._shape){this._shape={};}if(!this._shape.x){this._shape.x=f;}else{this._shape.x=Math.min(this._shape.x,f);}if(!this._shape.y){this._shape.y=j;}else{this._shape.y=Math.min(this._shape.y,j);}g=Math.abs(f-this._shape.x);if(!this._shape.w){this._shape.w=g;}else{this._shape.w=Math.max(g,this._shape.w);}i=Math.abs(j-this._shape.y);if(!this._shape.h){this._shape.h=i;}else{this._shape.h=Math.max(i,this._shape.h);}}};e.Drawing=a;e.Shape=e.Base.create("shape",e.Base,[e.Drawing],{_left:0,_right:0,_top:0,_bottom:0,initializer:function(){this._xcoords=[0];this._ycoords=[0];this.get("stroke");this.get("fill");this._addListeners();var f=this.get("node");f.setAttribute("width",this.get("width"));f.setAttribute("height",this.get("height"));this._draw();},_getNode:function(){var f=e.config.doc.createElement("canvas");this._context=f.getContext("2d");return f;},_addListeners:function(){this.after("strokeChange",this._updateHandler);this.after("fillChange",this._updateHandler);this.after("widthChange",this._updateHandler);this.after("heightChange",this._updateHandler);},_setStrokeProps:function(l){var g=l.color,j=l.weight,k=l.alpha,i=l.linejoin||"round",h=l.linecap||"butt",f=l.dashstyle;this._miterlimit=null;this._dashstyle=(f&&e.Lang.isArray(f)&&f.length>1)?f:null;this._strokeWeight=j;if(j){this._stroke=1;}else{this._stroke=0;}if(k){this._strokeStyle=this._2RGBA(g,k);}else{this._strokeStyle=g;}this._linecap=h;if(i=="round"||i=="square"){this._linejoin=i;}else{i=parseInt(i,10);if(e.Lang.isNumber(i)){this._miterlimit=Math.max(i,1);this._linejoin="miter";}}},_setFillProps:function(h){var f=h.color,g=h.alpha;if(f){if(g){f=this._2RGBA(f,g);}else{f=this._2RGB(f);}this._fillColor=f;this._fillType="solid";}else{this._fillColor=null;}},translate:function(f,i){var g=this.get("node"),h="translate("+f+"px, "+i+"px)";this._updateTransform("translate",/translate\(.*\)/,h);},skewX:function(f){},skewY:function(f){},rotate:function(g,h){var f="rotate("+g+"deg)";this._updateTransform("rotate",/rotate\(.*\)/,f);},scale:function(f){},matrix:function(h,g,l,k,j,i){},_updateTransform:function(g,j,i){var h=this.get("node"),f=h.style.MozTransform||h.style.webkitTransform||h.style.msTransform||h.style.OTransform;if(f&&f.length>0){if(f.indexOf(g)>-1){f=f.replace(j,i);}else{f+=" "+i;}}else{f=i;}h.style.MozTransform=f;h.style.webkitTransform=f;h.style.msTransform=f;h.style.OTransform=f;},_updateHandler:function(f){this._draw();},_draw:function(){this._paint();},_paint:function(){if(!this._methods){return;}var n=this.get("node"),v=this.get("width")||this._width,r=this.get("height")||this._height,k=this._context,o=[],l=this._methods.concat(),q=0,p,g,t,s=0,x=this._right,m=this._left,u=this._top,f=this._bottom;if(this._methods){s=l.length;if(!s||s<1){return;}for(;q<s;++q){o[q]=l[q].concat();t=o[q];for(p=1;p<t.length;++p){if(p%2===0){t[p]=t[p]-this._top;}else{t[p]=t[p]-this._left;}}}n.setAttribute("width",v);n.setAttribute("height",r);k.beginPath();for(q=0;q<s;++q){t=o[q];if(t&&t.length>0){g=t.shift();if(g){if(g&&g=="lineTo"&&this._dashstyle){t.unshift(this._xcoords[q]-this._left,this._ycoords[q]-this._top);this._drawDashedLine.apply(this,t);}else{k[g].apply(k,t);}}}}if(this._fillType){k.fillStyle=this._fillColor;k.closePath();}if(this._fillType){k.fill();}if(this._stroke){if(this._strokeWeight){k.lineWidth=this._strokeWeight;}k.lineCap=this._linecap;k.lineJoin=this._linejoin;if(this._miterlimit){k.miterLimit=this._miterlimit;}k.strokeStyle=this._strokeStyle;k.stroke();}this._drawingComplete=true;this._clearAndUpdateCoords();this._updateNodePosition();this._methods=l;}},_drawDashedLine:function(p,v,f,s){var g=this._context,t=this._dashstyle[0],r=this._dashstyle[1],j=t+r,m=f-p,q=s-v,u=Math.sqrt(Math.pow(m,2)+Math.pow(q,2)),k=Math.floor(Math.abs(u/j)),h=Math.atan2(q,m),o=p,n=v,l;m=Math.cos(h)*j;q=Math.sin(h)*j;for(l=0;l<k;++l){g.moveTo(o,n);g.lineTo(o+Math.cos(h)*t,n+Math.sin(h)*t);o+=m;n+=q;}g.moveTo(o,n);u=Math.sqrt((f-o)*(f-o)+(s-n)*(s-n));if(u>t){g.lineTo(o+Math.cos(h)*t,n+Math.sin(h)*t);}else{if(u>0){g.lineTo(o+Math.cos(h)*u,n+Math.sin(h)*u);}}g.moveTo(f,s);},clear:function(){var f=this.get("width"),g=this.get("height");this._initProps();this._context.clearRect(0,0,f,g);return this;}},{ATTRS:{node:{readOnly:true,valueFn:"_getNode"},width:{},height:{},x:{value:0,setter:function(g){var f=this.get("node");f.style.left=(g+this._left)+"px";return g;}},y:{value:0,setter:function(g){var f=this.get("node");f.style.top=(g+this._top)+"px";return g;}},visible:{value:true,setter:function(g){var f=g?"visible":"hidden";this.get("node").style.visibility=f;return g;}},fill:{setter:function(g){var f=this.get("fill")||this._getAttrCfg("fill").defaultValue;g=(g)?e.merge(f,g):null;this._setFillProps(g);return g;}},stroke:{valueFn:function(){return{weight:1,dashstyle:null,color:"#000",alpha:1};},setter:function(g){var f=this.get("stroke")||this._getAttrCfg("stroke").defaultValue;
g=(g)?e.merge(f,g):null;this._setStrokeProps(g);return g;}},autoSize:{value:false},pointerEvents:{value:"visiblePainted"}}});e.Path=e.Base.create("path",e.Shape,[],{_type:"path",_addListeners:function(){},_draw:function(){this._paint();},end:function(){this._draw();}},{ATTRS:{width:{getter:function(){return this._width;},setter:function(f){this._width=f;return f;}},height:{getter:function(){return this._height;},setter:function(f){this._height=f;return f;}},path:{getter:function(){return this._path;},setter:function(f){this._path=f;return f;}}}});e.Rect=e.Base.create("rect",e.Shape,[],{_type:"rect",_draw:function(){var f=this.get("x"),l=this.get("y"),g=this.get("width"),i=this.get("height"),k=this.get("fill"),j=this.get("stroke");this.drawRect(f,l,g,i);this._paint();}});e.Ellipse=e.Base.create("ellipse",e.Shape,[],{_type:"ellipse",_draw:function(){var f=this.get("width"),g=this.get("height"),j=this.get("fill"),i=this.get("stroke");this.drawEllipse(0,0,f,g);this._paint();}});e.Circle=e.Base.create("circle",e.Base,[e.Shape],{_type:"circle",_draw:function(){var f=this.get("radius"),h=this.get("fill"),g=this.get("stroke");if(f){this.drawCircle(0,0,f);this._paint();}},_addListeners:function(){this.after("radiusChange",this._updateHandler);e.Shape.prototype._addListeners.apply(this,arguments);}},{ATTRS:{width:{readOnly:true,getter:function(){return this.get("radius")*2;}},height:{readOnly:true,getter:function(){return this.get("radius")*2;}},radius:{lazyAdd:false,setter:function(h){var f=this.get("node"),g=h*2;f.setAttribute("width",g);f.setAttribute("height",g);return h;}}}});},"@VERSION@",{requires:["graphics"],skinnable:false});