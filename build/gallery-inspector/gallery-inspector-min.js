YUI.add("gallery-inspector",function(f){var ac=f.Lang,y=f.Node,h=f.Widget,S=f.Array,w=f.Object,V="boundingBox",b="checked",r="collapsed",B="contentBox",c="display",m="",J="exclude",j="filter",F="height",C="include",v="host",I="hostAttrs",H="name",L="none",O="offsetHeight",D="paused",a="strings",G="textContent",U="value",e="array",d="boolean",Q="date",z="error",E="function",i="null",x="number",k="object",W="regexp",N="string",l="undefined",p="default",t="node",o="_CLASS_COLLAPSED",Z="_CLASS_EVEN",M="_CLASS_FILTER",ab="_CLASS_NAME_CELL",u="_CLASS_ODD",A="_CLASS_VALUE",P="_CLASS_VALUE_CELL",T="_SELECTOR_COLLAPSE",g="_SELECTOR_FILTER",K="_SELECTOR_NAME_CELL",q="_SELECTOR_PAUSE",n="_SELECTOR_VALUE_CELL",s=0,R=h.UI_SRC,aa=f.substitute,X=f.Base.create("inspector",h,[f.WidgetStack],{initializer:function(Y){s+=1;this._events=[];this._hostEvents=[];this._attrNodes={};this[o]=this.getClassName(r);this[Z]=this.getClassName("even");this[M]=this.getClassName(j);this[ab]=this.getClassName("name-cell");this[u]=this.getClassName("odd");this[A]=this.getClassName(U);this[P]=this.getClassName("value-cell");this[T]="."+this.getClassName("collapse");this[g]="."+this[M];this[K]="."+this[ab];this[q]="."+this.getClassName("pause");this[n]="."+this[P];},destructor:function(){s-=1;this._purgeEvents(this._events.concat(this._hostEvents));if(this._dd){this._dd.destroy();}},renderUI:function(){this._renderHead();this._renderBody();this._renderFoot();},bindUI:function(){var Y=this.get(B),ad=Y.one(this[g]);this._events.concat([this.get(v).after("destroyedChange",this._afterHostDestroyedChange,this),Y.one(this[T]).on("click",this._onCollapseClick,this),Y.one(this[q]).on("click",this._onPauseClick,this),ad.on("valueChange",this._onFilter,this),ad.on("key",this._onFilterEscapeKey,"up:27",this),this.after({collapsedChange:this._afterCollapsedChange,draggableChange:this._afterDraggableChange,hostAttrsChange:this._afterHostAttrsChange,excludeChange:this._afterExcludeChange,filterChange:this._afterFilterChange,includeChange:this._afterIncludeChange,pausedChange:this._afterPausedChange})]);},syncUI:function(){this._uiSetCollapsed(this.get(r));this._uiSetDraggable(this.get("draggable"));this._uiSetFilter(this.get(j));this._uiSetPaused(this.get(D));this._uiSetPosition();this._syncAttrs();},_bindHostValueChangeEvents:function(){var Y=this.get(I),ae=this.get(v),ad=[];S.each(Y,function(af){ad.push(ae.after(af+"Change",f.bind(this._afterHostAttrValueChange,this,af)));},this);this._hostEvents=ad;},_formatValue:function(af){var Y=f.Escape.html,ae=ac.type(af),ad;switch(ae){case k:if(af instanceof y){ae=t;af=Y(af.toString().split(" ")[0]);}else{if(af instanceof Boolean){ae=d;af=af.toString();}else{if(af instanceof Number){ae=x;af=af.toString();}else{if(af instanceof String){ae=N;af='"'+Y(af.toString())+'"';}else{af="[object]";}}}}break;case e:af="[array]";break;case E:af="[function]";break;case d:af=af.toString();break;case N:af='"'+Y(af.toString())+'"';break;case x:af=Y(af.toString());break;case i:case l:af=ae;break;case z:case W:af=Y(af.toString());break;case Q:ae=Q;af=Y(af.toString());break;default:ae=p;af=Y(af.toString());}ad={inspector_value_class:this[A],inspector_type_class:this.getClassName("type-"+ae),str_value:af};return aa(X.VALUE_TEMPLATE,ad);},_purgeEvents:function(Y){while(Y&&Y.length){Y.pop().detach();}},_renderAttr:function(ae,ag){var ad=f.guid(),ai=ag%2===0?this[Z]:this[u],af={inspector_row_parity_class:ai,inspector_name_cell_class:this[ab],inspector_value_cell_class:this[P],str_name:ae,id_guid:ad},ah=y.create(aa(X.ATTR_TEMPLATE,af)),Y=this._tbody;Y.append(ah);this._attrNodes[ae]=Y.one("#"+ad);},_renderAttrs:function(){var Y=this.get(I).sort();this._tbody.empty(true);S.each(Y,this._renderAttr,this);},_renderBody:function(){var ae=this.get(B),ad=this.get(a),af={str_name:ad.name,str_value:ad.value,inspector_bd_class:this.getClassName("bd")},Y=y.create(aa(X.BODY_TEMPLATE,af));this._body=Y;this._tbody=Y.one("tbody");ae.append(Y);},_renderFoot:function(){var ad=this.get(B),Y=this.get(a),ae={str_filter:Y.filter_attrs,str_pause:Y.pause,inspector_checkbox_class:this.getClassName("checkbox"),inspector_controls_class:this.getClassName("controls"),inspector_ft_class:this.getClassName("ft"),inspector_pause_class:this.getClassName("pause"),inspector_pause_label_class:this.getClassName("pause-label"),inspector_searchbox_class:this[M]};this._foot=y.create(aa(X.FOOTER_TEMPLATE,ae));ad.append(this._foot);},_renderHead:function(){var ad=this.get(B),Y=this.get(a),ae={str_collapse:Y.collapse,str_name:this.get(H),str_title:Y.title,inspector_button_class:this.getClassName("button"),inspector_collapse_class:this.getClassName("collapse"),inspector_hd_class:this.getClassName("hd"),inspector_name_class:this.getClassName(H),inspector_title_class:this.getClassName("title")};this._head=y.create(aa(X.HEADER_TEMPLATE,ae));ad.append(this._head);},_syncAttrs:function(){var af=this.get(v),ae=af.getAttrs(),ad=this.get(J),Y=this.get(C);w.each(ae,function(ah,ag){if(Y.length&&Y.indexOf(ag)===-1){delete ae[ag];}else{if(ad.length&&ad.indexOf(ag)!==-1){delete ae[ag];}}});this._set(I,w.keys(ae));},_uiFilterAttrs:function(ag){var ad=this[K],af=[],ae=[],Y;w.each(this._attrNodes,function(ah){if(ag){Y=ah.one(ad);if(Y.get(G).indexOf(ag)!==-1){ae.push(ah);}else{af.push(ah);}}else{ae.push(ah);}});f.all(af).setStyle(c,L);f.all(ae).setStyle(c,m);},_uiSetHostDestroyed:function(){var Y=this._head.one("."+this.getClassName(H));if(Y){Y.addClass(this.getClassName("destroyed"));}},_uiSetAttrValue:function(ad,af){var ae=this._attrNodes[ad],Y=ae.one(this[n]);Y.setContent(this._formatValue(af));},_uiSetAttrValues:function(){var ad=this.get(v),Y=this.get(I);S.each(Y,function(ae){this._uiSetAttrValue(ae,ad.get(ae));},this);},_uiSetHeight:function(Y){X.superclass._uiSetHeight.apply(this,arguments);if(this._head&&this._foot){Y=this.get(V).get(O)-this._head.get(O)-this._foot.get(O);this._body.setStyle(F,Y-2+"px");}},_uiSetCollapsed:function(ag){var ad=this.get(V),ae=this._head.one(this[T]),af,Y,ah;
if(ag){af=this.get(a+".expand");Y=this._head.get(O);ah="addClass";}else{af=this.get(a+".collapse");Y=this.get(F);ah="removeClass";}ad[ah](this[o]);ae.setContent(af);this._uiSetHeight(Y);},_uiSetDraggable:function(Y){if(this._dd){this._dd.set("lock",!Y);}else{if(Y){this._dd=new f.DD.Drag({node:this.get(V),handles:["."+this.getClassName("hd")]}).plug(f.Plugin.DDConstrained);}}},_uiSetFilter:function(ad){var Y=this._foot.one(this[g]);if(Y){Y.set(U,ad);}},_uiSetPaused:function(Y){var ad=this._foot.one(this[q]);if(ad){ad.set(b,Y);}},_uiSetPosition:function(){var Y=this.get(V),ad=s-1,ae=this._head.get(O);Y.setStyle("top",(ad*ae)+"px");this.set("zIndex",this.get("zIndex")+ad);},_uiSyncAttrs:function(){this._purgeEvents(this._hostEvents);this._renderAttrs();this._uiSetAttrValues();this._uiFilterAttrs(this.get(j));this._bindHostValueChangeEvents();},_afterHostAttrValueChange:function(Y,ad){if(!this.get(D)){this._uiSetAttrValue(Y,ad.newVal);}},_afterHostDestroyedChange:function(Y){if(Y.newVal){this._uiSetHostDestroyed();}},_afterCollapsedChange:function(Y){this._uiSetCollapsed(Y.newVal);},_afterDraggableChange:function(Y){this._uiSetDraggable(Y.newVal);},_afterExcludeChange:function(Y){this._syncAttrs();},_afterFilterChange:function(ad){var Y=ad.newVal;if(ad.src!==R){this._uiSetFilter(Y);}this._uiFilterAttrs(Y);},_afterHostAttrsChange:function(Y){this._uiSyncAttrs();},_afterIncludeChange:function(Y){this._syncAttrs();},_afterPausedChange:function(ad){var Y=ad.newVal;if(ad.src!==R){this._uiSetPaused(Y);}if(!Y){this._syncAttrs();}},_onCollapseClick:function(Y){this.set(r,!this.get(r));},_onPauseClick:function(Y){this.set(D,Y.target.get(b),{src:R});},_onFilter:function(Y){this.set(j,Y.newVal);},_onFilterEscapeKey:function(Y){this.set(j,null);}},{ATTRS:{collapsed:{value:false,validator:ac.isBoolean},draggable:{value:true,validator:ac.isBoolean},exclude:{value:[],validator:ac.isArray},filter:{value:""},height:{value:"300px"},host:{value:null,writeOnce:"initOnly",validator:function(Y){return Y instanceof f.Base;}},hostAttrs:{value:{},readOnly:true},include:{value:[],validator:ac.isArray},name:{value:null,writeOnce:"initOnly",getter:function(ae){var ad,Y;if(ae){Y=ae;}else{ad=this.get(v);Y=ad.name?ad.name:"[No name]";}return Y;}},paused:{value:false,validator:ac.isBoolean},strings:{valueFn:function(){return{collapse:"Collapse",expand:"Expand",filter_attrs:"Filter attributes",name:"Name",pause:"Pause",title:"Inspector",value:"Value"};}},width:{value:"275px"}},CSS_PREFIX:f.ClassNameManager.getClassName("inspector"),BODY_TEMPLATE:'<div class="{inspector_bd_class}">'+"<table>"+"<thead>"+"<tr>"+'<th scope="col">{str_name}</th>'+'<th scope="col">{str_value}</th>'+"</tr>"+"</thead>"+"<tbody></tbody>"+"</table>"+"</div>",FOOTER_TEMPLATE:'<div class="{inspector_ft_class}">'+'<div class="{inspector_controls_class}">'+'<label class="{inspector_pause_label_class}">'+'<input type="checkbox" class="{inspector_checkbox_class} '+'{inspector_pause_class}" value="1">{str_pause}'+"</label>"+'<input type="search" class="{inspector_searchbox_class}"'+'placeholder="{str_filter}"/>'+"</div>"+"</div>",HEADER_TEMPLATE:'<div class="{inspector_hd_class}">'+'<h4 class="{inspector_title_class}">{str_title}: '+'<span class="{inspector_name_class}">{str_name}</span></h4>'+'<button type="button" class="'+'{inspector_button_class} {inspector_collapse_class}">{str_collapse}'+"</button>"+"</div>",ATTR_TEMPLATE:'<tr id="{id_guid}" class="{inspector_row_parity_class}">'+'<th class="{inspector_name_cell_class}" scope="row">{str_name}</th>'+'<td class="{inspector_value_cell_class}"></td>'+"</tr>",VALUE_TEMPLATE:'<span class="{inspector_value_class} {inspector_type_class}">'+"{str_value}"+"</span>"});f.Inspector=X;},"gallery-2011.05.12-13-26",{requires:["dd-constrain","escape","event-key","event-valuechange","substitute","widget","widget-stack"],skinnable:true});