YUI.add("gallery-datasource-manage-stale",function(f){var d="ignoreStaleResponses",e="cancelStaleRequests",b="data",a="host",c="_defRequestFn";f.namespace("Plugin").DataSourceManageStale=f.Base.create("datasource-manage-stale",f.Plugin.Base,[],{_lastId:null,_transactions:null,_doBeforeData:function(g){if(!this._transactions[g.tId]||(this.get(d)&&g.tId!=this._lastId)){g.halt();}},_doBeforeDefRequestFn:function(g){if(this.get(e)){f.Object.each(this._transactions,function(h,i){if(h.abort){h.abort();delete this._transactions[i];delete f.DataSource.Local.transactions[i];}},this);}},_doAfterDefRequestFn:function(g){if(this.get(d)){this._lastId=g.tId;}this._transactions[g.tId]=f.DataSource.Local.transactions[g.tId];},initializer:function(){this._transactions={};this.doBefore(b,this._doBeforeData,this);this.doBefore(c,this._doBeforeDefRequestFn,this);this.doAfter(c,this._doAfterDefRequestFn,this);}},{NS:"stale",ATTRS:{cancelStaleRequests:{value:false},ignoreStaleResponses:{value:false}}});},"gallery-2010.11.03-19-46",{requires:["datasource-local"]});