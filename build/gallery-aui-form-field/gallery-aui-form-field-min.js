YUI.add("gallery-aui-form-field",function(P){var G=P.Lang,J=P.ClassNameManager.getClassName,H="field",R=P.cached(function(X,Z){var Y=["field"];if(Z){Y.push(Z);}Y=Y.join("-");var A=[J(Y,X)];if(X=="password"){A.push(J(Y,"text"));}return A.join(" ");}),C=J(H),W=J(H,"content"),F=J(H,"input"),N=J(H,"hint"),E=J(H,"invalid"),D=J(H,"label"),B=J(H,"labels"),V=J(H,"labels","inline"),T={left:[B,"left"].join("-"),right:[B,"right"].join("-"),top:[B,"top"].join("-")},L=/left|right/,Q='<span class="'+C+'"></span>',U='<span class="'+W+'"></span>',K='<span class="'+N+'"></span>',O='<input autocomplete="off" class="{cssClass}" id="{id}" name="{name}" type="{type}" />',M='<label class="'+D+'"></label>',S={};var I=P.Component.create({NAME:H,ATTRS:{readOnly:{value:false},name:{value:"",getter:function(X){var A=this;return X||A.get("id");}},id:{getter:function(Y){var A=this;var X=this.get("node");if(X){Y=X.get("id");}if(!Y){Y=P.guid();}return Y;}},type:{value:"text",writeOnce:true},labelAlign:{value:""},labelNode:{valueFn:function(){var A=this;return P.Node.create(M);}},labelText:{valueFn:function(){var A=this;return A.get("labelNode").get("innerHTML");},setter:function(X){var A=this;A.get("labelNode").set("innerHTML",X);return X;}},node:{value:null,setter:function(X){var A=this;return P.one(X)||A._createFieldNode();}},fieldHint:{value:""},fieldHintNode:{value:null,setter:function(X){var A=this;return P.one(X)||A._createFieldHint();}},prevVal:{value:""},valid:{value:true,getter:function(Z){var A=this;var X=A.get("validator");var Y=A.get("disabled")||X(A.get("value"));return Y;}},dirty:{value:false,getter:function(Y){var A=this;if(A.get("disabled")){Y=false;}else{var X=String(A.get("value"));var Z=String(A.get("prevVal"));Y=(X!==Z);}return Y;}},size:{},validator:{valueFn:function(){var A=this;return A.fieldValidator;},validator:G.isFunction},value:{getter:"_getNodeValue",setter:"_setNodeValue",validator:"fieldValidator"}},HTML_PARSER:{labelNode:"label",node:"input, textarea, select"},BIND_UI_ATTRS:["id","readOnly","name","size","tabIndex","type","value"],getTypeClassName:R,getField:function(Z){var a=null;if(Z instanceof P.Field){a=Z;}else{if(Z&&(G.isString(Z)||Z instanceof P.Node||Z.nodeName)){var X=P.one(Z).get("id");a=S[X];if(!a){var Y=Z.ancestor(".aui-field");var A=Z.ancestor(".aui-field-content");a=new I({boundingBox:Y,contentBox:A,node:Z});}}else{if(G.isObject(Z)){a=new I(Z);}}}return a;},prototype:{BOUNDING_TEMPLATE:Q,CONTENT_TEMPLATE:U,FIELD_TEMPLATE:O,FIELD_TYPE:"text",initializer:function(){var A=this;var X=A.get("node").guid();S[X]=A;},renderUI:function(){var A=this;A._renderField();A._renderLabel();A._renderFieldHint();},bindUI:function(){var A=this;A.after("labelAlignChange",A._afterLabelAlignChange);A.after("fieldHintChange",A._afterFieldHintChange);},syncUI:function(){var A=this;A.set("prevVal",A.get("value"));},fieldValidator:function(X){var A=this;return true;},isValid:function(){var A=this;return A.get("valid");},isDirty:function(){var A=this;return A.get("dirty");},resetValue:function(){var A=this;A.set("value",A.get("prevVal"));A.clearInvalid();},markInvalid:function(X){var A=this;A.set("fieldHint",X);A.get("fieldHintNode").show();A.get("boundingBox").addClass(E);},clearInvalid:function(){var A=this;A.reset("fieldHint");if(!A.get("fieldHint")){A.get("fieldHintNode").hide();}A.get("boundingBox").removeClass(E);},validate:function(){var A=this;var X=A.get("valid");if(X){A.clearInvalid();}return X;},_afterFieldHintChange:function(X){var A=this;A._uiSetFieldHint(X.newVal,X.prevVal);},_afterLabelAlignChange:function(X){var A=this;A._uiSetLabelAlign(X.newVal,X.prevVal);},_createFieldHint:function(){var A=this;var X=P.Node.create(K);A.get("contentBox").append(X);return X;},_createFieldNode:function(){var A=this;var X=A.FIELD_TEMPLATE;A.FIELD_TEMPLATE=P.substitute(X,{cssClass:F,id:A.get("id"),name:A.get("name"),type:A.get("type")});return P.Node.create(A.FIELD_TEMPLATE);},_getNodeValue:function(){var A=this;return A.get("node").val();},_renderField:function(){var A=this;var a=A.get("node");a.val(A.get("value"));var Y=A.get("boundingBox");var X=A.get("contentBox");var Z=A.get("type");Y.addClass(R(Z));a.addClass(R(Z,"input"));if(!X.contains(a)){if(a.inDoc()){a.placeBefore(Y);X.appendChild(a);}else{X.appendChild(a);}}Y.removeAttribute("tabIndex");},_renderFieldHint:function(){var A=this;var X=A.get("fieldHint");if(X){A._uiSetFieldHint(X);}},_renderLabel:function(){var A=this;var a=A.get("labelText");if(a!==false){var Z=A.get("node");var b=Z.guid();a=A.get("labelText");var Y=A.get("labelNode");Y.addClass(J(A.name,"label"));Y.setAttribute("for",b);Y.set("innerHTML",a);A._uiSetLabelAlign(A.get("labelAlign"));var X=A.get("contentBox");X.prepend(Y);}},_setNodeValue:function(X){var A=this;A._uiSetValue(X);return X;},_uiSetFieldHint:function(X,Y){var A=this;A.get("fieldHintNode").set("innerHTML",X);},_uiSetId:function(X,Y){var A=this;A.get("node").set("id",X);},_uiSetLabelAlign:function(Y,a){var A=this;var X=A.get("boundingBox");X.replaceClass(T[a],T[Y]);var Z="removeClass";if(L.test(Y)){Z="addClass";}X[Z](V);},_uiSetName:function(X,Y){var A=this;A.get("node").setAttribute("name",X);},_uiSetReadOnly:function(X,Y){var A=this;A.get("node").setAttribute("readOnly",X);},_uiSetSize:function(X,Y){var A=this;A.get("node").setAttribute("size",X);},_uiSetTabIndex:function(X,Y){var A=this;A.get("node").setAttribute("tabIndex",X);},_uiSetValue:function(X,Y){var A=this;A.get("node").val(X);},_requireAddAttr:false}});P.Field=I;},"gallery-2010.08.18-17-12",{requires:["gallery-aui-base","gallery-aui-component","substitute"]});