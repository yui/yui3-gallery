YUI.add("gallery-yui-dualslider",function(f){var e="value",b="value2",a="thumbSeparation",c="thumbsFlipped";function d(){d.superclass.constructor.apply(this,arguments);}f.DualSlider=f.extend(d,f.Slider,{renderThumb2:function(){return this.renderThumb();},renderUI:function(){var g=this.get("contentBox");this.rail=this.renderRail();this._uiSetRailLength(this.get("length"));this.thumb=this.renderThumb();this.rail.appendChild(this.thumb);this.thumb2=this.renderThumb2();this.rail.appendChild(this.thumb2);g.appendChild(this.rail);g.addClass(this.getClassName(this.axis));},_incrMinor:function(g){this.set(g,(this.get(g)+this.get("minorStep")));},_decrMinor:function(g){this.set(g,(this.get(g)-this.get("minorStep")));},_incrMajor:function(g){this.set(g,(this.get(g)+this.get("majorStep")));},_decrMajor:function(g){this.set(g,(this.get(g)-this.get("majorStep")));},_setToMin:function(g){this.set(g,this.get("min"));},_setToMax:function(g){this.set(g,this.get("max"));},_onDirectionKey:function(i){i.preventDefault();var h=i.target;var g=(h===this.thumb?"value":"value2");if(this.get("disabled")===false){switch(i.charCode){case 38:this._incrMinor(g);break;case 40:this._decrMinor(g);break;case 36:this._setToMin(g);break;case 35:this._setToMax(g);break;case 33:this._incrMajor(g);break;case 34:this._decrMajor(g);break;}}},_onLeftRightKey:function(i){i.preventDefault();var h=i.target;var g=(h===this.thumb?"value":"value2");if(this.get("disabled")===false){switch(i.charCode){case 37:this._decrMinor(g);break;case 39:this._incrMinor(g);break;}}},_onLeftRightKeyMeta:function(i){i.preventDefault();var h=i.target;var g=(h===this.thumb?"value":"value2");if(this.get("disabled")===false){switch(i.charCode){case 37:this._setToMin(g);break;case 39:this._setToMax(g);break;}}},_bindThumbDD:function(){var g={constrain:this.rail};g["stick"+this.axis.toUpperCase()]=true;this._dd=new f.DD.Drag({node:this.thumb,bubble:false,on:{"drag:start":f.bind(this._onDragStart,this)},after:{"drag:drag":f.bind(this._afterDrag,this),"drag:end":f.bind(this._afterDragEnd,this)}});this._dd2=new f.DD.Drag({node:this.thumb2,bubble:false,on:{"drag:start":f.bind(this._onDragStart,this)},after:{"drag:drag":f.bind(this._afterDrag,this),"drag:end":f.bind(this._afterDragEnd,this)}});this._dd.plug(f.Plugin.DDConstrained,g);this._dd2.plug(f.Plugin.DDConstrained,g);},_bindValueLogic:function(){this.after({minChange:this._afterMinChange,maxChange:this._afterMaxChange,valueChange:this._afterValueChange,value2Change:this._afterValue2Change});},_afterValue2Change:function(g){if(!g.positioned){var h=this._valueToOffset(g.newVal);if(g.newVal<this.getValue()){this.set(c,true);}this._uiMoveThumb2(h);}},_defThumbMoveFn:function(p){var n,t;var h,i,o;var u=this.get(c);var g=null;var m;var l=false,r=false;switch(this.axis){case"x":h=this.rail.getX();i=this.thumb.getX();o=this.thumb2.getX();break;case"y":h=this.rail.getY();i=this.thumb.getY();o=this.thumb2.getY();break;}if(this.get(a)>=0){m=this.get(a);var q=this.get("max")-this.get("min"),s=parseInt(this.get("length")),k=parseInt(this.thumb.getStyle(this._key.dim));var j=Math.abs(m/q);if(j>this._factor){m=(s-k)*j;}else{if(this.get("tickCount")){m=(s-k)/this.get("tickCount");}else{m*=(s-k)/q;}}}else{m=0;}if(h+p.offset>=i-m&&h+p.offset<=i+m){l=true;}if(h+p.offset>=o-m&&h+p.offset<=o+m){r=true;}if(!u&&i>=o-m){g=-m;}else{if(u&&i<=o+m){g=m;}}if(g==null&&l){n=this.getValue();t=this._offsetToValue(p.offset);if(n!==t){this.set(e,t,{positioned:true});}}else{if(g==null&&r){n=this.getValue2();t=this._offsetToValue(p.offset);if(n!==t){this.set(b,t,{positioned:true});}}else{if(p.ddEvent){switch(p.ddEvent.target){case this._dd:if(g!==null){switch(this.axis){case"x":this.thumb.setX(o+g);break;case"y":this.thumb.setY(o+g);break;}p.halt();}break;case this._dd2:if(g!==null){g=Math.abs(g);switch(this.axis){case"x":this.thumb2.setX(i+g);break;case"y":this.thumb2.setY(i+g);break;}p.halt();}break;}}}}},getValue2:function(){return this.get(b);},setValue2:function(g){return this.set(b,g);},_setThumbSeparation:function(g){if(g<=0){return 0;}return g;},syncUI:function(){this._dd.con.resetCache();this._syncThumbPosition();this._syncThumbPosition2();},_syncThumbPosition2:function(){this._calculateFactor();var g=this._valueToOffset(this.get(b));this._uiMoveThumb2(g);},_uiMoveThumb2:function(g){if(this.thumb2){this.thumb2.setStyle(this._key.minEdge,g+"px");this.fire("thumbMove",{offset:g});}},_defRailMouseDownFn:function(n){n=n.ev;var g=this._resolveThumb(n),k=this._key.xyIndex,l=parseFloat(this.get("length"),10),j,h,m;if(g){j=g.get("dragNode");h=parseFloat(j.getStyle(this._key.dim),10);m=this._getThumbDestination(n,j);m=m[k]-this.rail.getXY()[k];m=Math.min(Math.max(m,0),(l-h));var o;if(this._dd==g){this._uiMoveThumb(m);o=this.thumb.one("img")||this.thumb;}else{this._uiMoveThumb2(m);o=this.thumb2.one("img")||this.thumb2;}n.target=o;g._handleMouseDownEvent(n);}},_resolveThumb:function(k){var g,j,l;switch(this.axis){case"x":g=k.clientX;j=this.thumb.getX();l=this.thumb2.getX();break;case"y":g=k.clientY;j=this.thumb.getY();l=this.thumb2.getY();break;}var i=Math.abs(g-j),h=Math.abs(g-l);if(i<h){return this._dd;}else{if(h<i){return this._dd2;}else{if(this.get(c)){if(g<l){return this._dd2;}else{return this._dd;}}else{if(g<j){return this._dd;}else{return this._dd2;}}}}}},{NAME:"DualSlider",ATTRS:{value2:{value:0,setter:"_setNewValue"},thumbSeparation:{value:0,setter:"_setThumbSeparation"},thumbsFlipped:{value:0}}});},"gallery-2012.04.18-20-14",{skinnable:true,requires:["slider"]});