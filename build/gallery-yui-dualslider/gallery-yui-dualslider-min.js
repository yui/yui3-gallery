YUI.add("gallery-yui-dualslider",function(a){YUI.add("gallery-yui-dualslider",function(g){var f="value",c="value2",b="thumbSeparation",d="thumbsFlipped";function e(){e.superclass.constructor.apply(this,arguments);}g.DualSlider=g.extend(e,g.rdSlider,{renderThumb2:function(){return this.renderThumb();},renderUI:function(){var h=this.get("contentBox");this.rail=this.renderRail();this._uiSetRailLength(this.get("length"));this.thumb=this.renderThumb();this.rail.appendChild(this.thumb);this.thumb2=this.renderThumb2();this.rail.appendChild(this.thumb2);h.appendChild(this.rail);h.addClass(this.getClassName(this.axis));},_bindThumbDD:function(){var h={constrain:this.rail};h["stick"+this.axis.toUpperCase()]=true;this._dd=new g.DD.Drag({node:this.thumb,bubble:false,on:{"drag:start":g.bind(this._onDragStart,this)},after:{"drag:drag":g.bind(this._afterDrag,this),"drag:end":g.bind(this._afterDragEnd,this)}});this._dd2=new g.DD.Drag({node:this.thumb2,bubble:false,on:{"drag:start":g.bind(this._onDragStart,this)},after:{"drag:drag":g.bind(this._afterDrag,this),"drag:end":g.bind(this._afterDragEnd,this)}});this._dd.plug(g.Plugin.DDConstrained,h);this._dd2.plug(g.Plugin.DDConstrained,h);},_bindValueLogic:function(){this.after({minChange:this._afterMinChange,maxChange:this._afterMaxChange,valueChange:this._afterValueChange,value2Change:this._afterValue2Change});},_afterValue2Change:function(h){if(!h.positioned){var i=this._valueToOffset(h.newVal);if(h.newVal<this.getValue()){this.set(d,true);}this._uiMoveThumb2(i);}},_defThumbMoveFn:function(q){var o,u;var i,j,p;var v=this.get(d);var h=null;var n;var m=false,s=false;switch(this.axis){case"x":i=this.rail.getX();j=this.thumb.getX();p=this.thumb2.getX();break;case"y":i=this.rail.getY();j=this.thumb.getY();p=this.thumb2.getY();break;}if(this.get(b)>=0){n=this.get(b);var r=this.get("max")-this.get("min"),t=parseInt(this.get("length")),l=parseInt(this.thumb.getStyle(this._key.dim));var k=n/r;if(k<0){k*=-1;}if(k>this._factor){n=(t-l)*k;}else{if(this.get("tickCount")){n=(t-l)/this.get("tickCount");}else{n*=(t-l)/r;}}}else{n=0;}if(i+q.offset>=j-n&&i+q.offset<=j+n){m=true;}if(i+q.offset>=p-n&&i+q.offset<=p+n){s=true;}if(!v&&j>=p-n){h=-n;}else{if(v&&j<=p+n){h=n;}}if(h==null&&m){o=this.getValue();u=this._offsetToValue(q.offset);if(o!==u){this.set(f,u,{positioned:true});}}else{if(h==null&&s){o=this.getValue2();u=this._offsetToValue(q.offset);if(o!==u){this.set(c,u,{positioned:true});}}else{if(q.ddEvent){switch(q.ddEvent.target){case this._dd:if(h!==null){switch(this.axis){case"x":this.thumb.setX(p+h);break;case"y":this.thumb.setY(p+h);break;}q.halt();}break;case this._dd2:if(h!==null){h*=-1;switch(this.axis){case"x":this.thumb2.setX(j+h);break;case"y":this.thumb2.setY(j+h);break;}q.halt();}break;}}}}},getValue2:function(){return this.get(c);},setValue2:function(h){return this.set(c,h);},_setThumbSeparation:function(h){if(h<=0){return 0;}return h;},syncUI:function(){this._dd.con.resetCache();this._syncThumbPosition();this._syncThumbPosition2();},_syncThumbPosition2:function(){this._calculateFactor();var h=this._valueToOffset(this.get(c));this._uiMoveThumb2(h);},_uiMoveThumb2:function(h){if(this.thumb2){this.thumb2.setStyle(this._key.minEdge,h+"px");this.fire("thumbMove",{offset:h});}},_defRailMouseDownFn:function(o){o=o.ev;var h=this._resolveThumb(o),l=this._key.xyIndex,m=parseFloat(this.get("length"),10),k,j,n;if(h){k=h.get("dragNode");j=parseFloat(k.getStyle(this._key.dim),10);n=this._getThumbDestination(o,k);n=n[l]-this.rail.getXY()[l];n=Math.min(Math.max(n,0),(m-j));var p;if(this._dd==h){this._uiMoveThumb(n);p=this.thumb.one("img")||this.thumb;}else{this._uiMoveThumb2(n);p=this.thumb2.one("img")||this.thumb2;}o.target=p;h._handleMouseDownEvent(o);}},_resolveThumb:function(l){var h,k,m;switch(this.axis){case"x":h=l.clientX;k=this.thumb.getX();m=this.thumb2.getX();break;case"y":h=l.clientY;k=this.thumb.getY();m=this.thumb2.getY();break;}var j=h-k,i=h-m;if(j<0){j*=-1;}if(i<0){i*=-1;}if(j<i){return this._dd;}else{if(i<j){return this._dd2;}else{if(this.get(d)){if(h<m){return this._dd2;}else{return this._dd;}}else{if(h<k){return this._dd;}else{return this._dd2;}}}}}},{NAME:"DualSlider",ATTRS:{value2:{value:0,setter:"_setNewValue"},thumbSeparation:{value:0,setter:"_setThumbSeparation"},thumbsFlipped:{value:0}}});},"0.0.0",{requires:["slider"]});},"gallery-2011.10.06-19-55",{skinnable:true,requires:["slider"]});