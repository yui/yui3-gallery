YUI.add("gallery-storage-lite",function(b){var q=b.config.doc,i=b.config.win,c=b.JSON,p=b.namespace("StorageLite"),h="yui_storage_lite",t="YUI StorageLite data",v=1048576,o="1.0",r="ready",u=0,g=1,a=2,l=3,j=4,e="yui_storage_lite",k="data",s={},m,f;try{if(i.localStorage){f=g;}else{if(i.globalStorage){f=a;}else{if(i.openDatabase&&navigator.userAgent.indexOf("Chrome")===-1){f=l;}else{if(b.UA.ie>=5){f=j;}else{f=u;}}}}}catch(n){f=u;}b.StorageFullError=function(d){b.StorageFullError.superclass.constructor.call(d);this.name="StorageFullError";this.message=d||"Maximum storage capacity reached";if(b.UA.ie){this.description=this.message;}};b.extend(b.StorageFullError,Error);b.augment(p,b.EventTarget,true,null,{emitFacade:true,prefix:"storage-lite",preventable:false});p.publish(r,{fireOnce:true});b.mix(p,{clear:function(){},getItem:function(w,d){return null;},length:function(){return 0;},removeItem:function(d){},setItem:function(d,w){}});if(f===g||f===a){b.mix(p,{length:function(){return m.length;},removeItem:function(d){m.removeItem(d);},setItem:function(w,x,d){m.setItem(w,d?c.stringify(x):x);}},true);if(f===g){m=i.localStorage;b.mix(p,{clear:function(){m.clear();},getItem:function(x,w){try{return w?c.parse(m.getItem(x)):m.getItem(x);}catch(d){return null;}}},true);}else{if(f===a){m=i.globalStorage[i.location.hostname];b.mix(p,{clear:function(){for(var d in m){if(m.hasOwnProperty(d)){m.removeItem(d);delete m[d];}}},getItem:function(x,w){try{return w?c.parse(m[x].value):m[x].value;}catch(d){return null;}}},true);}}p.fire(r);}else{if(f===l||f===j){b.mix(p,{clear:function(){s={};p._save();},getItem:function(w,d){return s.hasOwnProperty(w)?s[w]:null;},length:function(){var w=0,d;for(d in s){if(s.hasOwnProperty(d)){w+=1;}}return w;},removeItem:function(d){delete s[d];p._save();},setItem:function(w,x,d){s[w]=x;p._save();}},true);if(f===l){m=i.openDatabase(h,o,t,v);b.mix(p,{_save:function(){m.transaction(function(d){d.executeSql("REPLACE INTO "+h+" (name, value) VALUES ('data', ?)",[c.stringify(s)]);});}},true);m.transaction(function(d){d.executeSql("CREATE TABLE IF NOT EXISTS "+h+"(name TEXT PRIMARY KEY, value TEXT NOT NULL)");d.executeSql("SELECT value FROM "+h+" WHERE name = 'data'",[],function(y,x){if(x.rows.length){try{s=c.parse(x.rows.item(0).value);}catch(w){s={};}}p.fire(r);});});}else{if(f===j){m=q.createElement("span");m.addBehavior("#default#userData");b.mix(p,{_save:function(){var w=c.stringify(s);try{m.setAttribute(k,w);m.save(e);}catch(d){throw new b.StorageFullError();}}},true);b.on("domready",function(){q.body.appendChild(m);m.load(e);try{s=c.parse(m.getAttribute(k)||"{}");}catch(d){s={};}p.fire(r);});}}}else{p.fire(r);}}},"gallery-2012.01.25-21-14",{requires:["event-base","event-custom","event-custom-complex","json"]});