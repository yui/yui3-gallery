YUI.add("gallery-charts",function(b){var g=b.UA.chrome,j,d=document.createElement("canvas");if(document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")){j="svg";}else{if(d&&d.getContext&&d.getContext("2d")){j="canvas";}else{j="vml";}}var w=function(F){this.initializer.apply(this,arguments);};w.prototype={autoSize:true,initializer:function(G){G=G||{};var F=G.width||0,H=G.height||0;if(G.node){this.node=G.node;this._styleGroup(this.node);}else{this.node=this._createGraphics();this.setSize(F,H);}this._initProps();},beginBitmapFill:function(F){var G={};G.src=F.bitmap.src;G.type="tile";this._fillProps=G;if(!isNaN(F.tx)||!isNaN(F.ty)||!isNaN(F.width)||!isNaN(F.height)){this._gradientBox={tx:F.tx,ty:F.ty,width:F.width,height:F.height};}else{this._gradientBox=null;}},beginFill:function(F,G){if(F){this._fillAlpha=b.Lang.isNumber(G)?G:1;this._fillColor=F;this._fillType="solid";this._fill=1;}return this;},beginGradientFill:function(G){var F=G.alphas||[];if(!this._defs){this._defs=this._createGraphicNode("defs");this.node.appendChild(this._defs);}this._fillAlphas=F;this._fillColors=G.colors;this._fillType=G.type||"linear";this._fillRatios=G.ratios||[];this._fillRotation=G.rotation||0;this._fillWidth=G.width||null;this._fillHeight=G.height||null;this._fillX=!isNaN(G.tx)?G.tx:NaN;this._fillY=!isNaN(G.ty)?G.ty:NaN;this._gradientId="lg"+Math.round(100000*Math.random());return this;},destroy:function(){this._removeChildren(this.node);if(this.node&&this.node.parentNode){this.node.parentNode.removeChild(this.node);}},_removeChildren:function(F){if(F.hasChildNodes()){var G;while(F.firstChild){G=F.firstChild;this._removeChildren(G);F.removeChild(G);}}},toggleVisible:function(F){this._toggleVisible(this.node,F);},_toggleVisible:function(J,K){var I=b.Selector.query(">/*",J),G=K?"visible":"hidden",H=0,F;if(I){F=I.length;for(;H<F;++H){this._toggleVisible(I[H],K);}}J.style.visibility=G;},clear:function(){if(this._graphicsList){while(this._graphicsList.length>0){this.node.removeChild(this._graphicsList.shift());}}this.path="";},curveTo:function(H,G,J,I,F,K){this._shapeType="path";if(this.path.indexOf("C")<0||this._pathType!=="C"){this._pathType="C";this.path+=" C";}this.path+=Math.round(H)+", "+Math.round(G)+", "+Math.round(J)+", "+Math.round(I)+", "+F+", "+K+" ";this._trackSize(F,K);},quadraticCurveTo:function(H,G,F,I){if(this.path.indexOf("Q")<0||this._pathType!=="Q"){this._pathType="Q";this.path+=" Q";}this.path+=Math.round(H)+" "+Math.round(G)+" "+Math.round(F)+" "+Math.round(I);},drawCircle:function(F,H,G){this._shape={x:F-G,y:H-G,w:G*2,h:G*2};this._attributes={cx:F,cy:H,r:G};this._width=this._height=G*2;this._x=F-G;this._y=H-G;this._shapeType="circle";this._draw();},drawEllipse:function(F,I,G,H){this._shape={x:F,y:I,w:G,h:H};this._width=G;this._height=H;this._x=F;this._y=I;this._shapeType="ellipse";this._draw();},drawRect:function(F,I,G,H){this._shape={x:F,y:I,w:G,h:H};this._x=F;this._y=I;this._width=G;this._height=H;this.moveTo(F,I);this.lineTo(F+G,I);this.lineTo(F+G,I+H);this.lineTo(F,I+H);this.lineTo(F,I);this._draw();},drawRoundRect:function(F,K,G,I,H,J){this._shape={x:F,y:K,w:G,h:I};this._x=F;this._y=K;this._width=G;this._height=I;this.moveTo(F,K+J);this.lineTo(F,K+I-J);this.quadraticCurveTo(F,K+I,F+H,K+I);this.lineTo(F+G-H,K+I);this.quadraticCurveTo(F+G,K+I,F+G,K+I-J);this.lineTo(F+G,K+J);this.quadraticCurveTo(F+G,K,F+G-H,K);this.lineTo(F+H,K);this.quadraticCurveTo(F,K,F,K+J);this._draw();},drawWedge:function(H,K,J,I,G,F){this._drawingComplete=false;this.path=this._getWedgePath({x:H,y:K,startAngle:J,arc:I,radius:G,yRadius:F});this._width=G*2;this._height=this._width;this._shapeType="path";this._draw();},end:function(){if(this._shapeType){this._draw();}this._initProps();},lineGradientStyle:function(){},lineStyle:function(I,H,M,K,J,L,F,G){this._stroke=1;this._strokeWeight=I;if(H){this._strokeColor=H;}this._strokeAlpha=b.Lang.isNumber(M)?M:1;},lineTo:function(K,J,H){var G=arguments,I,F;if(typeof K==="string"||typeof K==="number"){G=[[K,J]];}F=G.length;this._shapeType="path";if(this.path.indexOf("L")<0||this._pathType!=="L"){this._pathType="L";this.path+=" L";}for(I=0;I<F;++I){this.path+=G[I][0]+", "+G[I][1]+" ";this._trackSize.apply(this,G[I]);}},moveTo:function(F,G){this._pathType="M";this.path+=" M"+F+", "+G;},_getWedgePath:function(Y){var O=Y.x,M=Y.y,T=Y.startAngle,L=Y.arc,H=Y.radius,I=Y.yRadius||H,S,Q,K,X,J,P,N,W,V,G,F,U=0,R=" M"+O+", "+M;if(Math.abs(L)>360){L=360;}S=Math.ceil(Math.abs(L)/45);Q=L/S;K=-(Q/180)*Math.PI;X=(T/180)*Math.PI;if(S>0){P=O+Math.cos(T/180*Math.PI)*H;N=M+Math.sin(T/180*Math.PI)*I;R+=" L"+Math.round(P)+", "+Math.round(N);R+=" Q";for(;U<S;++U){X+=K;J=X-(K/2);W=O+Math.cos(X)*H;V=M+Math.sin(X)*I;G=O+Math.cos(J)*(H/Math.cos(K/2));F=M+Math.sin(J)*(I/Math.cos(K/2));R+=Math.round(G)+" "+Math.round(F)+" "+Math.round(W)+" "+Math.round(V)+" ";}R+=" L"+O+", "+M;}return R;},setSize:function(F,G){if(this.autoSize){if(F>this.node.getAttribute("width")){this.node.setAttribute("width",F);}if(G>this.node.getAttribute("height")){this.node.setAttribute("height",G);}}},_trackSize:function(F,G){if(F>this._width){this._width=F;}if(G>this._height){this._height=G;}this.setSize(F,G);},setPosition:function(F,G){this.node.setAttribute("x",F);this.node.setAttribute("y",G);},render:function(F){var G=F.get("width")||F.get("offsetWidth"),H=F.get("height")||F.get("offsetHeight");F=F||b.config.doc.body;F.appendChild(this.node);this.setSize(G,H);this._initProps();return this;},_initProps:function(){this._shape=null;this._fillColor=null;this._strokeColor=null;this._strokeWeight=0;this._fillProps=null;this._fillAlphas=null;this._fillColors=null;this._fillType=null;this._fillRatios=null;this._fillRotation=null;this._fillWidth=null;this._fillHeight=null;this._fillX=NaN;this._fillY=NaN;this.path="";this._width=0;this._height=0;this._x=0;this._y=0;this._fill=null;this._stroke=0;this._stroked=false;this._pathType=null;this._attributes={};},_clearPath:function(){this._shape=null;this._shapeType=null;
this.path="";this._width=0;this._height=0;this._x=0;this._y=0;this._pathType=null;this._attributes={};},_draw:function(){var G=this._createGraphicNode(this._shapeType),H,F;if(this.path){if(this._fill){this.path+="z";}G.setAttribute("d",this.path);}else{for(H in this._attributes){if(this._attributes.hasOwnProperty(H)){G.setAttribute(H,this._attributes[H]);}}}G.setAttribute("stroke-width",this._strokeWeight);if(this._strokeColor){G.setAttribute("stroke",this._strokeColor);G.setAttribute("stroke-opacity",this._strokeAlpha);}if(!this._fillType||this._fillType==="solid"){if(this._fillColor){G.setAttribute("fill",this._fillColor);G.setAttribute("fill-opacity",this._fillAlpha);}else{G.setAttribute("fill","none");}}else{if(this._fillType==="linear"){F=this._getFill();F.setAttribute("id",this._gradientId);this._defs.appendChild(F);G.setAttribute("fill","url(#"+this._gradientId+")");}}this.node.appendChild(G);this._clearPath();},_getFill:function(){var F=this._fillType,G;switch(F){case"linear":G=this._getLinearGradient("fill");break;case"radial":break;case"bitmap":break;}return G;},_getLinearGradient:function(K){var Y=this._createGraphicNode("linearGradient"),J="_"+K,P=this[J+"Colors"],S=this[J+"Ratios"],N=this[J+"Alphas"],Q=this._fillWidth||(this._shape.w),ab=this._fillHeight||(this._shape.h),U=this[J+"Rotation"],Z,W,X,O,L,R,V,ac,aa,I,G,H=Q/2,F=ab/2,M,T;M=Math.PI/180;T=parseFloat(parseFloat(Math.tan(U*M)).toFixed(8));if(Math.abs(T)*Q/2>=ab/2){if(U<180){I=0;G=ab;}else{I=ab;G=0;}ac=H-((F-I)/T);aa=H-((F-G)/T);}else{if(U>90&&U<270){ac=Q;aa=0;}else{ac=0;aa=Q;}I=((T*(H-ac))-F)*-1;G=((T*(H-aa))-F)*-1;}Y.setAttribute("gradientTransform","rotate("+U+")");Y.setAttribute("width",Q);Y.setAttribute("height",ab);Y.setAttribute("gradientUnits","userSpaceOnUse");W=P.length;R=0;for(Z=0;Z<W;++Z){L=N[Z];X=P[Z];O=S[Z]||Z/(W-1);O=Math.round(O*100)+"%";L=b.Lang.isNumber(L)?L:"1";R=(Z+1)/W;V=this._createGraphicNode("stop");V.setAttribute("offset",O);V.setAttribute("stop-color",X);V.setAttribute("stop-opacity",L);Y.appendChild(V);}return Y;},_createGraphics:function(){var F=this._createGraphicNode("svg");this._styleGroup(F);return F;},_styleGroup:function(F){F.style.position="absolute";F.style.top="0px";F.style.overflow="visible";F.style.left="0px";F.setAttribute("pointer-events","none");},_createGraphicNode:function(H,F){var I=document.createElementNS("http://www.w3.org/2000/svg","svg:"+H),G=F||"none";if(H!=="defs"&&H!=="stop"&&H!=="linearGradient"){I.setAttribute("pointer-events",G);}if(H!="svg"){if(!this._graphicsList){this._graphicsList=[];}this._graphicsList.push(I);}return I;},getShape:function(F){F.graphic=this;return new b.Shape(F);}};b.Graphic=w;function m(){this.initializer.apply(this,arguments);}m.prototype={initializer:function(F){this._dummy=this._createDummy();this._canvas=this._createGraphic();this._context=this._canvas.getContext("2d");this._initProps();},beginBitmapFill:function(F){var G=this._context,I=F.bitmap,H=F.repeat||"repeat";this._fillWidth=F.width||null;this._fillHeight=F.height||null;this._fillX=!isNaN(F.tx)?F.tx:NaN;this._fillY=!isNaN(F.ty)?F.ty:NaN;this._fillType="bitmap";this._bitmapFill=G.createPattern(I,H);return this;},beginFill:function(F,H){var G=this._context;G.beginPath();if(F){if(H){F=this._2RGBA(F,H);}else{F=this._2RGB(F);}this._fillColor=F;this._fillType="solid";}return this;},beginGradientFill:function(J){var I,L,K=0,H=J.colors,G=J.alphas||[],F=H.length;this._fillAlphas=G;this._fillColors=H;this._fillType=J.type||"linear";this._fillRatios=J.ratios||[];this._fillRotation=J.rotation||0;this._fillWidth=J.width||null;this._fillHeight=J.height||null;this._fillX=!isNaN(J.tx)?J.tx:NaN;this._fillY=!isNaN(J.ty)?J.ty:NaN;for(;K<F;++K){L=G[K];I=H[K];if(L){I=this._2RGBA(I,L);}else{I=this._2RGB(I);}H[K]=I;}this._context.beginPath();return this;},lineStyle:function(M,J,I,L,N,H,F,K){J=J||"#000000";var G=this._context;if(this._stroke){G.stroke();}G.lineWidth=M;if(M){this._stroke=1;}else{this._stroke=0;}if(J){this._strokeStyle=J;if(I){this._strokeStyle=this._2RGBA(this._strokeStyle,I);}}if(!this._fill){G.beginPath();}if(H==="butt"){H="none";}if(G.lineCap){}this._drawingComplete=false;return this;},lineTo:function(L,K,H){var G=arguments,J=this._context,I,F;if(typeof L==="string"||typeof L==="number"){G=[[L,K]];}for(I=0,F=G.length;I<F;++I){J.lineTo(G[I][0],G[I][1]);this._updateShapeProps.apply(this,G[I]);this._trackSize.apply(this,G[I]);}this._drawingComplete=false;return this;},moveTo:function(F,G){this._context.moveTo(F,G);this._trackPos(F,G);this._updateShapeProps(F,G);this._drawingComplete=false;return this;},clear:function(){this._initProps();this._canvas.width=this._canvas.width;this._canvas.height=this._canvas.height;return this;},curveTo:function(H,G,J,I,F,K){this._context.bezierCurveTo(H,G,J,I,F,K);this._drawingComplete=false;this._updateShapeProps(F,K);this._trackSize(F,K);this._trackPos(F,K);return this;},quadraticCurveTo:function(H,G,F,I){this._context.quadraticCurveTo(H,G,F,I);this._drawingComplete=false;this._updateShapeProps(F,I);return this;},drawCircle:function(G,K,F){var J=this._context,I=0,H=2*Math.PI;this._shape={x:G-F,y:K-F,w:F*2,h:F*2};this._drawingComplete=false;this._trackPos(G,K);this._trackSize(F*2,F*2);J.beginPath();J.arc(G,K,F,I,H,false);this._draw();return this;},drawEllipse:function(Q,O,R,W){this._shape={x:Q,y:O,w:R,h:W};if(this._stroke&&this._context.lineWidth>0){R-=this._context.lineWidth*2;W-=this._context.lineWidth*2;Q+=this._context.lineWidth;O+=this._context.lineWidth;}var G=this._context,T=8,L=-(45/180)*Math.PI,Y=0,K,I=R/2,J=W/2,U=0,N=Q+I,M=O+J,S,P,X,V,H,F;this._drawingComplete=false;this._trackPos(Q,O);this._trackSize(Q+R,O+W);G.beginPath();S=N+Math.cos(0)*I;P=M+Math.sin(0)*J;G.moveTo(S,P);for(;U<T;U++){Y+=L;K=Y-(L/2);X=N+Math.cos(Y)*I;V=M+Math.sin(Y)*J;H=N+Math.cos(K)*(I/Math.cos(L/2));F=M+Math.sin(K)*(J/Math.cos(L/2));G.quadraticCurveTo(H,F,X,V);}this._draw();return this;},drawRect:function(F,J,H,I){var G=this._context;this._shape={x:F,y:J,w:H,h:I};this._drawingComplete=false;
G.beginPath();G.moveTo(F,J);G.lineTo(F+H,J);G.lineTo(F+H,J+I);G.lineTo(F,J+I);G.lineTo(F,J);this._trackPos(F,J);this._trackSize(H,I);this._draw();return this;},drawRoundRect:function(F,L,H,J,I,K){this._shape={x:F,y:L,w:H,h:J};var G=this._context;this._drawingComplete=false;G.beginPath();G.moveTo(F,L+K);G.lineTo(F,L+J-K);G.quadraticCurveTo(F,L+J,F+I,L+J);G.lineTo(F+H-I,L+J);G.quadraticCurveTo(F+H,L+J,F+H,L+J-K);G.lineTo(F+H,L+K);G.quadraticCurveTo(F+H,L,F+H-I,L);G.lineTo(F+I,L);G.quadraticCurveTo(F,L,F,L+K);this._trackPos(F,L);this._trackSize(H,J);this._draw();return this;},drawWedge:function(I){var P=I.x,N=I.y,T=I.startAngle,M=I.arc,H=I.radius,J=I.yRadius,S,R,L,X,K,Q,O,W,V,G,F,U=0;this._drawingComplete=false;this.moveTo(P,N);J=J||H;if(Math.abs(M)>360){M=360;}S=Math.ceil(Math.abs(M)/45);R=M/S;L=-(R/180)*Math.PI;X=(T/180)*Math.PI;if(S>0){Q=P+Math.cos(T/180*Math.PI)*H;O=N+Math.sin(T/180*Math.PI)*J;this.lineTo(Q,O);for(;U<S;++U){X+=L;K=X-(L/2);W=P+Math.cos(X)*H;V=N+Math.sin(X)*J;G=P+Math.cos(K)*(H/Math.cos(L/2));F=N+Math.sin(K)*(J/Math.cos(L/2));this.quadraticCurveTo(G,F,W,V);}this.lineTo(P,N);}this._trackPos(P,N);this._trackSize(H,H);this._draw();},end:function(){this._draw();this._initProps();return this;},lineGradientStyle:function(){return this;},setSize:function(F,G){this._canvas.width=F;this._canvas.height=G;},_initProps:function(){var F=this._context;F.fillStyle="rgba(0, 0, 0, 1)";F.lineWidth=1;F.lineJoin="miter";F.miterLimit=3;this._strokeStyle="rgba(0, 0, 0, 1)";this._width=0;this._height=0;this._x=0;this._y=0;this._fillType=null;this._stroke=null;this._bitmapFill=null;this._drawingComplete=false;},_getFill:function(){var F=this._fillType,G;switch(F){case"linear":G=this._getLinearGradient("fill");break;case"radial":G=this._getRadialGradient("fill");break;case"bitmap":G=this._bitmapFill;break;case"solid":G=this._fillColor;break;}return G;},_getLinearGradient:function(K){var J="_"+K,P=this[J+"Colors"],T=this[J+"Ratios"],Q=!isNaN(this._fillX)?this._fillX:this._shape.x,O=!isNaN(this._fillY)?this._fillY:this._shape.y,R=this._fillWidth||(this._shape.w),ab=this._fillHeight||(this._shape.h),W=this._context,V=this[J+"Rotation"],Z,X,Y,N,S,M,ac,aa,I,G,H=Q+R/2,F=O+ab/2,L=Math.PI/180,U=parseFloat(parseFloat(Math.tan(V*L)).toFixed(8));if(Math.abs(U)*R/2>=ab/2){if(V<180){I=O;G=O+ab;}else{I=O+ab;G=O;}ac=H-((F-I)/U);aa=H-((F-G)/U);}else{if(V>90&&V<270){ac=Q+R;aa=Q;}else{ac=Q;aa=Q+R;}I=((U*(H-ac))-F)*-1;G=((U*(H-aa))-F)*-1;}M=W.createLinearGradient(ac,I,aa,G);X=P.length;S=0;for(Z=0;Z<X;++Z){Y=P[Z];N=T[Z]||Z/(X-1);M.addColorStop(N,Y);S=(Z+1)/X;}return M;},_getRadialGradient:function(O){var G="_"+O,F=this[G+"Colors"],L=this[G+"Ratios"],K,I,S=this._fillWidth||this._shape.w,M=this._fillHeight||this._shape.h,Q=!isNaN(this._fillX)?this._fillX:this._shape.x,P=!isNaN(this._fillY)?this._fillY:this._shape.y,J,N,H,R,T=this._context;Q+=S/2;P+=M/2;R=T.createRadialGradient(Q,P,1,Q,P,S/2);I=F.length;H=0;for(K=0;K<I;++K){J=F[K];N=L[K]||K/(I-1);R.addColorStop(N,J);}return R;},_draw:function(){if(this._drawingComplete||!this._shape){return;}var F=this._context,G;if(this._fillType){G=this._getFill();if(G){F.fillStyle=G;}F.closePath();}if(this._fillType){F.fill();}if(this._stroke){F.strokeStyle=this._strokeStyle;F.stroke();}this._drawingComplete=true;},_drawingComplete:false,_reHex:/^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i,_2RGBA:function(G,F){F=(F!==undefined)?F:1;if(this._reHex.exec(G)){G="rgba("+[parseInt(RegExp.$1,16),parseInt(RegExp.$2,16),parseInt(RegExp.$3,16)].join(",")+","+F+")";}return G;},_createDummy:function(){var F=b.config.doc.createElement("div");F.style.height=0;F.style.width=0;F.style.overflow="hidden";b.config.doc.documentElement.appendChild(F);return F;},_createGraphic:function(F){var G=b.config.doc.createElement("canvas");G.width=600;G.height=600;return G;},_2RGB:function(F){this._dummy.style.background=F;return this._dummy.style.backgroundColor;},_trackSize:function(F,G){if(F>this._width){this._width=F;}if(G>this._height){this._height=G;}},_trackPos:function(F,G){if(F>this._x){this._x=F;}if(G>this._y){this._y=G;}},_updateShapeProps:function(F,I){var G,H;if(!this._shape){this._shape={};}if(!this._shape.x){this._shape.x=F;}else{this._shape.x=Math.min(this._shape.x,F);}if(!this._shape.y){this._shape.y=I;}else{this._shape.y=Math.min(this._shape.y,I);}G=Math.abs(F-this._shape.x);if(!this._shape.w){this._shape.w=G;}else{this._shape.w=Math.max(G,this._shape.w);}H=Math.abs(I-this._shape.y);if(!this._shape.h){this._shape.h=H;}else{this._shape.h=Math.max(H,this._shape.h);}},getShape:function(F){F.graphic=this;return new b.Shape(F);}};b.CanvasDrawingUtil=m;b.CanvasGraphic=b.Base.create("graphic",b.CanvasDrawingUtil,[],{autoSize:true,setSize:function(F,G){if(this.autoSize){if(F>this.node.getAttribute("width")){this.node.style.width=F+"px";this._canvas.style.width=F+"px";this._canvas.width=F;this.node.setAttribute("width",F);}if(G>this.node.getAttribute("height")){this.node.style.height=G+"px";this._canvas.style.height=G+"px";this._canvas.height=G;this.node.setAttribute("height",G);}}},_trackSize:function(F,G){if(F>this._width){this._width=F;}if(G>this._height){this._height=G;}this.setSize(F,G);},setPosition:function(F,G){this.node.style.left=F+"px";this.node.style.top=G+"px";},render:function(F){F=F||b.config.doc.body;this.node=document.createElement("div");this.node.style.width=F.offsetWidth+"px";this.node.style.height=F.offsetHeight+"px";this.node.style.display="block";this.node.style.position="absolute";this.node.style.left=F.getStyle("left");this.node.style.top=F.getStyle("top");this.node.style.pointerEvents="none";F.appendChild(this.node);this.node.appendChild(this._canvas);this._canvas.width=F.offsetWidth>0?F.offsetWidth:100;this._canvas.height=F.offsetHeight>0?F.offsetHeight:100;this._canvas.style.position="absolute";return this;},toggleVisible:function(F){this.node.style.visibility=F?"visible":"hidden";},_createGraphicNode:function(F){var G=b.config.doc.createElement("canvas");G.style.pointerEvents=F||"none";
if(!this._graphicsList){this._graphicsList=[];}this._graphicsList.push(G);return G;},destroy:function(){this._removeChildren(this.node);if(this.node&&this.node.parentNode){this.node.parentNode.removeChild(this.node);}},_removeChildren:function(F){if(F.hasChildNodes()){var G;while(F.firstChild){G=F.firstChild;this._removeChildren(G);F.removeChild(G);}}},node:null});if(j=="canvas"){b.Graphic=b.CanvasGraphic;}var c=function(F){this.initializer.apply(this,arguments);};c.prototype={initializer:function(G){G=G||{};var F=G.width||0,H=G.height||0;this.node=this._createGraphics();this.setSize(F,H);this._initProps();},beginBitmapFill:function(F){var G={};G.src=F.bitmap.src;G.type="tile";this._fillProps=G;if(!isNaN(F.tx)||!isNaN(F.ty)||!isNaN(F.width)||!isNaN(F.height)){this._gradientBox={tx:F.tx,ty:F.ty,width:F.width,height:F.height};}else{this._gradientBox=null;}},beginFill:function(F,G){if(F){if(b.Lang.isNumber(G)){this._fillProps={type:"solid",opacity:G};}this._fillColor=F;this._fill=1;}return this;},beginGradientFill:function(H){var M=H.type,F=H.colors,G=H.alphas||[],K=H.ratios||[],P={colors:F,ratios:K},L=G.length,J=0,I,N,O=H.rotation||0;for(;J<L;++J){I=G[J];I=b.Lang.isNumber(I)?I:1;N=J>0?J+1:"";G[J]=Math.round(I*100)+"%";P["opacity"+N]=I;}if(M==="linear"){if(H){}if(O>0&&O<=90){O=450-O;}else{if(O<=270){O=270-O;}else{if(O<=360){O=630-O;}else{O=270;}}}P.type="gradientunscaled";P.angle=O;}else{if(M==="radial"){P.alignshape=false;P.type="gradientradial";P.focus="100%";P.focusposition="50%,50%";}}P.ratios=K||[];if(!isNaN(H.tx)||!isNaN(H.ty)||!isNaN(H.width)||!isNaN(H.height)){this._gradientBox={tx:H.tx,ty:H.ty,width:H.width,height:H.height};}else{this._gradientBox=null;}this._fillProps=P;},clear:function(){this._path="";this._removeChildren(this.node);},destroy:function(){this._removeChildren(this.node);this.node.parentNode.removeChild(this.node);},_removeChildren:function(F){if(F.hasChildNodes()){var G;while(F.firstChild){G=F.firstChild;this._removeChildren(G);F.removeChild(G);}}},toggleVisible:function(F){this._toggleVisible(this.node,F);},_toggleVisible:function(J,K){var I=b.one(J).get("children"),G=K?"visible":"hidden",H=0,F;if(I){F=I.length;for(;H<F;++H){this._toggleVisible(I[H],K);}}J.style.visibility=G;},curveTo:function(H,G,J,I,F,K){this._shape="shape";this._path+=" c "+Math.round(H)+", "+Math.round(G)+", "+Math.round(J)+", "+Math.round(I)+", "+F+", "+K;this._trackSize(F,K);},quadraticCurveTo:function(H,G,F,I){this._path+=" qb "+H+", "+G+", "+F+", "+I;},drawCircle:function(F,H,G){this._width=this._height=G*2;this._x=F-G;this._y=H-G;this._shape="oval";this._draw();},drawEllipse:function(F,I,G,H){this._width=G;this._height=H;this._x=F;this._y=I;this._shape="oval";this._draw();},drawRect:function(F,I,G,H){this._x=F;this._y=I;this._width=G;this._height=H;this.moveTo(F,I);this.lineTo(F+G,I);this.lineTo(F+G,I+H);this.lineTo(F,I+H);this.lineTo(F,I);this._draw();},drawRoundRect:function(F,K,G,I,H,J){this._x=F;this._y=K;this._width=G;this._height=I;this.moveTo(F,K+J);this.lineTo(F,K+I-J);this.quadraticCurveTo(F,K+I,F+H,K+I);this.lineTo(F+G-H,K+I);this.quadraticCurveTo(F+G,K+I,F+G,K+I-J);this.lineTo(F+G,K+J);this.quadraticCurveTo(F+G,K,F+G-H,K);this.lineTo(F+H,K);this.quadraticCurveTo(F,K,F,K+J);this._draw();},drawWedge:function(H,K,J,I,G,F){this._drawingComplete=false;this._width=G;this._height=G;F=F||G;this._path+=this._getWedgePath({x:H,y:K,startAngle:J,arc:I,radius:G,yRadius:F});this._width=G*2;this._height=this._width;this._shape="shape";this._draw();},_getWedgePath:function(I){var H=I.x,M=I.y,K=I.startAngle,J=I.arc,G=I.radius,F=I.yRadius||G,L;if(Math.abs(J)>360){J=360;}K*=-65535;J*=65536;L=" m "+H+" "+M+" ae "+H+" "+M+" "+G+" "+F+" "+K+" "+J;return L;},end:function(){if(this._shape){this._draw();}this._initProps();},lineGradientStyle:function(){},lineStyle:function(I,H,M,K,J,L,F,G){this._stroke=1;this._strokeWeight=I*0.7;this._strokeColor=H;this._strokeOpacity=b.Lang.isNumber(M)?M:1;},lineTo:function(K,J,H){var G=arguments,I,F;if(typeof K==="string"||typeof K==="number"){G=[[K,J]];}F=G.length;this._shape="shape";this._path+=" l ";for(I=0;I<F;++I){this._path+=" "+Math.round(G[I][0])+", "+Math.round(G[I][1]);this._trackSize.apply(this,G[I]);}},moveTo:function(F,G){this._path+=" m "+Math.round(F)+", "+Math.round(G);},setSize:function(F,G){F=Math.round(F);G=Math.round(G);this.node.style.width=F+"px";this.node.style.height=G+"px";this.node.coordSize=F+" "+G;this._canvasWidth=F;this._canvasHeight=G;},setPosition:function(F,G){F=Math.round(F);G=Math.round(G);this.node.style.left=F+"px";this.node.style.top=G+"px";},render:function(F){var G=Math.max(F.offsetWidth||0,this._canvasWidth),H=Math.max(F.offsetHeight||0,this._canvasHeight);F=F||b.config.doc.body;F.appendChild(this.node);this.setSize(G,H);this._initProps();return this;},_shape:null,_trackSize:function(F,G){if(F>this._width){this._width=F;}if(G>this._height){this._height=G;}},_initProps:function(){this._fillColor=null;this._strokeColor=null;this._strokeOpacity=null;this._strokeWeight=0;this._fillProps=null;this._path="";this._width=0;this._height=0;this._x=0;this._y=0;this._fill=null;this._stroke=0;this._stroked=false;},_clearPath:function(){this._shape=null;this._path="";this._width=0;this._height=0;this._x=0;this._y=0;},_draw:function(){var H=this._createGraphicNode(this._shape),F=Math.round(this._width),I=Math.round(this._height),J,G=this._fillProps;this.setSize(F,I);if(this._path){if(this._fill||this._fillProps){this._path+=" x";}if(this._stroke){this._path+=" e";}H.path=this._path;H.coordSize=F+", "+I;}else{H.style.display="block";H.style.position="absolute";H.style.left=this._x+"px";H.style.top=this._y+"px";}if(this._fill){H.fillColor=this._fillColor;}else{H.filled=false;}if(this._stroke&&this._strokeWeight>0){H.strokeColor=this._strokeColor;H.strokeWeight=this._strokeWeight;if(b.Lang.isNumber(this._strokeOpacity)&&this._strokeOpacity<1){J=this._createGraphicNode("stroke");H.appendChild(J);J.opacity=this._strokeOpacity;}}else{H.stroked=false;
}H.style.width=F+"px";H.style.height=I+"px";if(G){H.filled=true;H.appendChild(this._getFill());}this.node.appendChild(H);this._clearPath();},_getFill:function(){var S=this._createGraphicNode("fill"),Q=this._width,L=this._height,M=this._fillProps,G,R,J=0,F,P="",N,K,O=Math.sqrt(Math.pow(Q,2)+Math.pow(L,2)),I=50,H=50;if(this._gradientBox){I=Math.round((this._gradientBox.width/2-((this._x-this._gradientBox.tx)*O/Q))/(Q*Q/O)*100);H=Math.round((this._gradientBox.height/2-((this._y-this._gradientBox.ty)*O/L))/(L*L/O)*100);M.focussize=(this._gradientBox.width/Q)/10+" "+(this._gradientBox.height/L)/10;}if(M.colors){F=M.colors.concat();K=M.ratios.concat();N=F.length;for(;J<N;++J){R=K[J]||J/(N-1);R=Math.round(100*R)+"%";P+=", "+R+" "+F[J];}if(parseInt(R,10)<100){P+=", 100% "+F[N-1];}}for(G in M){if(M.hasOwnProperty(G)){S.setAttribute(G,M[G]);}}S.colors=P.substr(2);if(M.type==="gradientradial"){S.focusposition=I+"%,"+H+"%";}return S;},_createGraphics:function(){var F=this._createGraphicNode("group");F.style.display="inline-block";F.style.position="absolute";return F;},_createGraphicNode:function(F){return document.createElement("<"+F+' xmlns="urn:schemas-microsft.com:vml" class="vml'+F+'"/>');},_getNodeShapeType:function(G){var F="shape";if(this._typeConversionHash.hasOwnProperty(G)){F=this._typeConversionHash[G];}return F;},_typeConversionHash:{circle:"oval",ellipse:"oval",rect:"rect"},getShape:function(F){F.graphic=this;return new b.Shape(F);},addChild:function(F){this.node.appendChild(F);}};if(j=="vml"){var i=document.createStyleSheet();i.addRule(".vmlgroup","behavior:url(#default#VML)",i.rules.length);i.addRule(".vmlgroup","display:inline-block",i.rules.length);i.addRule(".vmlgroup","zoom:1",i.rules.length);i.addRule(".vmlshape","behavior:url(#default#VML)",i.rules.length);i.addRule(".vmlshape","display:inline-block",i.rules.length);i.addRule(".vmloval","behavior:url(#default#VML)",i.rules.length);i.addRule(".vmloval","display:inline-block",i.rules.length);i.addRule(".vmlrect","behavior:url(#default#VML)",i.rules.length);i.addRule(".vmlrect","display:block",i.rules.length);i.addRule(".vmlfill","behavior:url(#default#VML)",i.rules.length);i.addRule(".vmlstroke","behavior:url(#default#VML)",i.rules.length);b.Graphic=c;}function n(F){this._initialize(F);this._draw();}b.extend(n,b.Graphic,{type:"shape",autoSize:false,pointerEvents:"visiblePainted",_initialize:function(F){if(!F.graphic){F.graphic=new b.Graphic();}this._setProps(F);},_setProps:function(F){this.autoSize=F.autoSize||this.autoSize;this.pointerEvents=F.pointerEvents||this.pointerEvents;this.width=F.width||this.width;this.height=F.height||this.height;this.border=F.border||this.border;this.graphics=F.graphic||this.graphics;this.canvas=this.graphics;this.parentNode=this.graphics.node;this.fill=F.fill||this.fill;this.type=F.shape||this.type;this.nodetype=this._getNodeShapeType(this.type);this.props=F.props||this.props;this.path=F.path||this.path;},_draw:function(){var G,M,J,I,F=this.parentNode,K=0,H=this.width||0,L=this.height||0;if(!this.node){this.node=this._createGraphicNode(this.nodetype,this.pointerEvents);F.appendChild(this.node);}if(this.type=="wedge"){this.path=this._getWedgePath(this.props);}if(this.nodetype=="path"){this._setPath();}if(this.border&&this.border.weight&&this.border.weight>0){K=this.border.weight;H-=K*2;L-=K*2;}this._addBorder();if(this.nodetype==="ellipse"){J=this.width/2;G=this.width/2;I=this.height/2;M=this.height/2;J-=K;I-=K;this.node.setAttribute("cx",G);this.node.setAttribute("cy",M);this.node.setAttribute("rx",J);this.node.setAttribute("ry",I);}else{this.node.setAttribute("width",H);this.node.setAttribute("height",L);this.node.style.width=H+"px";this.node.style.height=L+"px";}this._addFill();F.style.width=this.width+"px";F.style.height=this.height+"px";F.setAttribute("width",this.width);F.setAttribute("height",this.height);this.node.style.visibility="visible";this.node.setAttribute("x",K);this.node.setAttribute("y",K);return this;},_setPath:function(){if(this.path){this.path+=" Z";this.node.setAttribute("d",this.path);}},_addBorder:function(){if(this.border&&this.border.weight&&this.border.weight>0){var F=this.border.alpha;this.border.color=this.border.color||"#000000";this.border.weight=this.border.weight||1;this.border.alpha=b.Lang.isNumber(F)?F:1;this.border.linecap=this.border.linecap||"square";this.node.setAttribute("stroke",this.border.color);this.node.setAttribute("stroke-linecap",this.border.linecap);this.node.setAttribute("stroke-width",this.border.weight);this.node.setAttribute("stroke-opacity",this.border.alpha);}else{this.node.setAttribute("stroke","none");}},_addFill:function(){var F;if(this.fill.type==="linear"||this.fill.type==="radial"){this.beginGradientFill(this.fill);this.node.appendChild(this._getFill());}else{if(this.fill.type==="bitmap"){this.beginBitmapFill(this.fill);this.node.appendChild(this._getFill());}else{if(!this.fill.color){this.node.setAttribute("fill","none");}else{F=this.fill.alpha;this.fill.alpha=b.Lang.isNumber(F)?F:1;this.node.setAttribute("fill",this.fill.color);this.node.setAttribute("fill-opacity",F);}}}},end:function(){this._setPath();},update:function(F){this._setProps(F);this._draw();return this;},_getNodeShapeType:function(F){if(this._typeConversionHash.hasOwnProperty(F)){F=this._typeConversionHash[F];}return F;},toggleVisible:function(G){var F=G?"visible":"hidden";if(this.node){this.node.style.visibility=F;}},addClass:function(F){var G=this.node;if(G){if(G.className&&G.className.baseVal){G.className.baseVal=b.Lang.trim([G.className.baseVal,F].join(" "));}else{G.setAttribute("class",F);}}},setPosition:function(F,I){var G=b.one(this.parentNode),H=this.hotspot;G.setStyle("position","absolute");G.setStyle("left",F);G.setStyle("top",I);if(H){H.setStyle("position","absolute");H.setStyle("left",F);H.setStyle("top",I);}},_typeConversionHash:{circle:"ellipse",wedge:"path"}});b.Shape=n;function t(F){this._dummy=this._createDummy();this._canvas=this._createGraphic();this.node=this._canvas;
this._context=this._canvas.getContext("2d");this._initialize(F);this._validate();}b.extend(t,b.CanvasDrawingUtil,{type:"shape",autoSize:false,_initialize:function(F){this._canvas.style.position="absolute";if(F.graphic){F.graphic.node.appendChild(this._canvas);}this._setProps(F);},_setProps:function(F){this.autoSize=F.autoSize||this.autoSize;this.width=F.width||this.width;this.height=F.height||this.height;this.border=F.border||this.border;this.graphics=F.graphic||this.graphics;this.fill=F.fill||this.fill;this.type=F.shape||this.type;this.props=F.props||this.props;this.path=F.path||this.path;this.props=F.props||this.props;this.parentNode=this.graphics.node;},_validate:function(){var F=this.width,I=this.height,G=this.border,H=this.type,J=this.fill;this.clear();this.setSize(this.width,this.height);this._canvas.style.top="0px";this._canvas.style.left="0px";if(G&&G.weight&&G.weight>0){G.color=G.color||"#000";G.alpha=G.alpha||1;this.lineStyle(G.weight,G.color,G.alpha);}if(J.type==="radial"||J.type==="linear"){this.beginGradientFill(J);}else{if(J.type==="bitmap"){this.beginBitmapFill(J);}else{this.beginFill(J.color,J.alpha);}}switch(H){case"circle":this.drawEllipse(0,0,F,I);break;case"rect":this.drawRect(0,0,F,I);break;case"wedge":this.drawWedge(this.props);break;}return this;},update:function(F){this._setProps(F);this._validate();return this;},toggleVisible:function(G){var F=G?"visible":"hidden";if(this.node){this.node.style.visibility=F;}},setPosition:function(F,H){var G=b.one(this.parentNode);G.setStyle("position","absolute");G.setStyle("left",F);G.setStyle("top",H);},addClass:function(F){if(this.node){this.node.style.pointerEvents="painted";this.node.setAttribute("class",F);}}});b.CanvasShape=t;if(j=="canvas"){b.Shape=b.CanvasShape;}function E(F){this._initialize(F);this._draw();}E.prototype={type:"shape",_initialize:function(F){if(!F.graphic){F.graphic=new b.Graphic();}this._setProps(F);},width:0,height:0,_setProps:function(F){this.width=F.width&&F.width>=0?F.width:this.width;this.height=F.height&&F.height>=0?F.height:this.height;this.border=F.border||this.border;this.graphics=F.graphic||this.graphics;this.canvas=this.graphics;this.parentNode=this.graphics.node;this.fill=F.fill||this.fill;this.type=F.shape||this.type;this.props=F.props||this.props;},_draw:function(){var G,H=0,F=this.width||0,I=this.height||0;this.graphics.setSize(F,I);if(this.node){this.node.style.visible="hidden";}else{if(!this.node){this.node=this.graphics._createGraphicNode(this.graphics._getNodeShapeType(this.type));this.graphics.node.appendChild(this.node);}}if(this.type==="wedge"){G=this.graphics._getWedgePath(this.props);if(this.fill){G+=" x";}if(this.border){G+=" e";}this.node.path=G;}this._addBorder();if(this.border&&this.border.weight&&this.border.weight>0){H=this.border.weight;F-=H;I-=H;}this.node.style.width=Math.max(F,0)+"px";this.node.style.height=Math.max(I,0)+"px";this._addFill();return this;},_addBorder:function(){if(this.border&&this.border.weight&&this.border.weight>0){var F=this.border.alpha,G=this.borderWeight;F=b.Lang.isNumber(F)?F:1;G=b.Lang.isNumber(G)?G:1;this.node.strokecolor=this.border.color||"#000000";this.node.strokeweight=G;if(F<1){if(!this._strokeNode){this._strokeNode=this.graphics._createGraphicNode("stroke");this.node.appendChild(this._strokeNode);}this._strokeNode.opacity=F;}else{if(this._strokeNode){this._strokeNode.opacity=F;}}this.node.stroked=true;}else{this.node.stroked=false;}},_addFill:function(){var F;this.node.filled=true;if(this.fill.type==="linear"||this.fill.type==="radial"){this.graphics.beginGradientFill(this.fill);this.node.appendChild(this.graphics._getFill());}else{if(this.fill.type==="bitmap"){this.graphics.beginBitmapFill(this.fill);this.node.appendChild(this.graphics._getFill());}else{if(!this.fill.color){this.node.filled=false;}else{if(this.fillnode){this.graphics._removeChildren(this.fillnode);}F=this.fill.alpha;F=b.Lang.isNumber(F)?F:1;this.fill.alpha=F;this.fillnode=this.graphics._createGraphicNode("fill");this.fillnode.type="solid";this.fillnode.color=this.fill.color;this.fillnode.opacity=F;this.node.appendChild(this.fillnode);}}}},addClass:function(G){var F=this.node;if(F){b.one(F).addClass(G);}},toggleVisible:function(G){var F=G?"visible":"hidden";if(this.node){b.one(this.node).setStyle("visibility",F);}},setPosition:function(F,H){var G=b.one(this.parentNode);G.setStyle("position","absolute");G.setStyle("left",F);G.setStyle("top",H);},update:function(F){this._setProps(F);this._draw();return this;}};b.VMLShape=E;if(j=="vml"){b.Shape=E;}function x(){}x.ATTRS={styles:{getter:function(){this._styles=this._styles||this._getDefaultStyles();return this._styles;},setter:function(F){this._styles=this._setStyles(F);}},graphic:{}};x.NAME="renderer";x.prototype={_styles:null,_setStyles:function(G){var F=this.get("styles");return this._mergeStyles(G,F);},_mergeStyles:function(G,F){if(!F){F={};}var H=b.merge(F,{});b.Object.each(G,function(K,J,I){if(F.hasOwnProperty(J)&&b.Lang.isObject(K)&&!b.Lang.isArray(K)){H[J]=this._mergeStyles(K,F[J]);}else{H[J]=K;}},this);return H;},_getDefaultStyles:function(){return{padding:{top:0,right:0,bottom:0,left:0}};}};b.augment(x,b.Attribute);b.Renderer=x;b.Axis=b.Base.create("axis",b.Widget,[b.Renderer],{_dataChangeHandler:function(F){if(this.get("rendered")){this._drawAxis();}},_updateHandler:function(F){if(this.get("rendered")){this._drawAxis();}},_positionChangeHandler:function(G){var F=this.get("position");if(F=="none"){return;}this._layout=this.getLayout(this.get("position"));if(this.get("rendered")){this._drawAxis();}},renderUI:function(){var F=this.get("position");if(F&&F!="none"){this._layout=this.getLayout(F);this._setCanvas();}},syncUI:function(){this._drawAxis();},_setCanvas:function(){var F=this.get("contentBox"),K=this.get("boundingBox"),J=this.get("position"),H=this._parentNode,G=this.get("width"),I=this.get("height");K.setStyle("position","absolute");G=G?G+"px":H.getStyle("width");I=I?I+"px":H.getStyle("height");if(J==="top"||J==="bottom"){F.setStyle("width",G);
}else{F.setStyle("height",I);}F.setStyle("position","relative");F.setStyle("left","0px");F.setStyle("top","0px");this.set("graphic",new b.Graphic());this.get("graphic").render(F);},_getDefaultStyles:function(){var F={majorTicks:{display:"inside",length:4,color:"#dad8c9",weight:1,alpha:1},minorTicks:{display:"none",length:2,color:"#dad8c9",weight:1},line:{weight:1,color:"#dad8c9",alpha:1},majorUnit:{determinant:"count",count:11,distance:75},top:"0px",left:"0px",width:"100px",height:"100px",label:{color:"#808080",alpha:1,fontSize:"85%",rotation:0,margin:{top:4,right:4,bottom:4,left:4}},hideOverlappingLabelTicks:false};return b.merge(b.Renderer.prototype._getDefaultStyles(),F);},_handleSizeChange:function(I){var H=I.attrName,K=this.get("position"),G=K=="left"||K=="right",F=this.get("contentBox"),J=K=="bottom"||K=="top";F.setStyle("width",this.get("width"));F.setStyle("height",this.get("height"));if((J&&H=="width")||(G&&H=="height")){this._drawAxis();}},_layout:null,getLayout:function(G){var F;switch(G){case"top":F=new b.TopAxisLayout({axisRenderer:this});break;case"bottom":F=new b.BottomAxisLayout({axisRenderer:this});break;case"left":F=new b.LeftAxisLayout({axisRenderer:this});break;case"right":F=new b.RightAxisLayout({axisRenderer:this});break;}return F;},drawLine:function(H,G,F){var I=this.get("graphic");I.lineStyle(F.weight,F.color,F.alpha);I.moveTo(H.x,H.y);I.lineTo(G.x,G.y);I.end();},_drawAxis:function(){if(this._drawing){this._callLater=true;return;}this._drawing=true;this._callLater=false;if(this.get("position")!="none"){var V=this.get("styles"),Q=V.majorTicks,R=Q.display!="none",I,P=V.majorUnit,O,T,K=0,G,L,N,U,M=this._layout,J=this.get("labelFunction"),S=this.get("labelFunctionScope"),H=this.get("labelFormat"),F=this.get("graphic");F.clear();M.setTickOffsets();G=this.getLength();N=M.getLineStart();O=this.getTotalMajorUnits(P);T=this.getMajorUnitDistance(O,G,P);this.set("edgeOffset",this.getEdgeOffset(O,G)*0.5);I=this.getFirstPoint(N);this.drawLine(N,this.getLineEnd(I),V.line);if(R){M.drawTick(I,Q);}if(O<1){this._clearLabelCache();return;}this._createLabelCache();this._tickPoints=[];M.set("maxLabelSize",0);for(;K<O;++K){if(R){M.drawTick(I,Q);}L=this.getPosition(I);U=this.getLabel(I);U.innerHTML=J.apply(S,[this.getLabelByIndex(K,O),H]);I=this.getNextPoint(I,T);}this._clearLabelCache();M.setSizeAndPosition();if(this.get("overlapGraph")){M.offsetNodeForTick(this.get("contentBox"));}M.setCalculatedSize();for(K=0;K<O;++K){M.positionLabel(this.get("labels")[K],this._tickPoints[K]);}}this._drawing=false;if(this._callLater){this._drawAxis();}else{this.fire("axisRendered");}},_labels:null,_labelCache:null,getLabel:function(K,L){var H,G,I={rotation:"rotation",margin:"margin",alpha:"alpha"},F=this._labelCache,J=this.get("styles").label;if(F.length>0){G=F.shift();}else{G=document.createElement("span");G.style.display="block";G.style.whiteSpace="nowrap";b.one(G).addClass("axisLabel");this.get("contentBox").appendChild(G);}G.style.position="absolute";this._labels.push(G);this._tickPoints.push({x:K.x,y:K.y});this._layout.updateMaxLabelSize(G);for(H in J){if(J.hasOwnProperty(H)&&!I.hasOwnProperty(H)){G.style[H]=J[H];}}return G;},_createLabelCache:function(){if(this._labels){if(this._labelCache){this._labelCache=this._labels.concat(this._labelCache);}else{this._labelCache=this._labels.concat();}}else{this._clearLabelCache();}this._labels=[];},_clearLabelCache:function(){if(this._labelCache){var F=this._labelCache.length,H=0,G,I=this._labelCache;for(;H<F;++H){G=I[H];G.parentNode.removeChild(G);}}this._labelCache=[];},_calculateSizeByTickLength:true,getLineEnd:function(H){var F=this.get("width"),G=this.get("height"),I=this.get("position");if(I==="top"||I==="bottom"){return{x:F,y:H.y};}else{return{x:H.x,y:G};}},getLength:function(){var G,I=this.get("styles"),J=I.padding,F=this.get("width"),H=this.get("height"),K=this.get("position");if(K==="top"||K==="bottom"){G=F-(J.left+J.right);}else{G=H-(J.top+J.bottom);}return G;},getFirstPoint:function(I){var F=this.get("styles"),J=this.get("position"),H=F.padding,G={x:I.x,y:I.y};if(J==="top"||J==="bottom"){G.x+=H.left+this.get("edgeOffset");}else{G.y+=this.get("height")-(H.top+this.get("edgeOffset"));}return G;},getNextPoint:function(F,G){var H=this.get("position");if(H==="top"||H==="bottom"){F.x=F.x+G;}else{F.y=F.y-G;}return F;},getLastPoint:function(){var G=this.get("styles"),H=G.padding,F=this.get("width"),I=this.get("position");if(I==="top"||I==="bottom"){return{x:F-H.right,y:H.top};}else{return{x:H.left,y:H.top};}},getPosition:function(F){var K,I=this.get("height"),H=this.get("styles"),J=H.padding,L=this.get("position"),G=this.get("dataType");if(L==="left"||L==="right"){if(G==="numeric"){K=(I-(J.top+J.bottom))-(F.y-J.top);}else{K=F.y-J.top;}}else{K=F.x-J.left;}return K;}},{ATTRS:{edgeOffset:{value:0},graphic:{},node:{},position:{lazyAdd:false,setOnce:true,setter:function(F){if(F=="none"){this.bindUI();}return F;}},topTickOffset:{value:0},bottomTickOffset:{value:0},leftTickOffset:{value:0},rightTickOffset:{value:0},labels:{readOnly:true,getter:function(){return this._labels;}},tickPoints:{readOnly:true,getter:function(){if(this.get("position")=="none"){return this.get("styles").majorUnit.count;}return this._tickPoints;}},overlapGraph:{value:true,validator:function(F){return b.Lang.isBoolean(F);}},labelFunctionScope:{}}});function p(F){p.superclass.constructor.apply(this,arguments);}p.ATTRS={axisRenderer:{value:null},maxLabelSize:{value:0}};b.extend(p,b.Base,{setTickOffsets:function(){var F=this.get("axisRenderer"),J=F.get("styles").majorTicks,H=J.length,G=H*0.5,I=J.display;F.set("topTickOffset",0);F.set("bottomTickOffset",0);switch(I){case"inside":F.set("rightTickOffset",H);F.set("leftTickOffset",0);break;case"outside":F.set("rightTickOffset",0);F.set("leftTickOffset",H);break;case"cross":F.set("rightTickOffset",G);F.set("leftTickOffset",G);break;default:F.set("rightTickOffset",0);F.set("leftTickOffset",0);break;}},drawTick:function(L,J){var G=this.get("axisRenderer"),H=G.get("styles"),K=H.padding,I=J.length,M={x:K.left,y:L.y},F={x:I+K.left,y:L.y};
G.drawLine(M,F,J);},getLineStart:function(){var F=this.get("axisRenderer"),G=F.get("styles"),K=G.padding,L=G.majorTicks,H=L.length,J=L.display,I={x:K.left,y:0};if(J==="outside"){I.x+=H;}else{if(J==="cross"){I.x+=H/2;}}return I;},getLabelPoint:function(F){var G=this.get("axisRenderer");return{x:F.x-G.get("leftTickOffset"),y:F.y};},updateMaxLabelSize:function(Q){var K=this.get("axisRenderer"),F=K.get("styles").label,H=Math.min(90,Math.max(-90,F.rotation)),L=Math.abs(H),O=Math.PI/180,R=parseFloat(parseFloat(Math.sin(L*O)).toFixed(8)),I=parseFloat(parseFloat(Math.cos(L*O)).toFixed(8)),N=I,M=H>0?-R:R,J=-M,G=N,P;if(!document.createElementNS){Q.style.filter="progid:DXImageTransform.Microsoft.Matrix(M11="+N+" M12="+M+" M21="+J+" M22="+G+' sizingMethod="auto expand")';this.set("maxLabelSize",Math.max(this.get("maxLabelSize"),Q.offsetWidth));}else{Q.style.msTransform="rotate(0deg)";if(H===0){P=Q.offsetWidth;}else{if(L===90){P=Q.offsetHeight;}else{P=(I*Q.offsetWidth)+(R*Q.offsetHeight);}}this.set("maxLabelSize",Math.max(this.get("maxLabelSize"),P));}},positionLabel:function(M,U){var T=this.get("axisRenderer"),H=T.get("leftTickOffset"),X=T.get("styles").label,P=X.alpha,W,S=0,O=U.x,V=U.y,N=Math.min(90,Math.max(-90,X.rotation)),G=Math.abs(N),J=Math.PI/180,R=parseFloat(parseFloat(Math.sin(G*J)).toFixed(8)),L=parseFloat(parseFloat(Math.cos(G*J)).toFixed(8)),aa=L,Z=N>0?-R:R,K=-Z,I=aa,Q=this.get("maxLabelSize"),Y=Math.round(M.offsetWidth),F=Math.round(M.offsetHeight);if(X.margin&&X.margin.right){S=X.margin.right;}if(!document.createElementNS){M.style.filter=null;Y=Math.round(M.offsetWidth);F=Math.round(M.offsetHeight);if(N===0){O=Y;V-=F*0.5;}else{if(G===90){O=F;V-=Y*0.5;}else{if(N>0){O=(L*Y)+(F*N/90);V-=(R*Y)+(L*(F*0.5));}else{O=(L*Y)+(G/90*F);V-=L*(F*0.5);}}}O+=H;M.style.left=((U.x+Q)-O)+"px";M.style.top=V+"px";if(W){W+=" ";}if(b.Lang.isNumber(P)&&P<1&&P>-1&&!isNaN(P)){W="progid:DXImageTransform.Microsoft.Alpha(Opacity="+Math.round(P*100)+")";}if(N!==0){if(W){W+=" ";}else{W="";}W+="progid:DXImageTransform.Microsoft.Matrix(M11="+aa+" M12="+Z+" M21="+K+" M22="+I+' sizingMethod="auto expand")';}if(W){M.style.filter=W;}return;}M.style.msTransform="rotate(0deg)";Y=Math.round(M.offsetWidth);F=Math.round(M.offsetHeight);if(N===0){O-=Y;V-=F*0.5;}else{if(N===90){V-=Y*0.5;}else{if(N===-90){O-=F;V+=Y*0.5;}else{if(N<0){O-=(L*Y)+(R*F);V+=(R*Y)-(L*(F*0.6));}else{O-=(L*Y);V-=(R*Y)+(L*(F*0.6));}}}}O-=H;M.style.left=(this.get("maxLabelSize")+O)+"px";M.style.top=V+"px";M.style.MozTransformOrigin="0 0";M.style.MozTransform="rotate("+N+"deg)";M.style.webkitTransformOrigin="0 0";M.style.webkitTransform="rotate("+N+"deg)";M.style.msTransformOrigin="0 0";M.style.msTransform="rotate("+N+"deg)";M.style.OTransformOrigin="0 0";M.style.OTransform="rotate("+N+"deg)";},setSizeAndPosition:function(){var F=this.get("maxLabelSize"),G=this.get("axisRenderer"),H=G.get("styles"),L=G.get("leftTickOffset"),J=F+L,K=G.get("graphic"),I=H.label.margin;if(I&&I.right){J+=I.right;}J=Math.round(J);G.set("width",J);G.get("contentBox").setStyle("width",J);b.one(K.node).setStyle("left",F+I.right);},offsetNodeForTick:function(F){},setCalculatedSize:function(){var H=this.get("axisRenderer"),J=H.get("styles"),I=J.label,K=H.get("leftTickOffset"),G=this.get("maxLabelSize"),F=Math.round(K+G+I.margin.right);H.get("contentBox").setStyle("width",F);H.set("width",F);}});b.LeftAxisLayout=p;function u(F){u.superclass.constructor.apply(this,arguments);}u.ATTRS={axisRenderer:{value:null}};b.extend(u,b.Base,{setTickOffsets:function(){var F=this.get("axisRenderer"),J=F.get("styles").majorTicks,H=J.length,G=H*0.5,I=J.display;F.set("topTickOffset",0);F.set("bottomTickOffset",0);switch(I){case"inside":F.set("leftTickOffset",H);F.set("rightTickOffset",0);break;case"outside":F.set("leftTickOffset",0);F.set("rightTickOffset",H);break;case"cross":F.set("rightTickOffset",G);F.set("leftTickOffset",G);break;default:F.set("leftTickOffset",0);F.set("rightTickOffset",0);break;}},drawTick:function(L,J){var G=this.get("axisRenderer"),H=G.get("styles"),K=H.padding,I=J.length,M={x:K.left,y:L.y},F={x:K.left+I,y:L.y};G.drawLine(M,F,J);},getLineStart:function(){var F=this.get("axisRenderer"),G=F.get("styles"),K=G.padding,L=G.majorTicks,H=L.length,J=L.display,I={x:K.left,y:K.top};if(J==="inside"){I.x+=H;}else{if(J==="cross"){I.x+=H/2;}}return I;},getLabelPoint:function(F){var G=this.get("axisRenderer");return{x:F.x+G.get("rightTickOffset"),y:F.y};},updateMaxLabelSize:function(Q){var K=this.get("axisRenderer"),F=K.get("styles").label,H=Math.min(90,Math.max(-90,F.rotation)),L=Math.abs(H),O=Math.PI/180,R=parseFloat(parseFloat(Math.sin(L*O)).toFixed(8)),I=parseFloat(parseFloat(Math.cos(L*O)).toFixed(8)),N=I,M=H>0?-R:R,J=-M,G=N,P;if(!document.createElementNS){Q.style.filter="progid:DXImageTransform.Microsoft.Matrix(M11="+N+" M12="+M+" M21="+J+" M22="+G+' sizingMethod="auto expand")';this.set("maxLabelSize",Math.max(this.get("maxLabelSize"),Q.offsetWidth));}else{Q.style.msTransform="rotate(0deg)";if(H===0){P=Q.offsetWidth;}else{if(L===90){P=Q.offsetHeight;}else{P=(I*Q.offsetWidth)+(R*Q.offsetHeight);}}this.set("maxLabelSize",Math.max(this.get("maxLabelSize"),P));}},positionLabel:function(M,T){var S=this.get("axisRenderer"),H=S.get("rightTickOffset"),W=S.get("styles").label,P=W.alpha,V,R=0,O=T.x,U=T.y,N=Math.min(Math.max(W.rotation,-90),90),G=Math.abs(N),J=Math.PI/180,Q=parseFloat(parseFloat(Math.sin(G*J)).toFixed(8)),L=parseFloat(parseFloat(Math.cos(G*J)).toFixed(8)),Z=L,Y=N>0?-Q:Q,K=-Y,I=Z,X=Math.round(M.offsetWidth),F=Math.round(M.offsetHeight);if(W.margin&&W.margin.right){R=W.margin.right;}if(!document.createElementNS){M.style.filter=null;if(N===0){U-=F*0.5;}else{if(G===90){U-=X*0.5;}else{if(N>0){U-=(L*(F*0.5));}else{U-=(Q*X)+(L*(F*0.5));}}}O+=R;O+=H;M.style.left=O+"px";M.style.top=U+"px";if(b.Lang.isNumber(P)&&P<1&&P>-1&&!isNaN(P)){V="progid:DXImageTransform.Microsoft.Alpha(Opacity="+Math.round(P*100)+")";}if(N!==0){if(V){V+=" ";}else{V="";}V+="progid:DXImageTransform.Microsoft.Matrix(M11="+Z+" M12="+Y+" M21="+K+" M22="+I+' sizingMethod="auto expand")';
}if(V){M.style.filter=V;}return;}M.style.msTransform="rotate(0deg)";X=Math.round(M.offsetWidth);F=Math.round(M.offsetHeight);if(N===0){U-=F*0.5;}else{if(N===90){O+=F;U-=X*0.5;}else{if(N===-90){U+=X*0.5;}else{if(N<0){U-=(L*(F*0.6));}else{U-=L*(F*0.6);O+=Q*F;}}}}O+=R;O+=H;M.style.left=O+"px";M.style.top=U+"px";M.style.MozTransformOrigin="0 0";M.style.MozTransform="rotate("+N+"deg)";M.style.webkitTransformOrigin="0 0";M.style.webkitTransform="rotate("+N+"deg)";M.style.msTransformOrigin="0 0";M.style.msTransform="rotate("+N+"deg)";M.style.OTransformOrigin="0 0";M.style.OTransform="rotate("+N+"deg)";},setSizeAndPosition:function(){var G=this.get("axisRenderer"),H=G.get("styles").label,F=this.get("maxLabelSize"),J=G.get("rightTickOffset"),I=J+F;if(H.margin&&H.margin.weight){I+=H.margin.weight;}G.set("width",I);G.get("contentBox").setStyle("width",I);},offsetNodeForTick:function(F){var G=this.get("axisRenderer"),I=G.get("leftTickOffset"),H=0-I;F.setStyle("left",H);},setCalculatedSize:function(){var G=this.get("axisRenderer"),H=G.get("styles").label,F=Math.round(G.get("rightTickOffset")+this.get("maxLabelSize")+H.margin.left);G.set("width",F);}});b.RightAxisLayout=u;function A(F){A.superclass.constructor.apply(this,arguments);}A.ATTRS={axisRenderer:{value:null},maxLabelSize:{value:0}};b.extend(A,b.Base,{setTickOffsets:function(){var F=this.get("axisRenderer"),J=F.get("styles").majorTicks,H=J.length,G=H*0.5,I=J.display;F.set("leftTickOffset",0);F.set("rightTickOffset",0);switch(I){case"inside":F.set("topTickOffset",H);F.set("bottomTickOffset",0);break;case"outside":F.set("topTickOffset",0);F.set("bottomTickOffset",H);break;case"cross":F.set("topTickOffset",G);F.set("bottomTickOffset",G);break;default:F.set("topTickOffset",0);F.set("bottomTickOffset",0);break;}},getLineStart:function(){var F=this.get("axisRenderer"),G=F.get("styles"),K=G.padding,L=G.majorTicks,H=L.length,J=L.display,I={x:0,y:K.top};if(J==="inside"){I.y+=H;}else{if(J==="cross"){I.y+=H/2;}}return I;},drawTick:function(L,J){var G=this.get("axisRenderer"),H=G.get("styles"),K=H.padding,I=J.length,M={x:L.x,y:K.top},F={x:L.x,y:I+K.top};G.drawLine(M,F,J);},getLabelPoint:function(F){var G=this.get("axisRenderer");return{x:F.x,y:F.y+G.get("bottomTickOffset")};},updateMaxLabelSize:function(Q){var K=this.get("axisRenderer"),F=K.get("styles").label,H=Math.min(90,Math.max(-90,F.rotation)),L=Math.abs(H),O=Math.PI/180,R=parseFloat(parseFloat(Math.sin(L*O)).toFixed(8)),I=parseFloat(parseFloat(Math.cos(L*O)).toFixed(8)),N=I,M=H>0?-R:R,J=-M,G=N,P;if(!document.createElementNS){Q.style.filter="progid:DXImageTransform.Microsoft.Matrix(M11="+N+" M12="+M+" M21="+J+" M22="+G+' sizingMethod="auto expand")';this.set("maxLabelSize",Math.max(this.get("maxLabelSize"),Q.offsetHeight));}else{Q.style.msTransform="rotate(0deg)";if(H===0){P=Q.offsetHeight;}else{if(L===90){P=Q.offsetWidth;}else{P=(R*Q.offsetWidth)+(I*Q.offsetHeight);}}this.set("maxLabelSize",Math.max(this.get("maxLabelSize"),P));}},positionLabel:function(M,T){var S=this.get("axisRenderer"),H=S.get("bottomTickOffset"),W=S.get("styles").label,P=W.alpha,V,R=0,O=Math.round(T.x),U=Math.round(T.y),N=Math.min(90,Math.max(-90,W.rotation)),G=Math.abs(N),J=Math.PI/180,Q=parseFloat(parseFloat(Math.sin(G*J)).toFixed(8)),L=parseFloat(parseFloat(Math.cos(G*J)).toFixed(8)),Z=L,Y=N>0?-Q:Q,K=-Y,I=Z,X=Math.round(M.offsetWidth),F=Math.round(M.offsetHeight);if(W.margin&&W.margin.top){R=W.margin.top;}if(!document.createElementNS){Z=L;Y=N>0?-Q:Q;K=-Y;I=Z;M.style.filter=null;X=Math.round(M.offsetWidth);F=Math.round(M.offsetHeight);if(G===90){O-=F*0.5;}else{if(N<0){O-=L*X;O-=Q*(F*0.5);}else{if(N>0){O-=Q*(F*0.5);}else{O-=X*0.5;}}}U+=R;U+=H;M.style.left=Math.round(O)+"px";M.style.top=Math.round(U)+"px";if(b.Lang.isNumber(P)&&P<1&&P>-1&&!isNaN(P)){V="progid:DXImageTransform.Microsoft.Alpha(Opacity="+Math.round(P*100)+")";}if(N!==0){if(V){V+=" ";}else{V="";}V+="progid:DXImageTransform.Microsoft.Matrix(M11="+Z+" M12="+Y+" M21="+K+" M22="+I+' sizingMethod="auto expand")';}if(V){M.style.filter=V;}return;}M.style.msTransform="rotate(0deg)";X=Math.round(M.offsetWidth);F=Math.round(M.offsetHeight);if(N===0){O-=X*0.5;}else{if(G===90){if(N===90){O+=F*0.5;}else{U+=X;O-=F*0.5;}}else{if(N<0){O-=(L*X)+(Q*(F*0.6));U+=Q*X;}else{O+=Math.round(Q*(F*0.6));}}}U+=R;U+=H;M.style.left=Math.round(O)+"px";M.style.top=Math.round(U)+"px";M.style.MozTransformOrigin="0 0";M.style.MozTransform="rotate("+N+"deg)";M.style.webkitTransformOrigin="0 0";M.style.webkitTransform="rotate("+N+"deg)";M.style.msTransformOrigin="0 0";M.style.msTransform="rotate("+N+"deg)";M.style.OTransformOrigin="0 0";M.style.OTransform="rotate("+N+"deg)";},setSizeAndPosition:function(){var F=this.get("maxLabelSize"),G=this.get("axisRenderer"),I=G.get("bottomTickLength"),H=G.get("styles"),K=I+F,J=H.label.margin;if(J&&J.top){K+=J.top;}K=Math.round(K);G.set("height",K);},offsetNodeForTick:function(F){var G=this.get("axisRenderer");G.get("contentBox").setStyle("top",0-G.get("topTickOffset"));},setCalculatedSize:function(){var G=this.get("axisRenderer"),H=G.get("styles").label,F=Math.round(G.get("bottomTickOffset")+this.get("maxLabelSize")+H.margin.top);G.set("height",F);}});b.BottomAxisLayout=A;function a(F){a.superclass.constructor.apply(this,arguments);}a.ATTRS={axisRenderer:{value:null},maxLabelSize:{value:0}};b.extend(a,b.Base,{setTickOffsets:function(){var F=this.get("axisRenderer"),J=F.get("styles").majorTicks,H=J.length,G=H*0.5,I=J.display;F.set("leftTickOffset",0);F.set("rightTickOffset",0);switch(I){case"inside":F.set("bottomTickOffset",H);F.set("topTickOffset",0);break;case"outside":F.set("bottomTickOffset",0);F.set("topTickOffset",H);break;case"cross":F.set("topTickOffset",G);F.set("bottomTickOffset",G);break;default:F.set("topTickOffset",0);F.set("bottomTickOffset",0);break;}},getLineStart:function(){var F=this.get("axisRenderer"),G=F.get("styles"),K=G.padding,L=G.majorTicks,H=L.length,J=L.display,I={x:0,y:K.top};if(J==="outside"){I.y+=H;}else{if(J==="cross"){I.y+=H/2;}}return I;
},drawTick:function(L,J){var G=this.get("axisRenderer"),H=G.get("styles"),K=H.padding,I=J.length,M={x:L.x,y:K.top},F={x:L.x,y:I+K.top};G.drawLine(M,F,J);},getLabelPoint:function(G){var F=this.get("axisRenderer");return{x:G.x,y:G.y-F.get("topTickOffset")};},updateMaxLabelSize:function(Q){var K=this.get("axisRenderer"),F=K.get("styles").label,H=Math.min(90,Math.max(-90,F.rotation)),L=Math.abs(H),O=Math.PI/180,R=parseFloat(parseFloat(Math.sin(L*O)).toFixed(8)),I=parseFloat(parseFloat(Math.cos(L*O)).toFixed(8)),N=I,M=H>0?-R:R,J=-M,G=N,P;if(!document.createElementNS){Q.style.filter="progid:DXImageTransform.Microsoft.Matrix(M11="+N+" M12="+M+" M21="+J+" M22="+G+' sizingMethod="auto expand")';this.set("maxLabelSize",Math.max(this.get("maxLabelSize"),Q.offsetHeight));}else{Q.style.msTransform="rotate(0deg)";if(H===0){P=Q.offsetHeight;}else{if(L===90){P=Q.offsetWidth;}else{P=(R*Q.offsetWidth)+(I*Q.offsetHeight);}}this.set("maxLabelSize",Math.max(this.get("maxLabelSize"),P));}},positionLabel:function(M,U){var T=this.get("axisRenderer"),H=T.get("topTickOffset"),X=T.get("styles").label,P=X.alpha,W,S=0,O=U.x,V=U.y,N=Math.max(-90,Math.min(90,X.rotation)),G=Math.abs(N),J=Math.PI/180,R=parseFloat(parseFloat(Math.sin(G*J)).toFixed(8)),L=parseFloat(parseFloat(Math.cos(G*J)).toFixed(8)),aa,Z,K,I,Q=this.get("maxLabelSize"),Y=Math.round(M.offsetWidth),F=Math.round(M.offsetHeight);N=Math.min(90,N);N=Math.max(-90,N);if(X.margin&&X.margin.bottom){S=X.margin.bottom;}if(!document.createElementNS){M.style.filter=null;Y=Math.round(M.offsetWidth);F=Math.round(M.offsetHeight);aa=L;Z=N>0?-R:R;K=-Z;I=aa;if(N===0){O-=Y*0.5;}else{if(G===90){O-=F*0.5;}else{if(N>0){O-=(L*Y)+Math.min((R*F),(N/180*F));V-=(R*Y)+(L*(F));V+=Q;}else{O-=R*(F*0.5);V-=(R*Y)+(L*(F));V+=Q;}}}V-=H;M.style.left=O;M.style.top=V;if(b.Lang.isNumber(P)&&P<1&&P>-1&&!isNaN(P)){W="progid:DXImageTransform.Microsoft.Alpha(Opacity="+Math.round(P*100)+")";}if(N!==0){if(W){W+=" ";}else{W="";}W+="progid:DXImageTransform.Microsoft.Matrix(M11="+aa+" M12="+Z+" M21="+K+" M22="+I+' sizingMethod="auto expand")';}if(W){M.style.filter=W;}return;}M.style.msTransform="rotate(0deg)";Y=Math.round(M.offsetWidth);F=Math.round(M.offsetHeight);if(N===0){O-=Y*0.5;V-=F;}else{if(N===90){O+=F*0.5;V-=Y;}else{if(N===-90){O-=F*0.5;V-=0;}else{if(N<0){O-=(R*(F*0.6));V-=(L*F);}else{O-=(L*Y)-(R*(F*0.6));V-=(R*Y)+(L*F);}}}}V-=H;M.style.left=O+"px";M.style.top=(this.get("maxLabelSize")+V)+"px";M.style.MozTransformOrigin="0 0";M.style.MozTransform="rotate("+N+"deg)";M.style.webkitTransformOrigin="0 0";M.style.webkitTransform="rotate("+N+"deg)";M.style.msTransformOrigin="0 0";M.style.msTransform="rotate("+N+"deg)";M.style.OTransformOrigin="0 0";M.style.OTransform="rotate("+N+"deg)";},setSizeAndPosition:function(){var F=this.get("maxLabelSize"),G=this.get("axisRenderer"),K=G.get("topTickOffset"),H=G.get("styles"),I=H.label.margin,L=G.get("graphic"),J=K+F;if(I&&I.bottom){J+=I.bottom;}G.set("height",J);b.one(L.node).setStyle("top",F+I.bottom);},offsetNodeForTick:function(F){},setCalculatedSize:function(){var G=this.get("axisRenderer"),H=G.get("styles").label,F=Math.round(G.get("topTickOffset")+this.get("maxLabelSize")+H.margin.bottom);G.set("height",F);}});b.TopAxisLayout=a;b.AxisType=b.Base.create("baseAxis",b.Axis,[],{bindUI:function(){this.after("dataReady",b.bind(this._dataChangeHandler,this));this.after("dataUpdate",b.bind(this._dataChangeHandler,this));this.after("minimumChange",b.bind(this._keyChangeHandler,this));this.after("maximumChange",b.bind(this._keyChangeHandler,this));this.after("keysChange",this._keyChangeHandler);this.after("dataProviderChange",this._dataProviderChangeHandler);this.after("stylesChange",this._updateHandler);this.after("positionChange",this._positionChangeHandler);this.after("overlapGraphChange",this._updateHandler);this.after("widthChange",this._handleSizeChange);this.after("heightChange",this._handleSizeChange);this.after("alwaysShowZeroChange",this._keyChangeHandler);this.after("roundingMethodChange",this._keyChangeHandler);},_dataProviderChangeHandler:function(I){var F=this.get("keyCollection").concat(),H=this.get("keys"),G;if(H){for(G in H){if(H.hasOwnProperty(G)){delete H[G];}}}if(F&&F.length){this.set("keys",F);}},GUID:"yuibaseaxis",_type:null,_setMaximum:null,_dataMaximum:null,_setMinimum:null,_data:null,_updateTotalDataFlag:true,_dataReady:false,addKey:function(F){this.set("keys",F);},_getKeyArray:function(I,J){var H=0,K,G=[],F=J.length;for(;H<F;++H){K=J[H];G[H]=K[I];}return G;},_setDataByKey:function(J,K){var I,L,G=[],H=this._dataClone.concat(),F=H.length;for(I=0;I<F;++I){L=H[I];G[I]=L[J];}this.get("keys")[J]=G;this._updateTotalDataFlag=true;},_updateTotalData:function(){var G=this.get("keys"),F;this._data=[];for(F in G){if(G.hasOwnProperty(F)){this._data=this._data.concat(G[F]);}}this._updateTotalDataFlag=false;},removeKey:function(G){var F=this.get("keys");if(F.hasOwnProperty(G)){delete F[G];this._keyChangeHandler();}},getKeyValueAt:function(G,F){var I=NaN,H=this.get("keys");if(H[G]&&H[G][F]){I=H[G][F];}return I;},getDataByKey:function(G){var F=this.get("keys");if(F[G]){return F[G];}return null;},_updateMinAndMax:function(){var K=this.get("data"),G=0,J=0,F,H,I;if(K&&K.length&&K.length>0){F=K.length;G=J=K[0];if(F>1){for(I=1;I<F;I++){H=K[I];if(isNaN(H)){continue;}G=Math.max(H,G);J=Math.min(H,J);}}}this._dataMaximum=G;this._dataMinimum=J;},getTotalMajorUnits:function(){var G,H=this.get("styles").majorUnit,F=this.get("length");if(H.determinant==="count"){G=H.count;}else{if(H.determinant==="distance"){G=(F/H.distance)+1;}}return G;},getMajorUnitDistance:function(F,I,G){var H;if(G.determinant==="count"){H=I/(F-1);}else{if(G.determinant==="distance"){H=G.distance;}}return H;},getEdgeOffset:function(G,F){return 0;},getLabelByIndex:function(J,G){var I=this.get("minimum"),F=this.get("maximum"),K=(F-I)/(G-1),H;G-=1;H=I+(J*K);return H;},_keyChangeHandler:function(F){this._updateMinAndMax();this.fire("dataUpdate");}},{ATTRS:{keys:{value:{},setter:function(J){var H={},G,F,I=this.get("dataProvider");
if(b.Lang.isArray(J)){F=J.length;for(G=0;G<F;++G){H[J[G]]=this._getKeyArray(J[G],I);}}else{if(b.Lang.isString(J)){H=this.get("keys");H[J]=this._getKeyArray(J,I);}else{for(G in J){if(J.hasOwnProperty(G)){H[G]=this._getKeyArray(G,I);}}}}this._updateTotalDataFlag=true;return H;}},roundingMethod:{value:"niceNumber"},type:{readOnly:true,getter:function(){return this._type;}},dataProvider:{setter:function(F){return F;}},dataMaximum:{getter:function(){if(!this._dataMaximum){this._updateMinAndMax();}return this._dataMaximum;}},maximum:{getter:function(){var F=this.get("dataMaximum");if(this.get("setMax")){F=this._setMaximum;}return F;},setter:function(F){this._setMaximum=parseFloat(F);return F;}},dataMinimum:{getter:function(){if(!this._dataMinimum){this._updateMinAndMax();}return this._dataMinimum;}},minimum:{getter:function(){var F=this.get("dataMinimum");if(this.get("setMin")){F=this._setMinimum;}return F;},setter:function(F){this._setMinimum=parseFloat(F);return F;}},setMax:{readOnly:true,getter:function(){return b.Lang.isNumber(this._setMaximum);}},setMin:{readOnly:true,getter:function(){return b.Lang.isNumber(this._setMinimum);}},data:{getter:function(){if(!this._data||this._updateTotalDataFlag){this._updateTotalData();}return this._data;}},keyCollection:{getter:function(){var H=this.get("keys"),G,F=[];for(G in H){if(H.hasOwnProperty(G)){F.push(G);}}return F;},readOnly:true},labelFunction:{value:function(G,F){return G;}}}});function q(F){q.superclass.constructor.apply(this,arguments);}q.NAME="numericAxis";q.ATTRS={alwaysShowZero:{value:true},labelFunction:{value:function(G,F){if(F){return b.DataType.Number.format(G,F);}return G;}},labelFormat:{value:{prefix:"",thousandsSeparator:"",decimalSeparator:"",decimalPlaces:"0",suffix:""}}};b.extend(q,b.AxisType,{_type:"numeric",_getMinimumUnit:function(F,H,G){return this._getNiceNumber(Math.ceil((F-H)/G));},_getNiceNumber:function(H){var J=H,F=Math.ceil(Math.log(J)*0.4342944819032518),I=Math.pow(10,F),G;if(I/2>=J){G=Math.floor((I/2-J)/(Math.pow(10,F-1)/2));J=I/2-G*Math.pow(10,F-1)/2;}else{J=I;}if(!isNaN(J)){return J;}return H;},_updateMinAndMax:function(){var G=this.get("data"),L=0,F=0,J,I,H,M,N=this.get("setMax"),K=this.get("setMin");if(!N&&!K){if(G&&G.length&&G.length>0){J=G.length;L=F=G[0];if(J>1){for(H=1;H<J;H++){I=G[H];if(isNaN(I)){if(b.Lang.isObject(I)){for(M in I){if(I.hasOwnProperty(M)){L=Math.max(I[M],L);F=Math.min(I[M],F);}}}continue;}L=N?this._setMaximum:Math.max(I,L);F=K?this._setMinimum:Math.min(I,F);}}}this._roundMinAndMax(F,L);}},_roundMinAndMax:function(J,S){var M,H,T=J>=0,R=S>0,K,Q,U,I,P,G,O,N=this.getTotalMajorUnits()-1,L=this.get("alwaysShowZero"),V=this.get("roundingMethod"),F=(S-J)/N>=1;if(V){if(V=="niceNumber"){M=this._getMinimumUnit(S,J,N);if(T&&R){if(L||J<M){J=0;}M=this._getMinimumUnit(S,J,N);S=this._roundUpToNearest(S,M);}else{if(R&&!T){I=Math.round(N/((-1*J)/S+1));I=Math.max(Math.min(I,N-1),1);P=N-I;G=Math.ceil(S/I);O=Math.floor(J/P)*-1;M=Math.max(G,O);M=this._getNiceNumber(M);S=M*I;J=M*P*-1;}else{if(L||S===0||S+M>0){S=0;M=this._getMinimumUnit(S,J,N);}else{S=this._roundUpToNearest(S,M);}J=S-(M*N);}}}else{if(V=="auto"){if(T&&R){if(L||J<(S-J)/N){J=0;}M=(S-J)/N;if(F){M=Math.ceil(M);}S=J+(M*N);}else{if(R&&!T){if(L){I=Math.round(N/((-1*J)/S+1));I=Math.max(Math.min(I,N-1),1);P=N-I;if(F){G=Math.ceil(S/I);O=Math.floor(J/P)*-1;}else{G=S/I;O=J/P*-1;}M=Math.max(G,O);S=M*I;J=M*P*-1;}else{M=(S-J)/N;if(F){M=Math.ceil(M);}J=this._roundDownToNearest(J,M);S=this._roundUpToNearest(S,M);}}else{M=(S-J)/N;if(F){M=Math.ceil(M);}if(L||S===0||S+M>0){S=0;M=(S-J)/N;if(F){Math.ceil(M);}}else{S=this._roundUpToNearest(S,M);}J=S-(M*N);}}}else{if(!isNaN(V)&&isFinite(V)){M=V;H=M*N;K=(S-J)>H;U=this._roundDownToNearest(J,M);Q=this._roundUpToNearest(S,M);if(T&&R){if(L||U<=0){J=0;}else{J=U;}if(!K){S=J+H;}else{S=Q;}}else{if(R&&!T){J=U;if(!K){S=J+H;}else{S=Q;}}else{if(S===0||L){S=0;}else{S=Q;}if(!K){J=S-H;}else{J=U;}}}}}}}this._dataMaximum=S;this._dataMinimum=J;},getLabelByIndex:function(J,G){var I=this.get("minimum"),F=this.get("maximum"),K=(F-I)/(G-1),H;G-=1;H=I+(J*K);if(J>0){H=this._roundToNearest(H,K);}return H;},_roundToNearest:function(H,G){G=G||1;if(G===0){return H;}var F=Math.round(this._roundToPrecision(H/G,10))*G;return this._roundToPrecision(F,10);},_roundUpToNearest:function(G,F){F=F||1;if(F===0){return G;}return Math.ceil(this._roundToPrecision(G/F,10))*F;},_roundDownToNearest:function(G,F){F=F||1;if(F===0){return G;}return Math.floor(this._roundToPrecision(G/F,10))*F;},_roundToPrecision:function(H,F){F=F||0;var G=Math.pow(10,F);return Math.round(G*H)/G;}});b.NumericAxis=q;function f(F){f.superclass.constructor.apply(this,arguments);}f.NAME="stackedAxis";b.extend(f,b.NumericAxis,{_updateMinAndMax:function(){var L=0,G=0,K=0,F=0,J=0,H=0,M,I,N=this.get("keys");for(M in N){if(N.hasOwnProperty(M)){J=Math.max(J,N[M].length);}}for(;H<J;++H){K=0;F=0;for(M in N){if(N.hasOwnProperty(M)){I=N[M][H];if(isNaN(I)){continue;}if(I>=0){K+=I;}else{F+=I;}}}if(K>0){L=Math.max(L,K);}else{L=Math.max(L,F);}if(F<0){G=Math.min(G,F);}else{G=Math.min(G,K);}}this._roundMinAndMax(G,L);}});b.StackedAxis=f;function e(F){e.superclass.constructor.apply(this,arguments);}e.NAME="timeAxis";e.ATTRS={setMax:{readOnly:true,getter:function(){var F=this._getNumber(this._setMaximum);return(b.Lang.isNumber(F));}},setMin:{readOnly:true,getter:function(){var F=this._getNumber(this._setMinimum);return(b.Lang.isNumber(F));}},maximum:{getter:function(){var F=this._getNumber(this._setMaximum);if(!b.Lang.isNumber(F)){F=this._getNumber(this.get("dataMaximum"));}return F;},setter:function(F){this._setMaximum=this._getNumber(F);return F;}},minimum:{getter:function(){var F=this._getNumber(this._setMinimum);if(!b.Lang.isNumber(F)){F=this._getNumber(this.get("dataMinimum"));}return F;},setter:function(F){this._setMinimum=this._getNumber(F);return F;}},labelFunction:{value:function(G,F){G=b.DataType.Date.parse(G);if(F){return b.DataType.Date.format(G,{format:F});}return G;}},labelFormat:{value:"%b %d, %y"}};
b.extend(e,b.AxisType,{GUID:"yuitimeaxis",_dataType:"time",getLabelByIndex:function(K,H){var J=this.get("minimum"),G=this.get("maximum"),F=this.get("position"),L,I;H-=1;L=((G-J)/H)*K;if(F=="bottom"||F=="top"){I=J+L;}else{I=G-L;}return I;},_getKeyArray:function(I,J){var K,G=[],H=0,L,F=J.length;for(;H<F;++H){K=J[H][I];if(b.Lang.isDate(K)){L=K.valueOf();}else{if(!b.Lang.isNumber(K)){L=new Date(K.toString()).valueOf();}else{L=K;}}G[H]=L;}return G;},_setDataByKey:function(J,K){var L,G=[],I=this._dataClone.concat(),H,M,F=I.length;for(H=0;H<F;++H){L=I[H][J];if(b.Lang.isDate(L)){M=L.valueOf();}else{if(!b.Lang.isNumber(L)){M=new Date(L.toString()).valueOf();}else{M=L;}}G[H]=M;}this.get("keys")[J]=G;this._updateTotalDataFlag=true;},_getNumber:function(F){if(b.Lang.isDate(F)){F=F.valueOf();}else{if(!b.Lang.isNumber(F)&&F){F=new Date(F.toString()).valueOf();}}return F;}});b.TimeAxis=e;function h(F){h.superclass.constructor.apply(this,arguments);}h.NAME="categoryAxis";b.extend(h,b.AxisType,{_indices:null,GUID:"yuicategoryaxis",_type:"category",_updateMinAndMax:function(){this._dataMaximum=Math.max(this.get("data").length-1,0);this._dataMinimum=0;},_getKeyArray:function(I,J){var H=0,K,G=[],L=[],F=J.length;if(!this._indices){this._indices={};}for(;H<F;++H){K=J[H];G[H]=H;L[H]=K[I];}this._indices[I]=G;return L;},_setDataByKey:function(J){var I,K,G=[],L=[],H=this._dataClone.concat(),F=H.length;if(!this._indices){this._indices={};}for(I=0;I<F;++I){K=H[I];G[I]=I;L[I]=K[J];}this._indices[J]=G;this.get("keys")[J]=L.concat();this._updateTotalDataFlag=true;},getDataByKey:function(G){if(!this._indices){this.get("keys");}var F=this._indices;if(F[G]){return F[G];}return null;},getTotalMajorUnits:function(G,F){return this.get("data").length;},getMajorUnitDistance:function(F,I,G){var H;if(G.determinant==="count"){H=I/F;}else{if(G.determinant==="distance"){H=G.distance;}}return H;},getEdgeOffset:function(G,F){return F/G;},getLabelByIndex:function(I,G){var H,J=this.get("data"),F=this.get("position");if(F=="bottom"||F=="top"){H=J[I];}else{H=J[G-(I+1)];}return H;}});b.CategoryAxis=h;function o(){}o.prototype={getCurveControlPoints:function(I,L){var J=[],H=1,G=I.length-1,F=[],K=[];if(G<1){return null;}J[0]={startx:I[0],starty:L[0],endx:I[1],endy:L[1]};if(G===1){J[0].ctrlx1=(2*I[0]+I[1])/3;J[0].ctrly2=(2*L[0]+L[1])/3;J[0].ctrlx2=2*J[0].ctrlx1-I[0];J[0].ctrly2=2*J[0].ctrly1-L[0];return J;}for(;H<G;++H){J.push({startx:Math.round(I[H]),starty:Math.round(L[H]),endx:Math.round(I[H+1]),endy:Math.round(L[H+1])});F[H]=4*I[H]+2*I[H+1];K[H]=4*L[H]+2*L[H+1];}F[0]=I[0]+(2*I[1]);F[G-1]=(8*I[G-1]+I[G])/2;F=this.getControlPoints(F.concat());K[0]=L[0]+(2*L[1]);K[G-1]=(8*L[G-1]+L[G])/2;K=this.getControlPoints(K.concat());for(H=0;H<G;++H){J[H].ctrlx1=Math.round(F[H]);J[H].ctrly1=Math.round(K[H]);if(H<G-1){J[H].ctrlx2=Math.round(2*I[H+1]-F[H+1]);J[H].ctrly2=Math.round(2*L[H+1]-K[H+1]);}else{J[H].ctrlx2=Math.round((I[G]+F[G-1])/2);J[H].ctrly2=Math.round((L[G]+K[G-1])/2);}}return J;},getControlPoints:function(K){var H=K.length,G=[],J=[],F=2,I=1;G[0]=K[0]/F;for(;I<H;++I){J[I]=1/F;F=(I<H-1?4:3.5)-J[I];G[I]=(K[I]-G[I-1])/F;}for(I=1;I<H;++I){G[H-I-1]-=J[H-I]*G[H-I];}return G;}};b.CurveUtil=o;function l(){}l.prototype={_stackCoordinates:function(){var P=this.get("direction"),H=this.get("order"),N=this.get("type"),Q=this.get("graph"),K=Q.get("height"),G=Q.seriesTypes[N],J=0,M,O=this.get("xcoords"),I=this.get("ycoords"),L,F;if(H===0){return;}L=G[H-1].get("xcoords").concat();F=G[H-1].get("ycoords").concat();if(P==="vertical"){M=L.length;for(;J<M;++J){if(!isNaN(L[J])&&!isNaN(O[J])){O[J]+=L[J];}}}else{M=F.length;for(;J<M;++J){if(!isNaN(F[J])&&!isNaN(I[J])){I[J]=F[J]-(K-I[J]);}}}}};b.StackingUtil=l;function k(){}k.prototype={_lineDefaults:null,_getGraphic:function(){var F=this.get("graph");if(!this._lineGraphic){this._lineGraphic=new b.Graphic();this._lineGraphic.render(F.get("contentBox"));}this._lineGraphic.clear();this._lineGraphic.setSize(F.get("width"),F.get("height"));this.autoSize=false;return this._lineGraphic;},drawLines:function(){if(this.get("xcoords").length<1){return;}var N=this.get("xcoords").concat(),aa=this.get("ycoords").concat(),W=this.get("direction"),S=W==="vertical"?aa.length:N.length,H,G,Z=H,X=G,V,T,R,J=this.get("styles").line,U=J.lineType,P=J.color||this._getDefaultColor(this.get("graphOrder"),"line"),O=J.alpha,Y=J.dashLength,L=J.gapSpace,K=J.connectDiscontinuousPoints,F=J.discontinuousType,I=J.discontinuousDashLength,Q=J.discontinuousGapSpace,M=this._getGraphic();H=Z=N[0];G=X=aa[0];M.lineStyle(J.weight,P,O);M.moveTo(H,G);for(R=1;R<S;R=++R){V=N[R];T=aa[R];if(isNaN(T)){Z=V;X=T;continue;}if(Z==H){if(U!="dashed"){M.lineTo(V,T);}else{this.drawDashedLine(Z,X,V,T,Y,L);}}else{if(!K){M.moveTo(V,T);}else{if(F!="solid"){this.drawDashedLine(Z,X,V,T,I,Q);}else{M.lineTo(V,T);}}}H=Z=V;G=X=T;}M.end();},drawSpline:function(){if(this.get("xcoords").length<1){return;}var Q=this.get("xcoords"),K=this.get("ycoords"),S=this.getCurveControlPoints(Q,K),L=S.length,N,M,H,G,R,P,J=0,T=this.get("styles").line,F=this._getGraphic(),O=T.alpha,I=T.color||this._getDefaultColor(this.get("graphOrder"),"line");F.lineStyle(T.weight,I,O);F.moveTo(Q[0],K[0]);for(;J<L;J=++J){R=S[J].endx;P=S[J].endy;N=S[J].ctrlx1;M=S[J].ctrlx2;H=S[J].ctrly1;G=S[J].ctrly2;F.curveTo(N,H,M,G,R,P);}F.end();},drawDashedLine:function(Q,U,G,S,I,H){I=I||10;H=H||10;var K=I+H,N=G-Q,R=S-U,T=Math.sqrt(Math.pow(N,2)+Math.pow(R,2)),L=Math.floor(Math.abs(T/K)),J=Math.atan2(R,N),P=Q,O=U,M,F=this._getGraphic();N=Math.cos(J)*K;R=Math.sin(J)*K;for(M=0;M<L;++M){F.moveTo(P,O);F.lineTo(P+Math.cos(J)*I,O+Math.sin(J)*I);P+=N;O+=R;}F.moveTo(P,O);T=Math.sqrt((G-P)*(G-P)+(S-O)*(S-O));if(T>I){F.lineTo(P+Math.cos(J)*I,O+Math.sin(J)*I);}else{if(T>0){F.lineTo(P+Math.cos(J)*T,O+Math.sin(J)*T);}}F.moveTo(G,S);},_getLineDefaults:function(){return{alpha:1,weight:6,lineType:"solid",dashLength:10,gapSpace:10,connectDiscontinuousPoints:true,discontinuousType:"solid",discontinuousDashLength:10,discontinuousGapSpace:10};}};b.augment(k,b.Attribute);
b.Lines=k;function C(F){var G={area:{getter:function(){return this._defaults||this._getAreaDefaults();},setter:function(I){var H=this._defaults||this._getAreaDefaults();this._defaults=b.merge(H,I);}}};this.addAttrs(G,F);this.get("styles");}C.prototype={drawFill:function(O,K){if(O.length<1){return;}var N=O.length,H=O[0],G=K[0],M=H,L=G,R,Q,J=1,P=this.get("styles").area,F=this.get("graphic"),I=P.color||this._getDefaultColor(this.get("graphOrder"),"slice");F.clear();F.beginFill(I,P.alpha);F.moveTo(H,G);for(;J<N;J=++J){R=O[J];Q=K[J];if(isNaN(Q)){M=R;L=Q;continue;}F.lineTo(R,Q);M=R;L=Q;}F.end();},drawAreaSpline:function(){if(this.get("xcoords").length<1){return;}var R=this.get("xcoords"),M=this.get("ycoords"),T=this.getCurveControlPoints(R,M),N=T.length,P,O,J,I,S,Q,L=0,H=R[0],G=M[0],U=this.get("styles").area,F=this.get("graphic"),K=U.color||this._getDefaultColor(this.get("graphOrder"),"slice");F.beginFill(K,U.alpha);F.moveTo(H,G);for(;L<N;L=++L){S=T[L].endx;Q=T[L].endy;P=T[L].ctrlx1;O=T[L].ctrlx2;J=T[L].ctrly1;I=T[L].ctrly2;F.curveTo(P,J,O,I,S,Q);}if(this.get("direction")==="vertical"){F.lineTo(this._leftOrigin,Q);F.lineTo(this._leftOrigin,G);}else{F.lineTo(S,this._bottomOrigin);F.lineTo(H,this._bottomOrigin);}F.lineTo(H,G);F.end();},drawStackedAreaSpline:function(){if(this.get("xcoords").length<1){return;}var Q=this.get("xcoords"),aa=this.get("ycoords"),O,V=this.get("order"),H=this.get("type"),F=this.get("graph"),I=F.seriesTypes[H],G,T,X,S,R,Z,Y,M,K,W=0,N,L,J=this.get("styles").area,P=this.get("graphic"),U=J.color||this._getDefaultColor(this.get("graphOrder"),"slice");N=Q[0];L=aa[0];O=this.getCurveControlPoints(Q,aa);X=O.length;P.beginFill(U,J.alpha);P.moveTo(N,L);for(;W<X;W=++W){M=O[W].endx;K=O[W].endy;S=O[W].ctrlx1;R=O[W].ctrlx2;Z=O[W].ctrly1;Y=O[W].ctrly2;P.curveTo(S,Z,R,Y,M,K);}if(V>0){G=I[V-1].get("xcoords").concat().reverse();T=I[V-1].get("ycoords").concat().reverse();O=this.getCurveControlPoints(G,T);W=0;X=O.length;P.lineTo(G[0],T[0]);for(;W<X;W=++W){M=O[W].endx;K=O[W].endy;S=O[W].ctrlx1;R=O[W].ctrlx2;Z=O[W].ctrly1;Y=O[W].ctrly2;P.curveTo(S,Z,R,Y,M,K);}}else{if(this.get("direction")==="vertical"){P.lineTo(this._leftOrigin,aa[aa.length-1]);P.lineTo(this._leftOrigin,L);}else{P.lineTo(Q[Q.length-1],this._bottomOrigin);P.lineTo(N,this._bottomOrigin);}}P.lineTo(N,L);P.end();},_defaults:null,_getClosingPoints:function(){var F=this.get("xcoords").concat(),G=this.get("ycoords").concat();if(this.get("direction")==="vertical"){F.push(this._leftOrigin);F.push(this._leftOrigin);G.push(G[G.length-1]);G.push(G[0]);}else{F.push(F[F.length-1]);F.push(F[0]);G.push(this._bottomOrigin);G.push(this._bottomOrigin);}F.push(F[0]);G.push(G[0]);return[F,G];},_getStackedClosingPoints:function(){var J=this.get("order"),M=this.get("type"),P=this.get("graph"),N=this.get("direction"),H=P.seriesTypes[M],L,I,O=this.get("xcoords").concat(),K=this.get("ycoords").concat(),G=O[0],F=K[0];if(J>0){L=H[J-1].get("xcoords").concat();I=H[J-1].get("ycoords").concat();O=O.concat(L.concat().reverse());K=K.concat(I.concat().reverse());O.push(O[0]);K.push(K[0]);}else{if(N==="vertical"){O.push(this._leftOrigin);O.push(this._leftOrigin);K.push(K[K.length-1]);K.push(F);}else{O.push(O[O.length-1]);O.push(G);K.push(this._bottomOrigin);K.push(this._bottomOrigin);}}return[O,K];},_getAreaDefaults:function(){return{};}};b.augment(C,b.Attribute);b.Fills=C;function B(F){var G={markers:{getter:function(){return this._markers;}}};this.addAttrs(G,F);}B.prototype={_plotDefaults:null,drawPlots:function(){if(!this.get("xcoords")||this.get("xcoords").length<1){return;}var I=b.clone(this.get("styles").marker),V=I.width,O=I.height,U=this.get("xcoords"),M=this.get("ycoords"),N=0,P=U.length,T=M[0],K,L,Q=V/2,J=O/2,S=null,R=null,G=this.get("graphOrder"),H,F=g;if(b.Lang.isArray(I.fill.color)){S=I.fill.color.concat();}if(b.Lang.isArray(I.border.color)){R=I.border.colors.concat();}this._createMarkerCache();if(F){this._createHotspotCache();}for(;N<P;++N){T=(M[N]-J);K=(U[N]-Q);if(!T||!K||T===undefined||K===undefined||T=="undefined"||K=="undefined"||isNaN(T)||isNaN(K)){this._markers.push(null);this._graphicNodes.push(null);continue;}if(S){I.fill.color=S[N%S.length];}if(R){I.border.colors=R[N%R.length];}L=this.getMarker(I,G,N);L.setPosition(K,T);if(F){H=this.getHotspot(I,G,N);H.setPosition(K,T);H.parentNode.style.zIndex=5;}}this._clearMarkerCache();if(F){this._clearHotspotCache();}},_getPlotDefaults:function(){var F={fill:{type:"solid",alpha:1,colors:null,alphas:null,ratios:null},border:{weight:1,alpha:1},width:10,height:10,shape:"circle"};F.fill.color=this._getDefaultColor(this.get("graphOrder"),"fill");F.border.color=this._getDefaultColor(this.get("graphOrder"),"border");return F;},_markers:null,_markerCache:null,getMarker:function(I,F,H){var G;if(this._markerCache.length>0){while(!G){if(this._markerCache.length<1){G=this._createMarker(I,F,H);break;}G=this._markerCache.shift();}G.update(I);}else{G=this._createMarker(I,F,H);}this._markers.push(G);this._graphicNodes.push(G.parentNode);return G;},_createMarker:function(J,F,I){var K=new b.Graphic(),H,G=b.clone(J);K.render(this.get("graph").get("contentBox"));K.node.setAttribute("id","markerParent_"+F+"_"+I);G.graphic=K;H=new b.Shape(G);H.addClass("yui3-seriesmarker");H.node.setAttribute("id","series_"+F+"_"+I);return H;},_createMarkerCache:function(){if(this._markers&&this._markers.length>0){this._markerCache=this._markers.concat();}else{this._markerCache=[];}this._markers=[];this._graphicNodes=[];},_clearMarkerCache:function(){var F=this._markerCache.length,H=0,I,G;for(;H<F;++H){G=this._markerCache[H];if(G){I=G.graphics;I.destroy();}}this._markerCache=[];},updateMarkerState:function(M,J){if(this._markers[J]){var O,L,G,P=b.clone(this.get("styles").marker),F=this._getState(M),N=this.get("xcoords"),I=this.get("ycoords"),H=this._markers[J],K=H.parentNode;G=F=="off"||!P[F]?P:P[F];G.fill.color=this._getItemColor(G.fill.color,J);G.border.color=this._getItemColor(G.border.color,J);H.update(G);O=G.width;L=G.height;K.style.left=(N[J]-O/2)+"px";
K.style.top=(I[J]-L/2)+"px";H.toggleVisible(this.get("visible"));}},_getItemColor:function(G,F){if(b.Lang.isArray(G)){return G[F%G.length];}return G;},_setStyles:function(F){F=this._parseMarkerStyles(F);return b.Renderer.prototype._setStyles.apply(this,[F]);},_parseMarkerStyles:function(G){if(G.marker){var F=this._getPlotDefaults();G.marker=this._mergeStyles(G.marker,F);if(G.marker.over){G.marker.over=this._mergeStyles(G.marker.over,G.marker);}if(G.marker.down){G.marker.down=this._mergeStyles(G.marker.down,G.marker);}}return G;},_getState:function(F){var G;switch(F){case"mouseout":G="off";break;case"mouseover":G="over";break;case"mouseup":G="over";break;case"mousedown":G="down";break;}return G;},_stateSyles:null,_hotspots:null,_hotspotCache:null,getHotspot:function(G,F,H){var J,I=b.clone(G);I.fill={type:"solid",color:"#000",alpha:0};I.border={weight:0};if(this._hotspotCache.length>0){while(!J){if(this._hotspotCache.length<1){J=this._createHotspot(I,F,H);break;}J=this._hotspotCache.shift();}J.update(I);}else{J=this._createHotspot(I,F,H);}this._hotspots.push(J);return J;},_createHotspot:function(J,F,H){var K=new b.Graphic(),I,G=b.clone(J);K.render(this.get("graph").get("contentBox"));K.node.setAttribute("id","hotspotParent_"+F+"_"+H);G.graphic=K;I=new b.Shape(G);I.addClass("yui3-seriesmarker");I.node.setAttribute("id","hotspot_"+F+"_"+H);return I;},_createHotspotCache:function(){if(this._hotspots&&this._hotspots.length>0){this._hotspotCache=this._hotspots.concat();}else{this._hotspotCache=[];}this._hotspots=[];},_clearHotspotCache:function(){var F=this._hotspotCache.length,G=0,I,H;for(;G<F;++G){H=this._hotspotCache[G];if(H){I=H.graphics;I.destroy();}}this._hotspotCache=[];}};b.augment(B,b.Attribute);b.Plots=B;function D(){}D.prototype={drawSeries:function(){if(this.get("xcoords").length<1){return;}var ad=b.clone(this.get("styles").marker),ae,X,U=this.get("xcoords"),ag=this.get("ycoords"),aa=0,ab=U.length,V=ag[0],I=this.get("type"),H=this.get("graph"),P=H.seriesTypes[I],ac=P.length,S=0,T=0,L=0,O,Y,Z=this.get("order"),R=this.get("graphOrder"),K,N,W,J,af,G=null,M=null,Q,F=g;if(b.Lang.isArray(ad.fill.color)){G=ad.fill.color.concat();}if(b.Lang.isArray(ad.border.color)){M=ad.border.colors.concat();}if(this.get("direction")=="vertical"){W="height";J="width";}else{W="width";J="height";}ae=ad[W];X=ad[J];this._createMarkerCache();if(F){this._createHotspotCache();}for(;aa<ac;++aa){Y=P[aa];S+=Y.get("styles").marker[W];if(Z>aa){L=S;}}T=ab*S;if(T>H.get(W)){O=H.get(W)/T;S*=O;L*=O;ae*=O;ae=Math.max(ae,1);}L-=S/2;for(aa=0;aa<ab;++aa){af=this._getMarkerDimensions(U[aa],ag[aa],X,L);V=af.top;X=af.calculatedSize;K=af.left;ad[W]=ae;ad[J]=X;if(G){ad.fill.color=G[aa%G.length];}if(M){ad.border.colors=M[aa%M.length];}N=this.getMarker(ad,R,aa);N.setPosition(K,V);if(F){Q=this.getHotspot(ad,R,aa);Q.setPosition(K,V);Q.parentNode.style.zIndex=5;}}this._clearMarkerCache();if(F){this._clearHotspotCache();}},_defaultFillColors:["#66007f","#a86f41","#295454","#996ab2","#e8cdb7","#90bdbd","#000000","#c3b8ca","#968373","#678585"],_getPlotDefaults:function(){var F={fill:{type:"solid",alpha:1,colors:null,alphas:null,ratios:null},border:{weight:0,alpha:1},width:12,height:12,shape:"rect",padding:{top:0,left:0,right:0,bottom:0}};F.fill.color=this._getDefaultColor(this.get("graphOrder"),"fill");F.border.color=this._getDefaultColor(this.get("graphOrder"),"border");return F;}};b.Histogram=D;b.CartesianSeries=b.Base.create("cartesianSeries",b.Base,[b.Renderer],{_xDisplayName:null,_yDisplayName:null,_leftOrigin:null,_bottomOrigin:null,render:function(){this._setCanvas();this.addListeners();this.set("rendered",true);this.validate();},addListeners:function(){var G=this.get("xAxis"),F=this.get("yAxis");if(G){G.after("dataReady",b.bind(this._xDataChangeHandler,this));G.after("dataUpdate",b.bind(this._xDataChangeHandler,this));}if(F){F.after("dataReady",b.bind(this._yDataChangeHandler,this));F.after("dataUpdate",b.bind(this._yDataChangeHandler,this));}this.after("xAxisChange",this._xAxisChangeHandler);this.after("yAxisChange",this._yAxisChangeHandler);this.after("stylesChange",function(I){var H=this._updateAxisData();if(H){this.draw();}});this.after("widthChange",function(I){var H=this._updateAxisData();if(H){this.draw();}});this.after("heightChange",function(I){var H=this._updateAxisData();if(H){this.draw();}});this.after("visibleChange",this._toggleVisible);},_xAxisChangeHandler:function(G){var F=this.get("xAxis");F.after("dataReady",b.bind(this._xDataChangeHandler,this));F.after("dataUpdate",b.bind(this._xDataChangeHandler,this));},_yAxisChangeHandler:function(G){var F=this.get("yAxis");F.after("dataReady",b.bind(this._yDataChangeHandler,this));F.after("dataUpdate",b.bind(this._yDataChangeHandler,this));},GUID:"yuicartesianseries",_xDataChangeHandler:function(F){var G=this._updateAxisData();if(G){this.draw();}},_yDataChangeHandler:function(F){var G=this._updateAxisData();if(G){this.draw();}},_updateAxisData:function(){var J=this.get("xAxis"),G=this.get("yAxis"),H=this.get("xKey"),F=this.get("yKey"),I,K;if(!J||!G||!H||!F){return false;}K=J.getDataByKey(H);I=G.getDataByKey(F);if(!K||!I){return false;}this.set("xData",K.concat());this.set("yData",I.concat());return true;},validate:function(){if((this.get("xData")&&this.get("yData"))||this._updateAxisData()){this.draw();}},_setCanvas:function(){this.set("graphic",new b.Graphic());this.get("graphic").render(this.get("graph").get("contentBox"));},setAreaData:function(){var ah,af,J=this.get("graph"),S=J.get("width"),ab=J.get("height"),Q=this.get("xAxis"),G=this.get("yAxis"),L=this.get("xData").concat(),ad=this.get("yData").concat(),ak=Q.getEdgeOffset(L.length,S),P=G.getEdgeOffset(ad.length,ab),V=this.get("styles").padding,Y=V.left,ae=V.top,N=S-(Y+V.right+ak),aa=ab-(ae+V.bottom+P),W=[],aj=[],ai=Q.get("maximum"),ac=Q.get("minimum"),I=G.get("maximum"),F=G.get("minimum"),M=N/(ai-ac),T=aa/(I-F),O,ag=this.get("direction"),Z=0,R=[],X=[],K=this.get("xMarkerPlaneOffset"),H=this.get("yMarkerPlaneOffset"),U=this.get("graphic");
O=L.length;ak*=0.5;P*=0.5;if(ag==="vertical"){ad=ad.reverse();}if(U){U.setSize(S,ab);}this._leftOrigin=Math.round(((0-ac)*M)+Y+ak);this._bottomOrigin=Math.round((aa+ae+P)-(0-F)*T);for(;Z<O;++Z){ah=Math.round((((L[Z]-ac)*M)+Y+ak));af=Math.round(((aa+ae+P)-(ad[Z]-F)*T));W.push(ah);aj.push(af);R.push({start:ah-K,end:ah+K});X.push({start:af-H,end:af+H});}this.set("xcoords",W);this.set("ycoords",aj);this.set("xMarkerPlane",R);this.set("yMarkerPlane",X);},draw:function(){var H=this.get("graph"),F=H.get("width"),G=H.get("height");if(this.get("rendered")){if((isFinite(F)&&isFinite(G)&&F>0&&G>0)&&((this.get("xData")&&this.get("yData"))||this._updateAxisData())){if(this._drawing){this._callLater=true;return;}this._drawing=true;this._callLater=false;this.setAreaData();if(this.get("xcoords")&&this.get("ycoords")){this.drawSeries();}this._drawing=false;if(this._callLater){this.draw();}else{this._toggleVisible(this.get("visible"));this.fire("drawingComplete");}}}},_defaultPlaneOffset:4,_getDefaultStyles:function(){return{padding:{top:0,left:0,right:0,bottom:0}};},_defaultLineColors:["#426ab3","#d09b2c","#000000","#b82837","#b384b5","#ff7200","#779de3","#cbc8ba","#7ed7a6","#007a6c"],_defaultFillColors:["#6084d0","#eeb647","#6c6b5f","#d6484f","#ce9ed1","#ff9f3b","#93b7ff","#e0ddd0","#94ecba","#309687"],_defaultBorderColors:["#205096","#b38206","#000000","#94001e","#9d6fa0","#e55b00","#5e85c9","#adab9e","#6ac291","#006457"],_defaultSliceColors:["#66007f","#a86f41","#295454","#996ab2","#e8cdb7","#90bdbd","#000000","#c3b8ca","#968373","#678585"],_getDefaultColor:function(I,J){var G={line:this._defaultLineColors,fill:this._defaultFillColors,border:this._defaultBorderColors,slice:this._defaultSliceColors},H=G[J],F=H.length;I=I||0;if(I>=F){I=I%F;}J=J||"fill";return G[J][I];},_toggleVisible:function(I){var L=this.get("graphic"),K=this.get("markers"),H=0,F,J=this.get("visible"),G;if(L){L.toggleVisible(J);}if(K){F=K.length;for(;H<F;++H){G=K[H];if(G){G.toggleVisible(J);}}}if(this._lineGraphic){this._lineGraphic.toggleVisible(J);}}},{ATTRS:{xDisplayName:{getter:function(){return this._xDisplayName||this.get("xKey");},setter:function(F){this._xDisplayName=F;return F;}},yDisplayName:{getter:function(){return this._yDisplayName||this.get("yKey");},setter:function(F){this._yDisplayName=F;return F;}},categoryDisplayName:{readOnly:true,getter:function(){return this.get("direction")=="vertical"?this.get("yDisplayName"):this.get("xDisplayName");}},valueDisplayName:{readOnly:true,getter:function(){return this.get("direction")=="vertical"?this.get("xDisplayName"):this.get("yDisplayName");}},type:{value:"cartesian"},order:{},graphOrder:{},xcoords:{},ycoords:{},graph:{},xAxis:{},yAxis:{},xKey:{},yKey:{},xData:{},yData:{},rendered:{value:false},width:{readOnly:true,getter:function(){this.get("graph").get("width");}},height:{readOnly:true,getter:function(){this.get("graph").get("height");}},visible:{value:true},xMarkerPlane:{},yMarkerPlane:{},xMarkerPlaneOffset:{getter:function(){var F=this.get("styles").marker;if(F&&F.width&&isFinite(F.width)){return F.width*0.5;}return this._defaultPlaneOffset;}},yMarkerPlaneOffset:{getter:function(){var F=this.get("styles").marker;if(F&&F.height&&isFinite(F.height)){return F.height*0.5;}return this._defaultPlaneOffset;}},direction:{value:"horizontal"}}});b.MarkerSeries=b.Base.create("markerSeries",b.CartesianSeries,[b.Plots],{renderUI:function(){this._setNode();},drawSeries:function(){this.drawPlots();},_setStyles:function(F){if(!F.marker){F={marker:F};}F=this._parseMarkerStyles(F);return b.MarkerSeries.superclass._mergeStyles.apply(this,[F,this._getDefaultStyles()]);},_getDefaultStyles:function(){var F=this._mergeStyles({marker:this._getPlotDefaults()},b.MarkerSeries.superclass._getDefaultStyles());return F;}},{ATTRS:{type:{value:"marker"}}});b.LineSeries=b.Base.create("lineSeries",b.CartesianSeries,[b.Lines],{drawSeries:function(){this.get("graphic").clear();this.drawLines();},_setStyles:function(F){if(!F.line){F={line:F};}return b.LineSeries.superclass._setStyles.apply(this,[F]);},_getDefaultStyles:function(){var F=this._mergeStyles({line:this._getLineDefaults()},b.LineSeries.superclass._getDefaultStyles());return F;}},{ATTRS:{type:{value:"line"}}});b.SplineSeries=b.Base.create("splineSeries",b.CartesianSeries,[b.CurveUtil,b.Lines],{drawSeries:function(){this.get("graphic").clear();this.drawSpline();}},{ATTRS:{type:{value:"spline"}}});b.AreaSplineSeries=b.Base.create("areaSplineSeries",b.CartesianSeries,[b.Fills,b.CurveUtil],{drawSeries:function(){this.get("graphic").clear();this.drawAreaSpline();}},{ATTRS:{type:{value:"areaSpline"}}});b.StackedSplineSeries=b.Base.create("stackedSplineSeries",b.SplineSeries,[b.StackingUtil],{setAreaData:function(){b.StackedSplineSeries.superclass.setAreaData.apply(this);this._stackCoordinates.apply(this);}},{ATTRS:{type:{value:"stackedSpline"}}});b.StackedMarkerSeries=b.Base.create("stackedMarkerSeries",b.MarkerSeries,[b.StackingUtil],{setAreaData:function(){b.StackedMarkerSeries.superclass.setAreaData.apply(this);this._stackCoordinates.apply(this);}},{ATTRS:{type:{value:"stackedMarker"}}});b.ColumnSeries=b.Base.create("columnSeries",b.MarkerSeries,[b.Histogram],{_getMarkerDimensions:function(G,F,I,J){var H={top:F,left:G+J};H.calculatedSize=this._bottomOrigin-H.top;return H;},updateMarkerState:function(S,O){if(this._markers[O]){var V=b.clone(this.get("styles").marker),G,F=this._getState(S),T=this.get("xcoords"),N=this.get("ycoords"),P=this._markers[O],U=this.get("graph"),K=U.seriesTypes[this.get("type")],M=K.length,R=0,L=0,Q,H=0,J=[],I=this.get("order");G=F=="off"||!V[F]?V:V[F];G.fill.color=this._getItemColor(G.fill.color,O);G.border.color=this._getItemColor(G.border.color,O);G.height=this._bottomOrigin-N[O];P.update(G);for(;H<M;++H){Q=K[H].get("markers")[O];J[H]=T[O]+R;R+=Q.width;if(I>H){L=R;}L-=R/2;}for(H=0;H<M;++H){Q=b.one(K[H]._graphicNodes[O]);Q.setStyle("left",(J[H]-R/2)+"px");}}}},{ATTRS:{type:{value:"column"}}});b.BarSeries=b.Base.create("barSeries",b.MarkerSeries,[b.Histogram],{renderUI:function(){this._setNode();
},_getMarkerDimensions:function(G,F,I,J){var H={top:F+J,left:this._leftOrigin};H.calculatedSize=G-H.left;return H;},updateMarkerState:function(R,N){if(this._markers[N]){var V=b.clone(this.get("styles").marker),G,F=this._getState(R),S=this.get("xcoords"),M=this.get("ycoords"),O=this._markers[N],U=this.get("graph"),J=U.seriesTypes[this.get("type")],L=J.length,Q=0,K=0,P,H=0,T=[],I=this.get("order");G=F=="off"||!V[F]?V:V[F];G.fill.color=this._getItemColor(G.fill.color,N);G.border.color=this._getItemColor(G.border.color,N);G.width=(S[N]-this._leftOrigin);O.update(G);for(;H<L;++H){P=J[H].get("markers")[N];T[H]=M[N]+Q;Q+=P.height;if(I>H){K=Q;}K-=Q/2;}for(H=0;H<L;++H){P=b.one(J[H]._graphicNodes[N]);P.setStyle("top",(T[H]-Q/2));}}}},{ATTRS:{type:{value:"bar"},direction:{value:"vertical"}}});b.AreaSeries=b.Base.create("areaSeries",b.CartesianSeries,[b.Fills],{drawSeries:function(){this.get("graphic").clear();this.drawFill.apply(this,this._getClosingPoints());},_setStyles:function(F){if(!F.area){F={area:F};}return b.AreaSeries.superclass._setStyles.apply(this,[F]);},_getDefaultStyles:function(){var F=this._mergeStyles({area:this._getAreaDefaults()},b.AreaSeries.superclass._getDefaultStyles());return F;}},{ATTRS:{type:{value:"area"}}});b.StackedAreaSplineSeries=b.Base.create("stackedAreaSplineSeries",b.AreaSeries,[b.CurveUtil,b.StackingUtil],{drawSeries:function(){this.get("graphic").clear();this._stackCoordinates();this.drawStackedAreaSpline();}},{ATTRS:{type:{value:"stackedAreaSpline"}}});b.ComboSeries=b.Base.create("comboSeries",b.CartesianSeries,[b.Fills,b.Lines,b.Plots],{drawSeries:function(){this.get("graphic").clear();if(this.get("showAreaFill")){this.drawFill.apply(this,this._getClosingPoints());}if(this.get("showLines")){this.drawLines();}if(this.get("showMarkers")){this.drawPlots();}},_getDefaultStyles:function(){var F=b.ComboSeries.superclass._getDefaultStyles();F.line=this._getLineDefaults();F.marker=this._getPlotDefaults();F.area=this._getAreaDefaults();return F;}},{ATTRS:{type:{value:"combo"},showAreaFill:{value:false},showLines:{value:true},showMarkers:{value:true},marker:{lazyAdd:false,getter:function(){return this.get("styles").marker;},setter:function(F){this.set("styles",{marker:F});}},line:{lazyAdd:false,getter:function(){return this.get("styles").line;},setter:function(F){this.set("styles",{line:F});}},area:{lazyAdd:false,getter:function(){return this.get("styles").area;},setter:function(F){this.set("styles",{area:F});}}}});b.StackedComboSeries=b.Base.create("stackedComboSeries",b.ComboSeries,[b.StackingUtil],{setAreaData:function(){b.StackedComboSeries.superclass.setAreaData.apply(this);this._stackCoordinates.apply(this);},drawSeries:function(){this.get("graphic").clear();if(this.get("showAreaFill")){this.drawFill.apply(this,this._getStackedClosingPoints());}if(this.get("showLines")){this.drawLines();}if(this.get("showMarkers")){this.drawPlots();}}},{ATTRS:{type:{value:"stackedCombo"},showAreaFill:{value:true}}});b.ComboSplineSeries=b.Base.create("comboSplineSeries",b.ComboSeries,[b.CurveUtil],{drawSeries:function(){this.get("graphic").clear();if(this.get("showAreaFill")){this.drawAreaSpline();}if(this.get("showLines")){this.drawSpline();}if(this.get("showMarkers")){this.drawPlots();}}},{ATTRS:{type:{value:"comboSpline"}}});b.StackedComboSplineSeries=b.Base.create("stackedComboSplineSeries",b.StackedComboSeries,[b.CurveUtil],{drawSeries:function(){this.get("graphic").clear();if(this.get("showAreaFill")){this.drawStackedAreaSpline();}if(this.get("showLines")){this.drawSpline();}if(this.get("showMarkers")){this.drawPlots();}}},{ATTRS:{type:{value:"stackedComboSpline"},showAreaFill:{value:true}}});function z(F){z.superclass.constructor.apply(this,arguments);}z.NAME="rangeSeries";z.ATTRS={type:{value:"range"}};b.extend(z,b.CartesianSeries,{setAreaData:function(){var ad,ac,V=b.Node.one(this._parentNode).get("parentNode"),Q=V.get("offsetWidth"),Y=V.get("offsetHeight"),T=this.get("styles").padding,U=T.left,ab=T.top,P=this.get("xAxis"),G=this.get("yAxis"),I=this.get("xKey"),M=this.get("yKey"),K=P.getDataByKey(I).concat(),aa=G.getDataByKey(M).concat(),ag=P.getEdgeOffset(K.length,Q),N=Q-(U+T.right+ag),X=Y-(ab+T.bottom),S=[],af=[],ae=P.get("maximum"),Z=P.get("minimum"),H=G.get("maximum"),F=G.get("minimum"),L=N/(ae-Z),R=X/(H-F),O=K.length,W,J;ag*=0.5;this.get("graphic").setSize(Q,Y);this._leftOrigin=Math.round(((0-Z)*L)+U);this._bottomOrigin=Math.round((X+ab)-(0-F)*R);for(W=0;W<O;++W){J=aa[W];ad=Math.round((((K[W]-Z)*L)+U+ag));ac={h:Math.round(((X+ab)-(J.high-F)*R)),l:Math.round(((X+ab)-(J.low-F)*R)),o:Math.round(((X+ab)-(J.open-F)*R)),c:Math.round(((X+ab)-(J.close-F)*R))};S.push(ad);af.push(ac);}this.set("xcoords",S);this.set("ycoords",af);},drawSeries:function(){if(this.get("xcoords").length<1){return;}var O=this.get("graphic"),W=this.get("styles").marker,N=W.width,P=this.get("xcoords"),Y=this.get("ycoords"),T=0,U=P.length,I=this.get("type"),G=this.get("graph"),M=G.seriesTypes[I],V=M.length,F=0,H=0,K=0,L,R,S=this.get("order"),Q=b.Node.one(this._parentNode).get("parentNode"),J,X;for(;T<V;++T){R=M[T];F+=R.get("styles").marker.width;if(S>T){K=F;}}H=U*F;if(H>Q.offsetWidth){L=this.width/H;F*=L;K*=L;N*=L;N=Math.max(N,1);}K-=F/2;for(T=0;T<U;++T){X=Y[T];J=P[T]+K;this.drawMarker(O,X,J,W);}}});b.RangeSeries=z;function s(F){s.superclass.constructor.apply(this,arguments);}s.NAME="ohlcSeries";s.ATTRS={type:{value:"ohlc"}};b.extend(s,b.RangeSeries,{drawMarker:function(M,W,H,S){var R=W.h,N=W.o,P=W.l,U=W.c,L=S.width,Q,G=S.upColor,J=S.downColor,I,O=S.upAlpha,T=S.downAlpha,K=U<N,F=S.thickness,V=H+L*0.5;Q=K?G:J;I=K?O:T;M.lineStyle(F,Q,I);M.moveTo(H,N);M.lineTo(V,N);M.moveTo(V,R);M.lineTo(V,P);M.moveTo(V,U);M.lineTo(H+L,U);M.end();},_getDefaultStyles:function(){return{marker:{upColor:"#aaaaaa",upAlpha:1,thickness:1,borderAlpha:1,downColor:"#000000",downAlpha:1,width:6,height:6},padding:{top:0,left:0,right:0,bottom:0}};}});b.OHLCSeries=s;function v(F){v.superclass.constructor.apply(this,arguments);}v.NAME="candlestickSeries";
v.ATTRS={type:{value:"candlestick"}};b.extend(v,b.RangeSeries,{drawMarker:function(N,am,L,af){var ak=am.h,ag=am.o,ai=am.l,an=am.c,ah=Math.abs(an-ag),ac=af.width,aq,ab=af.upFillColor,I=af.downFillColor,aj,X=af.upFillAlpha,ap=af.downFillAlpha,V=an<ag,ad=af.upFillType||"solid",Z=af.downFillType||"solid",J=af.borderWidth,W=af.borderColor,ao=af.borderAlpha||1,ae,aa=af.upColors,al=af.downColors,T,S=af.upAlphas||[],Y=af.downAlphas||[],Q,O=af.upRatios||[],R=af.downRatios||[],U,K=af.upRotation||0,H=af.downRotation||0,P=V?ad:Z,M=an<ag?an:ag,G=an<ag?ag:an,F=L+ac*0.5;if(J>0){N.lineStyle(J,W,ao);}if(P==="solid"){aq=V?ab:I;aj=V?X:ap;N.beginFill(aq,aj);}else{ae=V?aa:al;U=V?K:H;Q=V?O:R;T=V?S:Y;N.beginGradientFill(P,ae,T,Q,{rotation:U,width:ac,height:ah});}if(M>ak){N.moveTo(F,ak);N.lineTo(F,M);}N.drawRect(L,M,ac,ah);if(ai>an&&ai>ag){N.moveTo(F,G);N.lineTo(F,ai);}N.end();},_getDefaultStyles:function(){return{marker:{upFillColor:"#ffffff",upFillAlpha:1,borderColor:"#000000",borderWidth:1,borderAlpha:1,upColors:[],upAlphas:[],upRatios:[],upRotation:0,downFillColor:"#000000",downFillAlpha:1,downBorderColor:"#000000",downBorderWidth:0,downBorderAlpha:1,downColors:[],downAlphas:[],downRatios:[],downRotation:0,width:6,height:6},padding:{top:0,left:0,right:0,bottom:0}};}});b.CandlestickSeries=v;b.StackedLineSeries=b.Base.create("stackedLineSeries",b.LineSeries,[b.StackingUtil],{setAreaData:function(){b.StackedLineSeries.superclass.setAreaData.apply(this);this._stackCoordinates.apply(this);}},{ATTRS:{type:{value:"stackedLine"}}});b.StackedAreaSeries=b.Base.create("stackedAreaSeries",b.AreaSeries,[b.StackingUtil],{setAreaData:function(){b.StackedAreaSeries.superclass.setAreaData.apply(this);this._stackCoordinates.apply(this);},drawSeries:function(){this.get("graphic").clear();this.drawFill.apply(this,this._getStackedClosingPoints());}},{ATTRS:{type:{value:"stackedArea"}}});b.StackedColumnSeries=b.Base.create("stackedColumnSeries",b.ColumnSeries,[b.StackingUtil],{drawSeries:function(){if(this.get("xcoords").length<1){return;}var aa=this.get("styles").marker,S=aa.width,Z=aa.height,T=this.get("xcoords"),ab=this.get("ycoords"),X=0,Y=T.length,U=ab[0],J=this.get("type"),H=this.get("graph"),O=H.seriesTypes[J],M,W=this.get("order"),R=this.get("graphOrder"),K,N,L,P,V,G=W===0,I=Y*S,Q,F=g;this._createMarkerCache();if(F){this._createHotspotCache();}if(I>this.get("width")){M=this.width/I;S*=M;S=Math.max(S,1);}if(!G){L=O[W-1];P=L.get("negativeBaseValues");V=L.get("positiveBaseValues");}else{P=[];V=[];}this.set("negativeBaseValues",P);this.set("positiveBaseValues",V);for(X=0;X<Y;++X){U=ab[X];if(G){Z=Math.abs(this._bottomOrigin-U);if(U<this._bottomOrigin){V[X]=U;P[X]=this._bottomOrigin;}else{if(U>this._bottomOrigin){V[X]=this._bottomOrigin;P[X]=U;U-=Z;}else{V[X]=U;P[X]=U;}}}else{if(U>this._bottomOrigin){U+=(P[X]-this._bottomOrigin);Z=U-P[X];P[X]=U;U-=Z;}else{if(U<=this._bottomOrigin){U=V[X]-(this._bottomOrigin-ab[X]);Z=V[X]-U;V[X]=U;}}}K=T[X]-S/2;aa.width=S;aa.height=Z;N=this.getMarker(aa,R,X);N.setPosition(K,U);if(F){Q=this.getHotspot(aa,R,X);Q.setPosition(K,U);Q.parentNode.style.zIndex=5;}}this._clearMarkerCache();if(F){this._clearHotspotCache();}},updateMarkerState:function(J,I){if(this._markers[I]){var K,G,L=this._getState(J),H=this.get("xcoords"),F=this._markers[I],M=0;K=this.get("styles").marker;G=L=="off"||!K[L]?K:K[L];G.height=F.height;F.update(G);M=K.width*0.5;if(F.parentNode){b.one(F.parentNode).setStyle("left",(H[I]-M));}}},_getPlotDefaults:function(){var F={fill:{type:"solid",alpha:1,colors:null,alphas:null,ratios:null},border:{weight:0,alpha:1},width:24,height:24,shape:"rect",padding:{top:0,left:0,right:0,bottom:0}};F.fill.color=this._getDefaultColor(this.get("graphOrder"),"fill");F.border.color=this._getDefaultColor(this.get("graphOrder"),"border");return F;}},{ATTRS:{type:{value:"stackedColumn"},negativeBaseValues:{value:null},positiveBaseValues:{value:null}}});b.StackedBarSeries=b.Base.create("stackedBarSeries",b.BarSeries,[b.StackingUtil],{drawSeries:function(){if(this.get("xcoords").length<1){return;}var Z=this.get("styles").marker,R=Z.width,Y=Z.height,S=this.get("xcoords"),ab=this.get("ycoords"),W=0,X=S.length,T=ab[0],I=this.get("type"),H=this.get("graph"),N=H.seriesTypes[I],L,V=this.get("order"),Q=this.get("graphOrder"),J,M,K,O,U,G=V===0,aa=X*Y,P,F=g;this._createMarkerCache();if(F){this._createHotspotCache();}if(aa>this.get("height")){L=this.height/aa;Y*=L;Y=Math.max(Y,1);}if(!G){K=N[V-1];O=K.get("negativeBaseValues");U=K.get("positiveBaseValues");}else{O=[];U=[];}this.set("negativeBaseValues",O);this.set("positiveBaseValues",U);for(W=0;W<X;++W){T=ab[W];J=S[W];if(G){R=Math.abs(J-this._leftOrigin);if(J>this._leftOrigin){U[W]=J;O[W]=this._leftOrigin;J-=R;}else{if(J<this._leftOrigin){U[W]=this._leftOrigin;O[W]=J;}else{U[W]=J;O[W]=this._leftOrigin;}}}else{if(J<this._leftOrigin){J=O[W]-(this._leftOrigin-S[W]);R=O[W]-J;O[W]=J;}else{if(J>=this._leftOrigin){J+=(U[W]-this._leftOrigin);R=J-U[W];U[W]=J;J-=R;}}}T-=Y/2;Z.width=R;Z.height=Y;M=this.getMarker(Z,Q,W);M.setPosition(J,T);if(F){P=this.getHotspot(Z,Q,W);P.setPosition(J,T);P.parentNode.style.zIndex=5;}}this._clearMarkerCache();if(F){this._clearHotspotCache();}},updateMarkerState:function(J,H){if(this._markers[H]){var L=this._getState(J),M=this.get("ycoords"),F=this._markers[H],K=this.get("styles").marker,I=K.height,G=L=="off"||!K[L]?K:K[L];G.width=F.width;F.update(G);if(F.parentNode){b.one(F.parentNode).setStyle("top",(M[H]-I/2));}}},_getPlotDefaults:function(){var F={fill:{type:"solid",alpha:1,colors:null,alphas:null,ratios:null},border:{weight:0,alpha:1},width:24,height:24,shape:"rect",padding:{top:0,left:0,right:0,bottom:0}};F.fill.color=this._getDefaultColor(this.get("graphOrder"),"fill");F.border.color=this._getDefaultColor(this.get("graphOrder"),"border");return F;}},{ATTRS:{type:{value:"stackedBar"},direction:{value:"vertical"},negativeBaseValues:{value:null},positiveBaseValues:{value:null}}});b.PieSeries=b.Base.create("pieSeries",b.MarkerSeries,[],{_map:null,_image:null,_setMap:function(){var H="pieHotSpotMapi_"+Math.round(100000*Math.random()),F=this.get("graph").get("contentBox"),G;
if(this._image){F.removeChild(this._image);while(this._areaNodes&&this._areaNodes.length>0){G=this._areaNodes.shift();this._map.removeChild(G);}F.removeChild(this._map);}this._image=document.createElement("img");this._image.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAABCAYAAAD9yd/wAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABJJREFUeNpiZGBgSGPAAgACDAAIkABoFyloZQAAAABJRU5ErkJggg==";F.appendChild(this._image);this._image.setAttribute("usemap","#"+H);this._image.style.zIndex=3;this._image.style.opacity=0;this._image.setAttribute("alt","imagemap");this._map=document.createElement("map");this._map.style.zIndex=5;F.appendChild(this._map);this._map.setAttribute("name",H);this._map.setAttribute("id",H);this._areaNodes=[];},_categoryDisplayName:null,_valueDisplayName:null,addListeners:function(){var F=this.get("categoryAxis"),G=this.get("valueAxis");if(F){F.after("dataReady",b.bind(this._categoryDataChangeHandler,this));F.after("dataUpdate",b.bind(this._categoryDataChangeHandler,this));}if(G){G.after("dataReady",b.bind(this._valueDataChangeHandler,this));G.after("dataUpdate",b.bind(this._valueDataChangeHandler,this));}this.after("categoryAxisChange",this.categoryAxisChangeHandler);this.after("valueAxisChange",this.valueAxisChangeHandler);this.after("stylesChange",this._updateHandler);},validate:function(){this.draw();this._renderered=true;},_categoryAxisChangeHandler:function(F){var G=this.get("categoryAxis");G.after("dataReady",b.bind(this._categoryDataChangeHandler,this));G.after("dataUpdate",b.bind(this._categoryDataChangeHandler,this));},_valueAxisChangeHandler:function(F){var G=this.get("valueAxis");G.after("dataReady",b.bind(this._valueDataChangeHandler,this));G.after("dataUpdate",b.bind(this._valueDataChangeHandler,this));},GUID:"pieseries",_categoryDataChangeHandler:function(F){if(this._rendered&&this.get("categoryKey")&&this.get("valueKey")){this.draw();}},_valueDataChangeHandler:function(F){if(this._rendered&&this.get("categoryKey")&&this.get("valueKey")){this.draw();}},draw:function(){var H=this.get("graph"),F=H.get("width"),G=H.get("height");if(isFinite(F)&&isFinite(G)&&F>0&&G>0){this._rendered=true;this.drawSeries();this.fire("drawingComplete");}},drawPlots:function(){var H=this.get("valueAxis").getDataByKey(this.get("valueKey")).concat(),I=this.get("categoryAxis").getDataByKey(this.get("categoryKey")).concat(),L=0,aj=H.length,S=this.get("styles").marker,F=S.fill.colors,ak=S.fill.alphas||["1"],P=S.border.colors,J=[S.border.weight],K=[S.border.alpha],al=J.concat(),U=P.concat(),W=K.concat(),ag,ai,X=S.padding,G=this.get("graph"),V=G.get("width")-(X.left+X.right),af=G.get("height")-(X.top+X.bottom),ad=-90,Q=V/2,Y=af/2,M=Math.min(Q,Y),ae=0,ab,ah=0,aa,ac,N,T,O,R=this.get("graphOrder"),Z=j=="canvas";for(;ae<aj;++ae){ab=H[ae];H.push(ab);if(!isNaN(ab)){L+=ab;}}ag=F?F.concat():null;ai=ak?ak.concat():null;this._createMarkerCache();if(Z){this._setMap();this._image.width=V;this._image.height=af;}for(ae=0;ae<aj;ae++){ab=H[ae];if(L===0){ah=360/H.length;}else{ah=360*(ab/L);}ah=Math.round(ah);if(ag&&ag.length<1){ag=F.concat();}if(ai&&ai.length<1){ai=ak.concat();}if(al&&al.length<1){al=J.concat();}if(al&&U.length<1){U=P.concat();}if(W&&W.length<1){W=K.concat();}N=al?al.shift():null;aa=U?U.shift():null;ac=W?W.shift():null;ad+=ah;T={border:{color:aa,weight:N,alpha:ac},fill:{color:ag?ag.shift():this._getDefaultColor(ae,"slice"),alpha:ai?ai.shift():null},shape:"wedge",props:{arc:ah,radius:M,startAngle:ad,x:Q,y:Y},width:V,height:af};O=this.getMarker(T,R,ae);if(Z){this._addHotspot(T.props,R,ae);}}this._clearMarkerCache();},_addHotspot:function(I,V,J){var S=document.createElement("area"),U=1,O=I.x,M=I.y,L=I.arc,T=I.startAngle-L,R=I.startAngle,G=I.radius,P=O+Math.cos(T/180*Math.PI)*G,N=M+Math.sin(T/180*Math.PI)*G,X=O+Math.cos(R/180*Math.PI)*G,W=M+Math.sin(R/180*Math.PI)*G,aa=Math.floor(L/10)-1,H=(L/(Math.floor(L/10))/180)*Math.PI,K=Math.atan((N-M)/(P-O)),Z=O+", "+M+", "+P+", "+N,Y,Q,F;for(U=1;U<=aa;++U){F=H*U;Y=Math.cos(K+F);Q=Math.sin(K+F);if(T<=90){Z+=", "+(O+(G*Math.cos(K+(H*U))));Z+=", "+(M+(G*Math.sin(K+(H*U))));}else{Z+=", "+(O-(G*Math.cos(K+(H*U))));Z+=", "+(M-(G*Math.sin(K+(H*U))));}}Z+=", "+X+", "+W;Z+=", "+O+", "+M;this._map.appendChild(S);S.setAttribute("class","yui3-seriesmarker");S.setAttribute("id","hotSpot_"+V+"_"+J);S.setAttribute("shape","polygon");S.setAttribute("coords",Z);this._areaNodes.push(S);},updateMarkerState:function(J,H){if(this._markers[H]){var L=this._getState(J),G,I,F=this._markers[H],K=this.get("styles").marker;G=L=="off"||!K[L]?K:K[L];I=this._mergeStyles(G,{});I.fill.color=I.fill.colors[H%I.fill.colors.length];I.fill.alpha=I.fill.alphas[H%I.fill.alphas.length];F.update(I);}},_createMarker:function(J,F,I){var H=b.clone(J),G;H.graphic=this.get("graphic");G=new b.Shape(H);G.addClass("yui3-seriesmarker");G.node.setAttribute("id","series_"+F+"_"+I);return G;},_clearMarkerCache:function(){var F=this._markerCache.length,H=0,G;for(;H<F;++H){G=this._markerCache[H];if(G&&G.node&&G.parentNode){G.parentNode.removeChild(G.node);}}this._markerCache=[];},_getPlotDefaults:function(){var F={padding:{top:0,left:0,right:0,bottom:0},fill:{alphas:["1"]},border:{weight:0,alpha:1}};F.fill.colors=this._defaultSliceColors;F.border.colors=this._defaultBorderColors;return F;},_defaultLineColors:["#426ab3","#d09b2c","#000000","#b82837","#b384b5","#ff7200","#779de3","#cbc8ba","#7ed7a6","#007a6c"],_defaultFillColors:["#6084d0","#eeb647","#6c6b5f","#d6484f","#ce9ed1","#ff9f3b","#93b7ff","#e0ddd0","#94ecba","#309687"],_defaultBorderColors:["#205096","#b38206","#000000","#94001e","#9d6fa0","#e55b00","#5e85c9","#adab9e","#6ac291","#006457"],_defaultSliceColors:["#66007f","#a86f41","#295454","#996ab2","#e8cdb7","#90bdbd","#000000","#c3b8ca","#968373","#678585"],_getDefaultColor:function(I,J){var G={line:this._defaultLineColors,fill:this._defaultFillColors,border:this._defaultBorderColors,slice:this._defaultSliceColors},H=G[J],F=H.length;I=I||0;if(I>=F){I=I%F;}J=J||"fill";return G[J][I];}},{ATTRS:{type:{value:"pie"},order:{},graph:{},categoryAxis:{value:null,validator:function(F){return F!==this.get("categoryAxis");
}},valueAxis:{value:null,validator:function(F){return F!==this.get("valueAxis");}},categoryKey:{value:null,validator:function(F){return F!==this.get("categoryKey");}},valueKey:{value:null,validator:function(F){return F!==this.get("valueKey");}},categoryDisplayName:{setter:function(F){this._categoryDisplayName=F;return F;},getter:function(){return this._categoryDisplayName||this.get("categoryKey");}},valueDisplayName:{setter:function(F){this._valueDisplayName=F;return F;},getter:function(){return this._valueDisplayName||this.get("valueKey");}},slices:null}});b.Gridlines=b.Base.create("gridlines",b.Base,[b.Renderer],{render:function(){this._setCanvas();},remove:function(){var G=this.get("graphic"),F;if(G){F=G.node;if(F){b.one(F).remove();}}},draw:function(){if(this.get("axis")&&this.get("graph")){this._drawGridlines();}},_drawGridlines:function(){var F=this.get("graphic"),G=this.get("axis"),O=G.get("position"),R,L=0,I,P=this.get("direction"),S=this.get("graph"),Q=S.get("width"),N=S.get("height"),T=this.get("styles").line,K=T.color,M=T.weight,J=T.alpha,H=P=="vertical"?this._verticalLine:this._horizontalLine;if(O=="none"){R=[];I=G.get("styles").majorUnit.count;for(;L<I;++L){R[L]={x:Q*(L/(I-1)),y:N*(L/(I-1))};}L=0;}else{R=G.get("tickPoints");I=R.length;}if(!F){this._setCanvas();F=this.get("graphic");}F.clear();F.setSize(Q,N);F.lineStyle(M,K,J);for(;L<I;++L){H(F,R[L],Q,N);}F.end();},_horizontalLine:function(I,H,F,G){I.moveTo(0,H.y);I.lineTo(F,H.y);},_verticalLine:function(I,H,F,G){I.moveTo(H.x,0);I.lineTo(H.x,G);},_setCanvas:function(){this.set("graphic",new b.Graphic());this.get("graphic").render(this.get("graph").get("contentBox"));},_getDefaultStyles:function(){var F={line:{color:"#f0efe9",weight:1,alpha:1}};return F;}},{ATTRS:{direction:{},axis:{},graph:{}}});b.Graph=b.Base.create("graph",b.Widget,[b.Renderer],{bindUI:function(){var F=this.get("boundingBox");F.setStyle("position","absolute");this.after("widthChange",this._sizeChangeHandler);this.after("heightChange",this._sizeChangeHandler);this.after("stylesChange",this._updateStyles);},syncUI:function(){if(this.get("showBackground")){var M=new b.Graphic(),K,F=this.get("contentBox"),I=this.get("styles").background,H=I.border,L=H.weight||0,G=this.get("width"),J=this.get("height");if(G){G+=L*2;I.width=G;}if(J){J+=L*2;I.height=J;}M.render(F);this._background=M.getShape(I);K=b.one(M.node);K.setStyle("left",0-L);K.setStyle("top",0-L);K.setStyle("zIndex",-1);}},renderUI:function(){var J=this.get("seriesCollection"),I,H=0,G=J.length,F=this.get("horizontalGridlines"),K=this.get("verticalGridlines");for(;H<G;++H){I=J[H];if(I instanceof b.CartesianSeries){I.render();}}if(F&&F instanceof b.Gridlines){F.draw();}if(K&&K instanceof b.Gridlines){K.draw();}},seriesTypes:null,getSeriesByIndex:function(H){var F=this.get("seriesCollection"),G;if(F&&F.length>H){G=F[H];}return G;},getSeriesByKey:function(H){var G=this._seriesDictionary,F;if(G&&G.hasOwnProperty(H)){F=G[H];}return F;},addDispatcher:function(F){if(!this._dispatchers){this._dispatchers=[];}this._dispatchers.push(F);},_seriesCollection:null,_seriesDictionary:null,_parseSeriesCollection:function(J){if(!J){return;}var G=J.length,I=0,H,F;if(!this.get("seriesCollection")){this._seriesCollection=[];}if(!this._seriesDictionary){this._seriesDictionary={};}if(!this.seriesTypes){this.seriesTypes=[];}for(;I<G;++I){H=J[I];if(!(H instanceof b.CartesianSeries)&&!(H instanceof b.PieSeries)){this._createSeries(H);continue;}this._addSeries(H);}G=this.get("seriesCollection").length;for(I=0;I<G;++I){H=this.get("seriesCollection")[I];F=H.get("direction")=="horizontal"?"yKey":"xKey";this._seriesDictionary[H.get(F)]=H;}},_addSeries:function(H){var I=H.get("type"),K=this.get("seriesCollection"),J=K.length,G=this.seriesTypes,F;if(!H.get("graph")){H.set("graph",this);}K.push(H);if(!G.hasOwnProperty(I)){this.seriesTypes[I]=[];}F=this.seriesTypes[I];H.set("graphOrder",J);H.set("order",F.length);F.push(H);this.addDispatcher(H);H.after("drawingComplete",b.bind(this._drawingCompleteHandler,this));this.fire("seriesAdded",H);},_createSeries:function(J){var K=J.type,L=this.get("seriesCollection"),H=this.seriesTypes,G,F,I;J.graph=this;if(!H.hasOwnProperty(K)){H[K]=[];}G=H[K];J.graph=this;J.order=G.length;J.graphOrder=L.length;F=this._getSeries(J.type);I=new F(J);this.addDispatcher(I);I.after("drawingComplete",b.bind(this._drawingCompleteHandler,this));G.push(I);L.push(I);},_getSeries:function(F){var G;switch(F){case"line":G=b.LineSeries;break;case"column":G=b.ColumnSeries;break;case"bar":G=b.BarSeries;break;case"area":G=b.AreaSeries;break;case"candlestick":G=b.CandlestickSeries;break;case"ohlc":G=b.OHLCSeries;break;case"stackedarea":G=b.StackedAreaSeries;break;case"stackedline":G=b.StackedLineSeries;break;case"stackedcolumn":G=b.StackedColumnSeries;break;case"stackedbar":G=b.StackedBarSeries;break;case"markerseries":G=b.MarkerSeries;break;case"spline":G=b.SplineSeries;break;case"areaspline":G=b.AreaSplineSeries;break;case"stackedspline":G=b.StackedSplineSeries;break;case"stackedareaspline":G=b.StackedAreaSplineSeries;break;case"stackedmarkerseries":G=b.StackedMarkerSeries;break;case"pie":G=b.PieSeries;break;case"combo":G=b.ComboSeries;break;case"stackedcombo":G=b.StackedComboSeries;break;case"combospline":G=b.ComboSplineSeries;break;case"stackedcombospline":G=b.StackedComboSplineSeries;break;default:G=b.CartesianSeries;break;}return G;},_markerEventHandler:function(K){var I=K.type,F=K.currentTarget,J=F.getAttribute("id").split("_"),H=this.getSeriesByIndex(J[1]),G=J[2];H.updateMarkerState(I,G);},_dispatchers:null,_updateStyles:function(){this._background.update(this.get("styles").background);this._sizeChangeHandler();},_sizeChangeHandler:function(L){var F=this.get("horizontalGridlines"),G=this.get("verticalGridlines"),O=this.get("width"),J=this.get("height"),K,N=0,M=0,H=this.get("styles").background,I;if(H&&H.border){I=H.border.weight||0;}if(this._background){K=b.one(this._background.parentNode);if(O&&J){if(I){O+=I*2;J+=I*2;N-=I;M-=I;
}K.setStyle("width",O);K.setStyle("height",J);K.setStyle("left",N);K.setStyle("top",M);this._background.update({width:O,height:J});}}if(F&&F instanceof b.Gridlines){F.draw();}if(G&&G instanceof b.Gridlines){G.draw();}this._drawSeries();},_drawSeries:function(){if(this._drawing){this._callLater=true;return;}this._callLater=false;this._drawing=true;var H=this.get("seriesCollection"),G=0,F=H.length;for(;G<F;++G){H[G].draw();if(!H[G].get("xcoords")||!H[G].get("ycoords")){this._callLater=true;break;}}this._drawing=false;if(this._callLater){this._drawSeries();}},_drawingCompleteHandler:function(H){var G=H.currentTarget,F=b.Array.indexOf(this._dispatchers,G);if(F>-1){this._dispatchers.splice(F,1);}if(this._dispatchers.length<1){this.fire("chartRendered");}},_getDefaultStyles:function(){var F={background:{shape:"rect",fill:{color:"#faf9f2"},border:{color:"#dad8c9",weight:1}}};return F;}},{ATTRS:{seriesCollection:{getter:function(){return this._seriesCollection;},setter:function(F){this._parseSeriesCollection(F);return this._seriesCollection;}},showBackground:{value:true},seriesDictionary:{readOnly:true,getter:function(){return this._seriesDictionary;}},horizontalGridlines:{value:null,setter:function(G){var F=this.get("horizontalGridlines");if(F&&F instanceof b.Gridlines){F.remove();}if(G instanceof b.Gridlines){F=G;G.set("graph",this);G.render();return G;}else{if(G&&G.axis){F=new b.Gridlines({direction:"horizontal",axis:G.axis,graph:this,styles:G.styles});F.render();return F;}}}},verticalGridlines:{value:null,setter:function(G){var F=this.get("verticalGridlines");if(F&&F instanceof b.Gridlines){F.remove();}if(G instanceof b.Gridlines){F=G;G.set("graph",this);G.render();return G;}else{if(G&&G.axis){F=new b.Gridlines({direction:"vertical",axis:G.axis,graph:this,styles:G.styles});F.render();return F;}}}}}});function r(){}r.ATTRS={tooltip:{valueFn:"_getTooltip",setter:function(F){return this._updateTooltip(F);}},categoryKey:{value:"category"},categoryType:{value:"category"},interactionType:{value:"marker"},dataProvider:{setter:function(F){return this._setDataValues(F);}},seriesKeys:{},axesCollection:{},graph:{valueFn:"_getGraph"}};r.prototype={_getGraph:function(){var F=new b.Graph();F.after("chartRendered",b.bind(function(G){this.fire("chartRendered");},this));return F;},getSeries:function(H){var F=null,G=this.get("graph");if(G){if(b.Lang.isNumber(H)){F=G.getSeriesByIndex(H);}else{F=G.getSeriesByKey(H);}}return F;},getAxisByKey:function(H){var F,G=this.get("axes");if(G.hasOwnProperty(H)){F=G[H];}return F;},getCategoryAxis:function(){var G,F=this.get("categoryKey"),H=this.get("axes");if(H.hasOwnProperty(F)){G=H[F];}return G;},_direction:"horizontal",_dataProvider:null,_setDataValues:function(K){if(b.Lang.isArray(K[0])){var J,M=[],H=K[0],I=0,G=H.length,L,F=K.length;for(;I<G;++I){J={category:H[I]};for(L=1;L<F;++L){J["series"+L]=K[L][I];}M[I]=J;}return M;}return K;},_seriesCollection:null,_setSeriesCollection:function(F){this._seriesCollection=F;},_getAxisClass:function(F){return this._axisClass[F];},_axisClass:{stacked:b.StackedAxis,numeric:b.NumericAxis,category:b.CategoryAxis,time:b.TimeAxis},_axes:null,renderUI:function(){var F=this.get("tooltip");this.get("boundingBox").setStyle("position","absolute");this.get("contentBox").setStyle("position","absolute");this._addAxes();this._addSeries();if(F&&F.show){this._addTooltip();}this._redraw();},bindUI:function(){this.after("tooltipChange",b.bind(this._tooltipChangeHandler,this));this.after("widthChange",this._sizeChanged);this.after("heightChange",this._sizeChanged);this.after("dataProviderChange",this._dataProviderChangeHandler);var J=this.get("tooltip"),L="mouseout",I="mouseover",G=this.get("contentBox"),K=this.get("interactionType"),H=0,F;if(K=="marker"){L=J.hideEvent;I=J.showEvent;b.delegate("mouseenter",b.bind(this._markerEventDispatcher,this),G,".yui3-seriesmarker");b.delegate("mousedown",b.bind(this._markerEventDispatcher,this),G,".yui3-seriesmarker");b.delegate("mouseup",b.bind(this._markerEventDispatcher,this),G,".yui3-seriesmarker");b.delegate("mouseleave",b.bind(this._markerEventDispatcher,this),G,".yui3-seriesmarker");b.delegate("click",b.bind(this._markerEventDispatcher,this),G,".yui3-seriesmarker");b.delegate("mousemove",b.bind(this._positionTooltip,this),G,".yui3-seriesmarker");}else{if(K=="planar"){this._overlay.on("mousemove",b.bind(this._planarEventDispatcher,this));this.on("mouseout",this.hideTooltip);}}if(J){if(L&&I&&L==I){this.on(K+"Event:"+L,this.toggleTooltip);}else{if(I){this.on(K+"Event:"+I,J[K+"EventHandler"]);}if(L){if(b.Lang.isArray(L)){F=L.length;for(;H<F;++H){this.on(K+"Event:"+L[H],this.hideTooltip);}}this.on(K+"Event:"+L,this.hideTooltip);}}}},_markerEventDispatcher:function(J){var L=J.type,F=this.get("contentBox"),P=J.currentTarget,O=P.getAttribute("id").split("_"),G=O[1],H=this.getSeries(parseInt(G,10)),I=O[2],K=this.getSeriesItems(H,I),N=J.pageX-F.getX(),M=J.pageY-F.getY();if(L=="mouseenter"){L="mouseover";}else{if(L=="mouseleave"){L="mouseout";}}H.updateMarkerState(L,I);J.halt();this.fire("markerEvent:"+L,{categoryItem:K.category,valueItem:K.value,node:P,x:N,y:M,series:H,index:I,seriesIndex:G});},_dataProviderChangeHandler:function(J){var G=this.get("dataProvider"),I=this.get("axes"),F,H;for(F in I){if(I.hasOwnProperty(F)){H=I[F];if(H instanceof b.Axis){H.set("dataProvider",G);}}}},toggleTooltip:function(G){var F=this.get("tooltip");if(F.visible){this.hideTooltip();}else{F.markerEventHandler.apply(this,[G]);}},_showTooltip:function(I,F,J){var G=this.get("tooltip"),H=G.node;if(I){G.visible=true;H.set("innerHTML",I);H.setStyle("top",J+"px");H.setStyle("left",F+"px");H.removeClass("yui3-widget-hidden");}},_positionTooltip:function(J){var H=this.get("tooltip"),I=H.node,G=this.get("contentBox"),F=(J.pageX+10)-G.getX(),K=(J.pageY+10)-G.getY();if(I){I.setStyle("left",F+"px");I.setStyle("top",K+"px");}},hideTooltip:function(){var F=this.get("tooltip"),G=F.node;F.visible=false;G.set("innerHTML","");G.setStyle("left",-10000);G.setStyle("top",-10000);
G.addClass("yui3-widget-hidden");},_addTooltip:function(){var F=this.get("tooltip");this.get("contentBox").appendChild(F.node);},_updateTooltip:function(J){var H=this._tooltip,F,I=J.styles,G={markerLabelFunction:"markerLabelFunction",planarLabelFunction:"planarLabelFunction",showEvent:"showEvent",hideEvent:"hideEvent",markerEventHandler:"markerEventHandler",planarEventHandler:"planarEventHandler"};if(I){for(F in I){if(I.hasOwnProperty(F)){H.node.setStyle(F,I[F]);}}}for(F in G){if(J.hasOwnProperty(F)){H[F]=J[F];}}return H;},_getTooltip:function(){var G=document.createElement("div"),F={markerLabelFunction:this._tooltipLabelFunction,planarLabelFunction:this._planarLabelFunction,show:true,hideEvent:"mouseout",showEvent:"mouseover",markerEventHandler:function(I){var H=this.get("tooltip"),J=H.markerLabelFunction.apply(this,[I.categoryItem,I.valueItem,I.index,I.series,I.seriesIndex]);this._showTooltip(J,I.x+10,I.y+10);},planarEventHandler:function(I){var H=this.get("tooltip"),K,J=this.get("categoryAxis");K=H.planarLabelFunction.apply(this,[J,I.valueItem,I.index,I.items,I.seriesIndex]);this._showTooltip(K,I.x+10,I.y+10);}};G.setAttribute("id",this.get("id")+"_tooltip");G=b.one(G);G.setStyle("fontSize","85%");G.setStyle("opacity","0.83");G.setStyle("position","absolute");G.setStyle("paddingTop","2px");G.setStyle("paddingRight","5px");G.setStyle("paddingBottom","4px");G.setStyle("paddingLeft","2px");G.setStyle("backgroundColor","#fff");G.setStyle("border","1px solid #dbdccc");G.setStyle("pointerEvents","none");G.setStyle("zIndex",3);G.setStyle("whiteSpace","noWrap");G.addClass("yui3-widget-hidden");F.node=b.one(G);this._tooltip=F;return F;},_planarLabelFunction:function(L,P,N,J,H){var F="",O,K=0,M=J.length,G,I;if(L){F+=L.get("labelFunction").apply(this,[L.getKeyValueAt(this.get("categoryKey"),N),L.get("labelFormat")]);}for(;K<M;++K){I=J[K];if(I.get("visible")){O=P[K];G=O.axis;F+="<br/><span>"+O.displayName+": "+G.get("labelFunction").apply(this,[G.getKeyValueAt(O.key,N),G.get("labelFormat")])+"</span>";}}return F;},_tooltipLabelFunction:function(K,F,I,H,G){var J=K.displayName+":&nbsp;"+K.axis.get("labelFunction").apply(this,[K.value,K.axis.get("labelFormat")])+"<br/>"+F.displayName+":&nbsp;"+F.axis.get("labelFunction").apply(this,[F.value,F.axis.get("labelFormat")]);return J;},_tooltipChangeHandler:function(J){if(this.get("tooltip")){var H=this.get("tooltip"),I=H.node,G=H.show,F=this.get("contentBox");if(I&&G){if(!F.containes(I)){this._addTooltip();}}}}};b.ChartBase=r;b.CartesianChart=b.Base.create("cartesianChart",b.Widget,[b.ChartBase],{renderUI:function(){var G=this.get("tooltip"),F;this.get("boundingBox").setStyle("position","absolute");this.get("contentBox").setStyle("position","absolute");this._addAxes();this._addGridlines();this._addSeries();if(G&&G.show){this._addTooltip();}this.get("styles");if(this.get("interactionType")=="planar"){F=document.createElement("div");this.get("contentBox").appendChild(F);this._overlay=b.one(F);this._overlay.setStyle("position","absolute");this._overlay.setStyle("background","#fff");this._overlay.setStyle("opacity",0);this._overlay.addClass("yui3-overlay");this._overlay.setStyle("zIndex",4);}this._redraw();},_planarEventDispatcher:function(Y){var G=this.get("graph"),K=this.get("boundingBox"),T=G.get("contentBox"),P=Y.pageX,Z=P-T.getX(),N=P-K.getX(),O=Y.pageY,X=O-T.getY(),M=O-K.getY(),F=G.get("seriesCollection"),Q,V=0,L,J=this._selectedIndex,aa,S=[],H=[],R=[],ab=this.get("direction"),ac,U=ab=="horizontal"?Z:X,I=ab=="horizontal"?F[0].get("xMarkerPlane"):F[0].get("yMarkerPlane"),W=I.length;for(;V<W;++V){if(U<=I[V].end&&U>=I[V].start){L=V;break;}}W=F.length;for(V=0;V<W;++V){Q=F[V];ac=Q.get("markers");if(ac&&!isNaN(J)&&J>-1){Q.updateMarkerState("mouseout",J);}if(Q.get("ycoords")[L]>-1){if(ac&&!isNaN(L)&&L>-1){Q.updateMarkerState("mouseover",L);}aa=this.getSeriesItems(Q,L);H.push(aa.category);R.push(aa.value);S.push(Q);}}this._selectedIndex=L;if(L>-1){this.fire("planarEvent:mouseover",{categoryItem:H,valueItem:R,x:N,y:M,items:S,index:L});}else{this.fire("planarEvent:mouseout");}},_type:"combo",_axesRenderQueue:null,_addToAxesRenderQueue:function(F){if(!this._axesRenderQueue){this._axesRenderQueue=[];}if(b.Array.indexOf(this._axesRenderQueue,F)<0){this._axesRenderQueue.push(F);}},_getDefaultSeriesCollection:function(Y){var O=this.get("direction"),F=Y||[],V,S,Q=[],L,K=this.get("seriesKeys").concat(),U,J,R,I=this.get("type"),W,N,X,G,H=this.get("categoryKey"),T=this.get("showMarkers"),P=this.get("showAreaFill"),M=this.get("showLines");if(O=="vertical"){V="yAxis";N="yKey";S="xAxis";X="xKey";}else{V="xAxis";N="xKey";S="yAxis";X="yKey";}R=F.length;for(U=0;U<R;++U){W=this._getBaseAttribute(F[U],X);if(W){J=b.Array.indexOf(K,W);if(J>-1){K.splice(J,1);}Q.push(W);}}if(K.length>0){Q=Q.concat(K);}R=Q.length;for(U=0;U<R;++U){L=F[U]||{type:I};if(L instanceof b.CartesianSeries){this._parseSeriesAxes(L);continue;}L[N]=L[N]||H;L[X]=L[X]||K.shift();L[V]=this._getCategoryAxis();L[S]=this._getSeriesAxis(L[X]);L.type=L.type||I;if((L.type=="combo"||L.type=="stackedcombo"||L.type=="combospline"||L.type=="stackedcombospline")){if(P!==null){L.showAreaFill=L.showAreaFill||P;}if(T!==null){L.showMarkers=L.showMarkers||T;}if(M!==null){L.showLines=L.showLines||M;}}F[U]=L;}if(Y){G=this.get("graph");G.set("seriesCollection",F);F=G.get("seriesCollection");}return F;},_parseSeriesAxes:function(G){var K=this.get("axes"),I=G.get("xAxis"),F=G.get("yAxis"),J=b.Axis,H;if(I&&!(I instanceof J)&&b.Lang.isString(I)&&K.hasOwnProperty(I)){H=K[I];if(H instanceof J){G.set("xAxis",H);}}if(F&&!(F instanceof J)&&b.Lang.isString(F)&&K.hasOwnProperty(F)){H=K[F];if(H instanceof J){G.set("yAxis",H);}}},_getCategoryAxis:function(){var F,G=this.get("axes"),H=this.get("categoryAxisName")||this.get("categoryKey");F=G[H];return F;},_getSeriesAxis:function(G,K){var J=this.get("axes"),F,I,H;if(J){if(K&&J.hasOwnProperty(K)){H=J[K];}else{for(F in J){if(J.hasOwnProperty(F)){I=J[F].get("keys");if(I&&I.hasOwnProperty(G)){H=J[F];break;
}}}}}return H;},_getBaseAttribute:function(G,F){if(G instanceof b.Base){return G.get(F);}if(G.hasOwnProperty(F)){return G[F];}return null;},_setBaseAttribute:function(G,F,H){if(G instanceof b.Base){G.set(F,H);}else{G[F]=H;}},_parseAxes:function(G){var K=this._getDefaultAxes(G),N={},I={edgeOffset:"edgeOffset",position:"position",overlapGraph:"overlapGraph",labelFunction:"labelFunction",labelFunctionScope:"labelFunctionScope",labelFormat:"labelFormat",maximum:"maximum",minimum:"minimum",roundingMethod:"roundingMethod",alwaysShowZero:"alwaysShowZero"},J=this.get("dataProvider"),Q,L,R,H,P,O,F,M;for(L in K){if(K.hasOwnProperty(L)){P=K[L];if(P instanceof b.Axis){H=P;}else{O=this._getAxisClass(P.type);F={};F.dataProvider=P.dataProvider||J;F.keys=P.keys;if(P.hasOwnProperty("roundingUnit")){F.roundingUnit=P.roundingUnit;}R=P.position;if(P.styles){F.styles=P.styles;}F.position=P.position;for(Q in I){if(I.hasOwnProperty(Q)&&P.hasOwnProperty(Q)){F[Q]=P[Q];}}H=new O(F);}if(H){M=this.get(R+"AxesCollection");if(M&&b.Array.indexOf(M,H)>0){H.set("overlapGraph",false);}H.after("axisRendered",b.bind(this._axisRendered,this));N[L]=H;}}}return N;},_addAxes:function(){var K=this.get("axes"),G,I,L,F=this.get("width"),H=this.get("height"),J=b.Node.one(this._parentNode);if(!this._axesCollection){this._axesCollection=[];}for(G in K){if(K.hasOwnProperty(G)){I=K[G];if(I instanceof b.Axis){if(!F){this.set("width",J.get("offsetWidth"));F=this.get("width");}if(!H){this.set("height",J.get("offsetHeight"));H=this.get("height");}I.set("width",F);I.set("height",H);this._addToAxesRenderQueue(I);L=I.get("position");if(!this.get(L+"AxesCollection")){this.set(L+"AxesCollection",[I]);}else{this.get(L+"AxesCollection").push(I);}this._axesCollection.push(I);if(I.get("keys").hasOwnProperty(this.get("categoryKey"))){this.set("categoryAxis",I);}I.render(this.get("contentBox"));}}}},_addSeries:function(){var F=this.get("graph"),G=this.get("seriesCollection");F.render(this.get("contentBox"));},_addGridlines:function(){var P=this.get("graph"),G=this.get("horizontalGridlines"),H=this.get("verticalGridlines"),O=this.get("direction"),Q=this.get("leftAxesCollection"),K=this.get("rightAxesCollection"),M=this.get("bottomAxesCollection"),I=this.get("topAxesCollection"),J,F=this.get("categoryAxis"),N,L;if(this._axesCollection){J=this._axesCollection.concat();J.splice(b.Array.indexOf(J,F),1);}if(G){if(Q&&Q[0]){N=Q[0];}else{if(K&&K[0]){N=K[0];}else{N=O=="horizontal"?F:J[0];}}if(!this._getBaseAttribute(G,"axis")&&N){this._setBaseAttribute(G,"axis",N);}if(this._getBaseAttribute(G,"axis")){P.set("horizontalGridlines",G);}}if(H){if(M&&M[0]){L=M[0];}else{if(I&&I[0]){L=I[0];}else{L=O=="vertical"?F:J[0];}}if(!this._getBaseAttribute(H,"axis")&&L){this._setBaseAttribute(H,"axis",L);}if(this._getBaseAttribute(H,"axis")){P.set("verticalGridlines",H);}}},_getDefaultAxes:function(X){var P=this.get("categoryKey"),G,V,R,I={},T=[],H=this.get("categoryAxisName")||this.get("categoryKey"),F=this.get("valueAxisName"),J=this.get("seriesKeys")||[],Y,W,O,M,S,Q,U=this.get("dataProvider"),Z=this.get("direction"),N,K,L=[],aa=this.get("stacked")?"stacked":"numeric";Q=U[0];if(Z=="vertical"){N="bottom";K="left";}else{N="left";K="bottom";}if(X){for(Y in X){if(X.hasOwnProperty(Y)){G=X[Y];R=this._getBaseAttribute(G,"keys");V=this._getBaseAttribute(G,"type");if(V=="time"||V=="category"){H=Y;this.set("categoryAxisName",Y);if(b.Lang.isArray(R)&&R.length>0){P=R[0];this.set("categoryKey",P);}I[Y]=G;}else{if(Y==H){I[Y]=G;}else{I[Y]=G;if(Y!=F&&R&&b.Lang.isArray(R)){M=R.length;for(O=0;O<M;++O){T.push(R[O]);}L.push(I[Y]);}if(!(this._getBaseAttribute(I[Y],"type"))){this._setBaseAttribute(I[Y],"type",aa);}if(!(this._getBaseAttribute(I[Y],"position"))){this._setBaseAttribute(I[Y],"position",this._getDefaultAxisPosition(I[Y],L,N));}}}}}}if(J.length<1){for(Y in Q){if(Q.hasOwnProperty(Y)&&Y!=P&&b.Array.indexOf(T,Y)==-1){J.push(Y);}}}S=b.Array.indexOf(J,P);if(S>-1){J.splice(S,1);}W=T.length;for(Y=0;Y<W;++Y){S=b.Array.indexOf(J,T[Y]);if(S>-1){J.splice(S,1);}}if(!I.hasOwnProperty(H)){I[H]={};}if(!(this._getBaseAttribute(I[H],"keys"))){this._setBaseAttribute(I[H],"keys",[P]);}if(!(this._getBaseAttribute(I[H],"position"))){this._setBaseAttribute(I[H],"position",K);}if(!(this._getBaseAttribute(I[H],"type"))){this._setBaseAttribute(I[H],"type",this.get("categoryType"));}if(!I.hasOwnProperty(F)&&J&&J.length>0){I[F]={keys:J};L.push(I[F]);}if(T.length>0){if(J.length>0){J=T.concat(J);}else{J=T;}}if(I.hasOwnProperty(F)){if(!(this._getBaseAttribute(I[F],"position"))){this._setBaseAttribute(I[F],"position",this._getDefaultAxisPosition(I[F],L,N));}if(!(this._getBaseAttribute(I[F],"type"))){this._setBaseAttribute(I[F],"type",aa);}if(!(this._getBaseAttribute(I[F],"keys"))){this._setBaseAttribute(I[F],"keys",J);}}this.set("seriesKeys",J);return I;},_getDefaultAxisPosition:function(I,G,F){var J=this.get("direction"),H=b.Array.indexOf(G,I);if(G[H-1]&&G[H-1].position){if(J=="horizontal"){if(G[H-1].position=="left"){F="right";}else{if(G[H-1].position=="right"){F="left";}}}else{if(G[H-1].position=="bottom"){F="top";}else{F="bottom";}}}return F;},getSeriesItems:function(K,J){var L=K.get("xAxis"),H=K.get("yAxis"),I=K.get("xKey"),G=K.get("yKey"),M,F;if(this.get("direction")=="vertical"){M={axis:H,key:G,value:H.getKeyValueAt(G,J)};F={axis:L,key:I,value:L.getKeyValueAt(I,J)};}else{F={axis:H,key:G,value:H.getKeyValueAt(G,J)};M={axis:L,key:I,value:L.getKeyValueAt(I,J)};}M.displayName=K.get("categoryDisplayName");F.displayName=K.get("valueDisplayName");M.value=M.axis.getKeyValueAt(M.key,J);F.value=F.axis.getKeyValueAt(F.key,J);return{category:M,value:F};},_axisRendered:function(F){this._axesRenderQueue=this._axesRenderQueue.splice(1+b.Array.indexOf(this._axesRenderQueue,F.currentTarget),1);if(this._axesRenderQueue.length<1){this._redraw();}},_sizeChanged:function(I){if(this._axesCollection){var H=this._axesCollection,G=0,F=H.length;for(;G<F;++G){this._addToAxesRenderQueue(H[G]);}this._redraw();}},_redraw:function(){if(this._drawing){this._callLater=true;
return;}this._drawing=true;this._callLater=false;var T=this.get("width"),Q=this.get("height"),L=0,I=0,G=0,O=0,H=this.get("leftAxesCollection"),F=this.get("rightAxesCollection"),N=this.get("topAxesCollection"),R=this.get("bottomAxesCollection"),P=0,M,K,S,V=[],J="visible",U=this.get("graph");if(H){M=H.length;for(P=M-1;P>-1;--P){V[b.Array.indexOf(this._axesCollection,H[P])]={x:L+"px"};L+=H[P].get("width");}}if(F){M=F.length;P=0;for(P=M-1;P>-1;--P){I+=F[P].get("width");V[b.Array.indexOf(this._axesCollection,F[P])]={x:(T-I)+"px"};}}if(N){M=N.length;for(P=M-1;P>-1;--P){V[b.Array.indexOf(this._axesCollection,N[P])]={y:G+"px"};G+=N[P].get("height");}}if(R){M=R.length;for(P=M-1;P>-1;--P){O+=R[P].get("height");V[b.Array.indexOf(this._axesCollection,R[P])]={y:(Q-O)+"px"};}}M=this._axesCollection.length;P=0;for(;P<M;++P){K=this._axesCollection[P];S=K.get("position");if(S=="left"||S==="right"){K.get("boundingBox").setStyle("top",G+"px");K.get("boundingBox").setStyle("left",V[P].x);if(K.get("height")!==Q-(O+G)){K.set("height",Q-(O+G));}}else{if(S=="bottom"||S=="top"){if(K.get("width")!==T-(L+I)){K.set("width",T-(L+I));}K.get("boundingBox").setStyle("left",L+"px");K.get("boundingBox").setStyle("top",V[P].y);}}if(K.get("setMax")||K.get("setMin")){J="hidden";}}this._drawing=false;if(this._callLater){this._redraw();return;}if(U){U.get("boundingBox").setStyle("left",L+"px");U.get("boundingBox").setStyle("top",G+"px");U.set("width",T-(L+I));U.set("height",Q-(G+O));U.get("boundingBox").setStyle("overflow",J);}if(this._overlay){this._overlay.setStyle("left",L+"px");this._overlay.setStyle("top",G+"px");this._overlay.setStyle("width",(T-(L+I))+"px");this._overlay.setStyle("height",(Q-(G+O))+"px");}}},{ATTRS:{axesStyles:{getter:function(){var H=this.get("axes"),F,G=this._axesStyles;if(H){for(F in H){if(H.hasOwnProperty(F)&&H[F] instanceof b.Axis){if(!G){G={};}G[F]=H[F].get("styles");}}}return G;},setter:function(H){var G=this.get("axes"),F;for(F in H){if(H.hasOwnProperty(F)&&G.hasOwnProperty(F)){this._setBaseAttribute(G[F],"styles",H[F]);}}}},seriesStyles:{getter:function(){var G=this._seriesStyles,H=this.get("graph"),I,F;if(H){I=H.get("seriesDictionary");if(I){G={};for(F in I){if(I.hasOwnProperty(F)){G[F]=I[F].get("styles");}}}}return G;},setter:function(I){var G,F,H;if(b.Lang.isArray(I)){H=this.get("seriesCollection");G=0;F=I.length;for(;G<F;++G){this._setBaseAttribute(H[G],"styles",I[G]);}}else{for(G in I){if(I.hasOwnProperty(G)){H=this.getSeries(G);this._setBaseAttribute(H,"styles",I[G]);}}}}},graphStyles:{getter:function(){var F=this.get("graph");if(F){return(F.get("styles"));}return this._graphStyles;},setter:function(G){var F=this.get("graph");this._setBaseAttribute(F,"styles",G);}},styles:{getter:function(){var F={axes:this.get("axesStyles"),series:this.get("seriesStyles"),graph:this.get("graphStyles")};return F;},setter:function(F){if(F.hasOwnProperty("axes")){if(this.get("axesStyles")){this.set("axesStyles",F.axes);}else{this._axesStyles=F.axes;}}if(F.hasOwnProperty("series")){if(this.get("seriesStyles")){this.set("seriesStyles",F.series);}else{this._seriesStyles=F.series;}}if(F.hasOwnProperty("graph")){this.set("graphStyles",F.graph);}}},axes:{valueFn:"_parseAxes",setter:function(F){return this._parseAxes(F);}},seriesCollection:{valueFn:"_getDefaultSeriesCollection",setter:function(F){return this._getDefaultSeriesCollection(F);}},leftAxesCollection:{},bottomAxesCollection:{},rightAxesCollection:{},topAxesCollection:{},stacked:{value:false},direction:{getter:function(){var F=this.get("type");if(F=="bar"){return"vertical";}else{if(F=="column"){return"horizontal";}}return this._direction;},setter:function(F){this._direction=F;return this._direction;}},showAreaFill:{},showMarkers:{},showLines:{},categoryAxisName:{},valueAxisName:{value:"values"},horizontalGridlines:{getter:function(){var F=this.get("graph");if(F){return F.get("horizontalGridlines");}return this._horizontalGridlines;},setter:function(G){var F=this.get("graph");if(G&&!b.Lang.isObject(G)){G={};}if(F){F.set("horizontalGridlines",G);}else{this._horizontalGridlines=G;}}},verticalGridlines:{getter:function(){var F=this.get("graph");if(F){return F.get("verticalGridlines");}return this._verticalGridlines;},setter:function(G){var F=this.get("graph");if(G&&!b.Lang.isObject(G)){G={};}if(F){F.set("verticalGridlines",G);}else{this._verticalGridlines=G;}}},type:{getter:function(){if(this.get("stacked")){return"stacked"+this._type;}return this._type;},setter:function(F){if(this._type=="bar"){if(F!="bar"){this.set("direction","horizontal");}}else{if(F=="bar"){this.set("direction","vertical");}}this._type=F;return this._type;}},categoryAxis:{}}});b.PieChart=b.Base.create("pieChart",b.Widget,[b.ChartBase],{_getSeriesCollection:function(){if(this._seriesCollection){return this._seriesCollection;}var K=this.get("axes"),M=[],L,I=0,H,N=this.get("type"),P,F="categoryAxis",J="categoryKey",G="valueAxis",O="valueKey";if(K){L=K.values.get("keyCollection");P=K.category.get("keyCollection")[0];H=L.length;for(;I<H;++I){M[I]={type:N};M[I][F]="category";M[I][G]="values";M[I][J]=P;M[I][O]=L[I];}}this._seriesCollection=M;return M;},_parseAxes:function(I){if(!this._axes){this._axes={};}var J,O,H,M,F,L,N=this.get("type"),P=this.get("width"),K=this.get("height"),G=b.Node.one(this._parentNode);if(!P){this.set("width",G.get("offsetWidth"));P=this.get("width");}if(!K){this.set("height",G.get("offsetHeight"));K=this.get("height");}for(J in I){if(I.hasOwnProperty(J)){M=I[J];O=N=="pie"?"none":M.position;L=this._getAxisClass(M.type);F={dataProvider:this.get("dataProvider")};if(M.hasOwnProperty("roundingUnit")){F.roundingUnit=M.roundingUnit;}F.keys=M.keys;F.width=P;F.height=K;F.position=O;F.styles=M.styles;H=new L(F);H.on("axisRendered",b.bind(this._axisRendered,this));this._axes[J]=H;}}},_addAxes:function(){var I=this.get("axes"),F,G,H;if(!I){this.set("axes",this._getDefaultAxes());I=this.get("axes");}if(!this._axesCollection){this._axesCollection=[];}for(F in I){if(I.hasOwnProperty(F)){G=I[F];
H=G.get("position");if(!this.get(H+"AxesCollection")){this.set(H+"AxesCollection",[G]);}else{this.get(H+"AxesCollection").push(G);}this._axesCollection.push(G);}}},_addSeries:function(){var F=this.get("graph"),G=this.get("seriesCollection");this._parseSeriesAxes(G);F.set("showBackground",false);F.set("width",this.get("width"));F.set("height",this.get("height"));F.set("seriesCollection",G);this._seriesCollection=F.get("seriesCollection");F.render(this.get("contentBox"));},_parseSeriesAxes:function(K){var G=0,F=K.length,I,J=this.get("axes"),H;for(;G<F;++G){I=K[G];if(I){if(I instanceof b.PieSeries){H=I.get("categoryAxis");if(H&&!(H instanceof b.Axis)){I.set("categoryAxis",J[H]);}H=I.get("valueAxis");if(H&&!(H instanceof b.Axis)){I.set("valueAxis",J[H]);}continue;}I.categoryAxis=J.category;I.valueAxis=J.values;if(!I.type){I.type=this.get("type");}}}},_getDefaultAxes:function(){var J=this.get("categoryKey"),G=this.get("seriesKeys")||[],F="numeric",I,H=this.get("dataProvider")[0];if(G.length<1){for(I in H){if(I!=J){G.push(I);}}if(G.length>0){this.set("seriesKeys",G);}}return{values:{keys:G,type:F},category:{keys:[J],type:this.get("categoryType")}};},getSeriesItems:function(H,G){var I={axis:H.get("categoryAxis"),key:H.get("categoryKey"),displayName:H.get("categoryDisplayName")},F={axis:H.get("valueAxis"),key:H.get("valueKey"),displayName:H.get("valueDisplayName")};I.value=I.axis.getKeyValueAt(I.key,G);F.value=F.axis.getKeyValueAt(F.key,G);return{category:I,value:F};},_sizeChanged:function(F){this._redraw();},_redraw:function(){var F=this.get("graph");if(F){F.set("width",this.get("width"));F.set("height",this.get("height"));}}},{ATTRS:{axes:{getter:function(){return this._axes;},setter:function(F){this._parseAxes(F);}},seriesCollection:{getter:function(){return this._getSeriesCollection();},setter:function(F){return this._setSeriesCollection(F);}},type:{value:"pie"}}});function y(F){if(F.type!="pie"){return new b.CartesianChart(F);}else{return new b.PieChart(F);}}b.Chart=y;},"gallery-2011.01.26-20-33",{requires:["dom","datatype","event-custom","event-mouseenter","widget","widget-position","widget-stack"]});