YUI.add("gallery-bt-pushpop",function(c){var h="renderUI",j="pushpop",d="heightChange",e="widthChange",g="addChild",f={none:"none","with":"with",after:1},i={right:[1,0],left:[-1,0],top:[0,-1],bottom:[0,1],tr:[1,-1],br:[1,1],tl:[-1,-1],bl:[-1,1]},b=function(k,l){k.get("boundingBox").setStyles({left:l.left,top:l.top});},a=function(k){this._bppEventHandlers=new c.EventHandle([c.after(this._renderUIPushPop,this,h),this.before(g,this._beforePPAddChild),this.after(e,this._afterPPWidthChange),this.after(d,this._afterPPHeightChange),this.on("destroy",this._destroyPushPop)]);};a.ATTRS={defaultChildType:{value:c.Bottle.Container},underlay:{value:"none",validator:function(k){return f[k]||c.Lang.isNumber(k);},setter:function(k){return f[k];}},ppTrans:{value:{duration:0.5},lazyAdd:false,validator:c.Lang.isObject,setter:function(k){this._updateTransitions(0,k);return k;}},pushFrom:{value:"right",lazyAdd:false,validator:function(k){return i[k];},setter:function(k){this._updateTransitions(k);return k;}}};a.HTML_PARSER={ppTrans:function(l){try{return c.JSON.parse(l.getData("cfg-pp-trans"));}catch(k){}},pushFrom:function(k){return k.getData("push-from");},underlay:function(k){return k.getData("underlay");}};a.prototype={initializer:function(){var m=this,n=this.get("srcNode"),k=n.get("offsetWidth"),l=n.get("offsetHeight");if(!k){this.set("width",k);}if(!l){this.set("height",l);}this.get("contentBox").all("> [data-role=container]").each(function(o){m.add({srcNode:o});});},_destroyPushPop:function(){this._bppEventHandlers.detach();delete this._bppEventHandlers;},_updateTransitions:function(n,o){var m=n||this.get("pushFrom"),k=o||this.get("ppTrans"),l=i[m];this._PUSHPOP_TRANS=c.merge(k,{left:l[0]*this.get("width")+"px",top:l[1]*this.get("height")+"px"});this._DONE_TRANS=c.merge(k,{left:0,top:0});this._UNDERLAY_TRANS=c.merge(k,{left:-l[0]*this.get("width")+"px",top:-l[1]*this.get("height")+"px"});},_syncOneSide:function(l){var k=this.get(l);this.each(function(m){this.set(l,k);});this._updateTransitions();},_afterPPHeightChange:function(){this._syncOneSide("height");},_afterPPWidthChange:function(){this._syncOneSide("width");},_beforePPAddChild:function(k){if(c.instanceOf(k.child,this.get("defaultChildType"))){this.sync(k.child);}else{k.halt();}},_renderUIPushPop:function(){this.get("boundingBox").addClass(c.Widget.getClassName(j));},sync:function(k){k.set("width",this.get("width"));k.set("height",this.get("height"));return this;},topItem:function(){return this.item(this.size()-1);},topScroll:function(){var k=this.topItem();return k?k.get("scrollView"):undefined;},getChild:function(k){if(c.instanceOf(k,this.get("defaultChildType"))){return k;}if(c.Lang.isNumber(k)){return this.item(k);}},moveChild:function(n,o,l){var k=this.getChild(n),m=this;if(l===true){b(k,o);}else{if(this.get("visible")){k.get("boundingBox").transition(o,function(){if(l){l.apply(m);}});}else{b(k,o);if(l){l.apply(m);}}}return this;},push:function(m){var k=this.size()-1,l=this.get("underlay");if(l=="with"){this.moveChild(k,this._UNDERLAY_TRANS);}this.add(m);this.moveChild(m,this._PUSHPOP_TRANS,true);if(c.Lang.isNumber(l)){return this.moveChild(k,this._UNDERLAY_TRANS,function(){c.later(l,this,function(){this.moveChild(m,this._DONE_TRANS);});});}else{return this.moveChild(m,this._DONE_TRANS);}},pop:function(k){var l=this.size()-1,n=this.item(l),m=this.get("underlay");if(!n){return this;}if(m!=="none"){this.moveChild(l-1,this._UNDERLAY_TRANS,true);if((m=="with")&&l){this.moveChild(l-1,this._DONE_TRANS);}}return this.moveChild(n,this._PUSHPOP_TRANS,function(){n.remove();if(!k){n.destroy(true);}if(l&&c.Lang.isNumber(m)){c.later(m,this,function(){this.moveChild(l-1,this._DONE_TRANS);});}});}};c.namespace("Bottle").PushPop=a;},"@VERSION@",{requires:["base-build","widget-parent","gallery-bt-container"]});