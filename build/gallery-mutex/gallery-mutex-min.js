YUI.add("gallery-mutex",function(a){(function(f){var e=f.namespace("Mutex"),d=f.Object.isEmpty,c=f.later,b=f.soon;f.mix(e,{exclusive:function(i,k,n){var g=e._locks,m=f.guid(),o=g[i],j,h=function(){e._unlockExclusive(m,i);},l=[m,i,k,n,h];if(!o){o={};g[i]=o;}if(o.e||o.s||o.u){j=o.eq;if(!j){j=[];o.eq=j;}j.push(l);}else{e._lockExclusive.apply(e,l);}return{cancel:h,mode:"exclusive"};},shared:function(i,k,n){var g=e._locks,m=f.guid(),o=g[i],j,h=function(){e._unlockShared(m,i);},l=[m,i,k,n,h];if(!o){o={};g[i]=o;}if(o.e||o.eq||o.ue){j=o.sq;if(!j){j=[];o.sq=j;}j.push(l);}else{e._lockShared.apply(e,l);}return{cancel:h,mode:"shared"};},upgradable:function(i,k,n){var g=e._locks,m=f.guid(),o=g[i],j,h=function(){e._unlockUpgradable(m,i);},l=[m,i,k,n,h];if(!o){o={};g[i]=o;}if(o.e||o.eq||o.u){j=o.uq;if(!j){j=[];o.uq=j;}j.push(l);}else{e._lockUpgradable.apply(e,l);}return{cancel:h,mode:"upgradable"};},_cancelTimer:function(g,i){var h=e._locks[i],j=h&&h.t,k=j&&j[g];if(k){k.cancel();delete j[g];if(d(j)){delete h.t;}}},_lockExclusive:function(i,k,h,l,m){var g=e._locks,j=g[k];if(!j){j={};g[k]=j;}j.e=i;b(function(){if(l){var n=j.t;if(!n){n={};j.t=n;}n[i]=c(l,null,m);}h(m);});},_lockQueue:function(k){var h=e._locks,j=h[k],i,g;if(!j||j.e){return;}if(!j.s&&!j.u){g=j.eq;if(g){i=g.shift();if(!g.length){delete j.eq;}if(i){e._lockExclusive.apply(e,i);return;}}}if(j.u){if(j.ue&&!j.s){j.ue();return;}}if(j.eq){return;}g=j.uq;if(g){i=g.shift();if(!g.length){delete j.uq;}if(i){e._lockUpgradable.apply(e,i);}}g=j.sq;if(g){while(g.length){e._lockShared.apply(e,g.shift());}delete j.sq;}if(d(j)){delete h[k];}},_locks:{},_lockShared:function(i,k,h,m,n){var g=e._locks,j=g[k],l;if(!j){j={};g[k]=j;}l=j.s;if(!l){l={};j.s=l;}l[i]=true;b(function(){if(m){var o=j.t;if(!o){o={};j.t=o;}o[i]=c(m,null,n);}h(n);});},_lockUpgradable:function(i,k,h,l,m){var g=e._locks,j=g[k];if(!j){j={};g[k]=j;}j.u=i;b(function(){var p,o,n;p=function(q){var r=g[k]||{},s=function(){var t=g[k]||{};if(t.u!==i){return;}t.e=i;delete t.u;delete t.ue;b(function(){q(o);});};if(r.u!==i){return;}if(r.s){r.ue=s();}else{s();}};o=function(q){var r=g[k]||{};if(r.e!==i){return;}r.u=i;delete r.e;e._lockQueue(k);b(function(){q(p);});};if(l){n=j.t;if(!n){n={};j.t=n;}n[i]=c(l,null,m);}h(m,p);});},_unlockExclusive:function(g,i){e._cancelTimer(g,i);var h=e._locks[i]||{};if(h.e!==g){return;}delete h.e;e._lockQueue(i);},_unlockShared:function(g,i){e._cancelTimer(g,i);var h=e._locks[i]||{},j=h.s;if(!j||!j[g]){return;}delete j[g];if(d(j)){delete h.s;}e._lockQueue(i);},_unlockUpgradable:function(g,i){e._cancelTimer(g,i);var h=e._locks[i]||{};if(h.e===g){delete h.e;}else{if(h.u===g){delete h.u;delete h.ue;}else{return;}}e._lockQueue(i);}});}(a));},"gallery-2012.04.26-15-49",{requires:["gallery-soon"],skinnable:false});