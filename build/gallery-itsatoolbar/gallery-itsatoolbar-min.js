YUI.add("gallery-itsatoolbar",function(c){var e=c.Lang,r=c.Node,f="<button class='yui3-button'></button>",j="<span class='itsa-button-icon'></span>",l="yui3-button-active",q="itsa-button-active",h="itsa-button-indent",o="itsa-button",t="itsa-syncbutton",n="itsa-togglebutton",k="itsa-buttongroup",p="itsa-button-customfunc",s="<div class='itsatoolbar'></div>",b="itsa-buttonsize-small",a="itsa-buttonsize-medium",u="itsatoolbar-editorpart",d="<div></div>",m="<span id='itsatoolbar-ref'></span>",g="itsa-selection-tmp",i="itsa-fontsize";c.namespace("Plugin").ITSAToolbar=c.Base.create("itsatoolbar",c.Plugin.Base,[],{editor:null,editorY:null,editorNode:null,containerNode:null,toolbarNode:null,_destroyed:false,ICON_BOLD:"itsa-icon-bold",ICON_ITALIC:"itsa-icon-italic",ICON_UNDERLINE:"itsa-icon-underline",ICON_ALIGN_LEFT:"itsa-icon-alignleft",ICON_ALIGN_CENTER:"itsa-icon-aligncenter",ICON_ALIGN_RIGHT:"itsa-icon-alignright",ICON_ALIGN_JUSTIFY:"itsa-icon-alignjustify",ICON_SUBSCRIPT:"itsa-icon-subscript",ICON_SUPERSCRIPT:"itsa-icon-superscript",ICON_TEXTCOLOR:"itsa-icon-textcolor",ICON_MARKCOLOR:"itsa-icon-markcolor",ICON_INDENT:"itsa-icon-indent",ICON_OUTDENT:"itsa-icon-outdent",ICON_UNORDEREDLIST:"itsa-icon-unorderedlist",ICON_ORDEREDLIST:"itsa-icon-orderedlist",ICON_UNDO:"itsa-icon-undo",ICON_REDO:"itsa-icon-redo",ICON_EMAIL:"itsa-icon-email",ICON_HYPERLINK:"itsa-icon-hyperlink",ICON_IMAGE:"itsa-icon-image",ICON_FILE:"itsa-icon-file",ICON_VIDEO:"itsa-icon-video",initializer:function(w){var v=this;v.editor=v.get("host");if(v.editor.frame&&v.editor.frame.get("node")){v._render();}else{if(c.UA.ie>0){c.later(250,v,v._render);}else{v.editor.on("frame:ready",v._render,v);}}},_render:function(){var v=this;if(!v._destroyed){v.editorY=v.editor.getInstance();v.editorNode=v.editor.frame.get("node");v.containerNode=v.editorNode.get("parentNode");v.get("paraSupport")?v.editor.plug(c.Plugin.EditorPara):v.editor.plug(c.Plugin.EditorBR);v.editor.plug(c.Plugin.ExecCommand);v._defineCustomExecCommands();v._renderUI();v._bindUI();v.editor.frame.focus(c.bind(v.sync,v));}},_getCursorRef:function(){var v=this,w;v._removeCursorRef();w=v._getSelectedNode();if(w){w.addClass(g);v.editorY.one("body").insertBefore(m,w);}else{v.editor.exec.command("inserthtml",m);w=v.editorY.one("#itsatoolbar-ref");}return w;},_removeCursorRef:function(){var v=this,x,w;w=v.editorY?v.editorY:c;x=w.all("#itsatoolbar-ref");if(x){x.remove();}x=w.all("."+g);if(x.size()>0){x.each(function(y){y.replace(y.getHTML());});}},_setCursorAtRef:function(){var v=this,x,w=v.editorY.one("#itsatoolbar-ref");if(w){x=new v.editorY.EditorSelection();x.selectNode(w);v._removeCursorRef();}},_getSelectedNode:function(){var v=this,x=null,y=new v.editorY.EditorSelection(),w=y.getSelected();if(!y.isCollapsed&&w.size()){x=w.item(0);}return x;},sync:function(w){var v=this;if(!w||!w.changedNode){w={changedNode:v._getCursorRef()};c.later(500,v,v._removeCursorRef);}v.toolbarNode.fire("itsatoolbar:statusChange",w);},addButton:function(y,A,x,w){var v=this,z,B;z=r.create(f);z.addClass(o);if(e.isString(A)){z.setData("execCommand",A);}else{if(e.isObject(A)){if(e.isString(A.command)){z.setData("execCommand",A.command);}if(e.isString(A.value)){z.setData("execValue",A.value);}if(e.isFunction(A.customFunc)){z.addClass(p);z.on("click",A.customFunc,A.context||v);}}}if(e.isBoolean(x)&&x){z.addClass(h);}B=r.create(j);B.addClass(y);z.append(B);v.toolbarNode.append(z);return z;},addSyncButton:function(B,C,z,v,x,y,A){var D=this,w=D.addButton(B,C,x,y);if(!A){w.addClass(t);}D.toolbarNode.addTarget(w);if(e.isFunction(z)){w.on("itsatoolbar:statusChange",c.bind(z,v||D));}return w;},addToggleButton:function(y,B,C,A,x,w){var v=this,z=v.addSyncButton(y,B,C,A,x,w,true);z.addClass(n);return z;},addButtongroup:function(C,x,B){var E=this,A=c.guid(),z,w,v=null,D,y;for(y=0;y<C.length;y++){z=C[y];if(z.iconClass&&z.command){if(e.isString(z.value)){D={command:z.command,value:z.value};}else{D=z.command;}w=E.addButton(z.iconClass,D,x&&(y===0),(B)?B+y:null);w.addClass(k);w.addClass(k+"-"+A);w.setData("buttongroup",A);E.toolbarNode.addTarget(w);if(e.isFunction(z.syncFunc)){w.on("itsatoolbar:statusChange",c.bind(z.syncFunc,z.context||E));}if(!v){v=w;}}}return v;},addSelectlist:function(B,C,A,v,x,w,z){var D=this,y;w=c.merge(w,{items:B,defaultButtonText:""});y=new c.ITSASelectList(w);y.after("render",function(L,I,J,H,F){var E=this,K=L.currentTarget,G=K.buttonNode;if(e.isString(I)){G.setData("execCommand",I);}else{if(e.isString(I.command)){G.setData("execCommand",I.command);}if(e.isString(I.restoreCommand)){G.setData("restoreCommand",I.restoreCommand);}if(e.isString(I.restoreValue)){G.setData("restoreValue",I.restoreValue);}}if(F){K.get("boundingBox").addClass("itsa-button-indent");}E.toolbarNode.addTarget(G);K.on("selectChange",E._handleSelectChange,E);if(e.isFunction(J)){G.on("itsatoolbar:statusChange",c.rbind(J,H||E));}E.editor.on("nodeChange",K.hideListbox,K);},D,C,A,v,x);y.render(D.toolbarNode);return y;},destructor:function(){var v=this,w=v.get("srcNode");v._destroyed=true;v._removeCursorRef();if(v.toolbarNode){v.toolbarNode.remove(true);}},_renderUI:function(){var x=this,w=0,y=x.get("srcNode"),v=x.get("btnSize");x.toolbarNode=r.create(s);if(v===1){x.toolbarNode.addClass(b);}else{if(v===2){x.toolbarNode.addClass(a);}}if(y){y.prepend(x.toolbarNode);}else{x.toolbarNode.addClass(u);switch(x.get("btnSize")){case 1:w=-40;break;case 2:w=-44;break;case 3:w=-46;break;}w+=parseInt(x.containerNode.get("offsetHeight"),10)-parseInt(x.containerNode.getComputedStyle("paddingTop"),10)-parseInt(x.containerNode.getComputedStyle("borderTopWidth"),10)-parseInt(x.containerNode.getComputedStyle("borderBottomWidth"),10);x.editorNode.set("height",w);x.editorNode.insert(x.toolbarNode,"before");}x._initializeButtons();},_bindUI:function(){var v=this;v.editor.on("nodeChange",v.sync,v);v.toolbarNode.delegate("click",v._handleBtnClick,"button",v);},_defineCustomExecCommands:function(){var v=this;v._defineExecCommandHeader();v._defineExecCommandFontSize();
v._defineExecCommandHyperlink();v._defineExecCommandMaillink();v._defineExecCommandImage();v._defineExecCommandYouTube();},_handleBtnClick:function(x){var v=this,w=x.currentTarget;if(w.hasClass(o)){if(w.hasClass(n)){w.toggleClass(l);}else{if(w.hasClass(t)){w.toggleClass(q,true);}else{if(w.hasClass(k)){v.toolbarNode.all("."+k+"-"+w.getData("buttongroup")).toggleClass(l,false);w.toggleClass(l,true);}}}if(!w.hasClass(p)){v._execCommandFromData(w);}}},_handleSelectChange:function(y){var x,v,w;x=y.currentTarget.buttonNode;v=x.getData("restoreCommand");w=(v&&(y.value===x.getData("restoreValue")))?v:x.getData("execCommand");this.execCommand(w,y.value);},_execCommandFromData:function(v){var w,x;w=v.getData("execCommand");x=v.getData("execValue");this.execCommand(w,x);},execCommand:function(x,w){var v=this;v.editor.focus();v.editor.exec.command(x,w);},_hasSelection:function(){var v=this,w=new v.editorY.EditorSelection();return(!w.isCollapsed&&w.anchorNode);},_checkInbetweenSelector:function(w,D){var E=this,B="<\\s*"+w+"[^>]*>(.*?)<\\s*/\\s*"+w+">",v=new RegExp(B,"gi"),z,C=false,x=E.editorY.one("body").getHTML(),y,A;y=r.create("<div></div>");y.append(D.cloneNode(true));A=x.indexOf(y.getHTML());z=v.exec(x);while((z!==null)&&!C){C=((A>=z.index)&&(A<(z.index+z[0].length)));z=v.exec(x);}return C;},_getActiveHeader:function(F){var H=this,D,w,C,G,A,B,y=0,x=null,E,v,z;if(F){B=F.get("tagName");if(B.length>1){y=parseInt(B.substring(1),10);}if((B.length===2)&&(B.toLowerCase().substring(0,1)==="h")&&(y>0)&&(y<10)){x=F;}else{A=r.create("<div></div>");A.append(F.cloneNode(true));D=A.getHTML()+"(.*?)<\\s*/\\s*h\\d>";w=new RegExp(D,"gi");z=H.editorY.one("body").getHTML();C=w.exec(z);if(C!==null){v=C.index+C[0].length-1;y=z.substring(v-1,v);D="<\\s*h"+y+"[^>]*>(.*?)"+A.getHTML()+"(.*?)<\\s*/\\s*h"+y+">";w=new RegExp(D,"gi");C=w.exec(z);if(C!==null){G=z.substring(C.index,C.index+C[0].length);}}if(G){E=r.create(G);x=H.editorY.one("#"+E.get("id"));}}}return x;},_initializeButtons:function(){var D=this,y,w,z,C,E,A,F,v,x,B;if(D.get("btnFontfamily")){A=D.get("fontFamilies");for(y=0;y<A.length;y++){E=A[y];A[y]={text:"<span style='font-family:"+E+"'>"+E+"</span>",returnValue:E};}D.fontSelectlist=D.addSelectlist(A,"fontname2",function(J){var I=J.changedNode.getStyle("fontFamily"),H=I.split(","),G=H[0];if(G.substring(0,1)==="'"){G=G.substring(1,G.length-1);}this.fontSelectlist.selectItemByValue(G,true,true);},null,true,{buttonWidth:145});}if(D.get("btnFontsize")){A=[];for(y=6;y<=32;y++){A.push({text:y.toString(),returnValue:y+"px"});}D.sizeSelectlist=D.addSelectlist(A,"itsafontsize",function(J){var I=J.changedNode.getStyle("fontSize"),H=parseFloat(I),G=I.substring(H.toString().length);this.sizeSelectlist.selectItemByValue(Math.round(H)+G,true);},null,true,{buttonWidth:42,className:"itsatoolbar-fontsize",listAlignLeft:false});}if(D.get("btnHeader")){A=[];A.push({text:"No header",returnValue:"none"});for(y=1;y<=D.get("headerLevels");y++){A.push({text:"Header "+y,returnValue:"h"+y});}D.headerSelectlist=D.addSelectlist(A,"itsaheading",function(J){var H=this,I=J.changedNode,K=(J.sender&&J.sender==="itsaheading"),G;if(!K){G=H._getActiveHeader(I);H.headerSelectlist.selectItem(G?parseInt(G.get("tagName").substring(1),10):0);H.headerSelectlist.set("disabled",e.isNull(G)&&!H._hasSelection());}},null,true,{buttonWidth:96});}if(D.get("btnBold")){D.addToggleButton(D.ICON_BOLD,"bold",function(G){G.currentTarget.toggleClass(l,(G.changedNode.getStyle("fontWeight")==="bold"));},null,true);}if(D.get("btnItalic")){D.addToggleButton(D.ICON_ITALIC,"italic",function(G){G.currentTarget.toggleClass(l,(G.changedNode.getStyle("fontStyle")==="italic"));});}if(D.get("btnUnderline")){D.addToggleButton(D.ICON_UNDERLINE,"underline",function(G){G.currentTarget.toggleClass(l,(G.changedNode.getStyle("textDecoration")==="underline"));});}if(D.get("grpAlign")){B=[{iconClass:D.ICON_ALIGN_LEFT,command:"JustifyLeft",value:"",syncFunc:function(G){G.currentTarget.toggleClass(l,((G.changedNode.getStyle("textAlign")==="left")||(G.changedNode.getStyle("textAlign")==="start")));}},{iconClass:D.ICON_ALIGN_CENTER,command:"JustifyCenter",value:"",syncFunc:function(G){G.currentTarget.toggleClass(l,(G.changedNode.getStyle("textAlign")==="center"));}},{iconClass:D.ICON_ALIGN_RIGHT,command:"JustifyRight",value:"",syncFunc:function(G){G.currentTarget.toggleClass(l,(G.changedNode.getStyle("textAlign")==="right"));}}];if(D.get("btnJustify")){B.push({iconClass:D.ICON_ALIGN_JUSTIFY,command:"JustifyFull",value:"",syncFunc:function(G){G.currentTarget.toggleClass(l,(G.changedNode.getStyle("textAlign")==="justify"));}});}D.addButtongroup(B,true);}if(D.get("grpSubsuper")){D.addToggleButton(D.ICON_SUBSCRIPT,"subscript",function(G){G.currentTarget.toggleClass(l,(G.changedNode.test("sub")));},null,true);D.addToggleButton(D.ICON_SUPERSCRIPT,"superscript",function(G){G.currentTarget.toggleClass(l,(G.changedNode.test("sup")));});}if(D.get("btnTextcolor")){A=[];x=D.get("colorPallet");for(y=0;y<x.length;y++){F=x[y];A.push({text:"<div style='background-color:"+F+";'></div>",returnValue:F});}D.colorSelectlist=D.addSelectlist(A,"forecolor",function(J){var G=this,I=J.changedNode.getStyle("color"),H=G._filter_rgb(I);G.colorSelectlist.selectItemByValue(H,true,true);},null,true,{listWidth:256,className:"itsatoolbar-colors",iconClassName:D.ICON_TEXTCOLOR});}if(D.get("btnMarkcolor")){A=[];x=D.get("colorPallet");for(y=0;y<x.length;y++){F=x[y];A.push({text:"<div style='background-color:"+F+";'></div>",returnValue:F});}D.markcolorSelectlist=D.addSelectlist(A,"hilitecolor",function(J){var G=this,I=J.changedNode.getStyle("backgroundColor"),H=G._filter_rgb(I);G.markcolorSelectlist.selectItemByValue(H,true,true);},null,true,{listWidth:256,className:"itsatoolbar-colors",iconClassName:D.ICON_MARKCOLOR});}if(D.get("grpIndent")){D.addButton(D.ICON_INDENT,"indent",true);D.addButton(D.ICON_OUTDENT,"outdent");}if(D.get("grpLists")){D.addToggleButton(D.ICON_UNORDEREDLIST,"insertunorderedlist",function(I){var G=this,H=I.changedNode;
I.currentTarget.toggleClass(l,(G._checkInbetweenSelector("ul",H)));},null,true);D.addToggleButton(D.ICON_ORDEREDLIST,"insertorderedlist",function(I){var G=this,H=I.changedNode;I.currentTarget.toggleClass(l,(G._checkInbetweenSelector("ol",H)));});}if(D.get("btnEmail")){D.addSyncButton(D.ICON_EMAIL,"itsacreatemaillink",function(K){var H=this,I=K.changedNode,L,J,G;J=H._checkInbetweenSelector("a",I);if(J){while(I&&!I.test("a")){I=I.get("parentNode");}G=(I.get("href").match("^mailto:","i")=="mailto:");}K.currentTarget.toggleClass(q,(J&&G));},null,true);}if(D.get("btnHyperlink")){D.addSyncButton(D.ICON_HYPERLINK,"itsacreatehyperlink",function(L){var O=this,M=".doc.docx.xls.xlsx.pdf.txt.zip.rar.",J=L.changedNode,I,K,N=false,H,G,Q,P;K=O._checkInbetweenSelector("a",J);if(K){while(J&&!J.test("a")){J=J.get("parentNode");}H=J.get("href");P=H.match("^mailto:","i")!="mailto:";if(P){G=H.lastIndexOf(".");if(G!==-1){Q=H.substring(G)+".";N=(M.indexOf(Q)!==-1);}}}L.currentTarget.toggleClass(q,(K&&P&&!N));});}if(D.get("btnImage")){D.addSyncButton(D.ICON_IMAGE,"itsacreateimage",function(G){G.currentTarget.toggleClass(q,(G.changedNode.test("img")));});}if(D.get("btnVideo")){D.addSyncButton(D.ICON_VIDEO,"itsacreateyoutube",function(G){G.currentTarget.toggleClass(q,(G.changedNode.test("iframe")));});}if(false){D.addSyncButton(D.ICON_FILE,{customFunc:function(G){c.config.cmas2plus.uploader.show(null,c.bind(function(H){this.editor.execCommand("itsacreatehyperlink","http://files.brongegevens.nl/"+c.config.cmas2plusdomain+"/"+H.n);},this));}},function(L){var O=this,M=".doc.docx.xls.xlsx.pdf.txt.zip.rar.",J=L.changedNode,I,N=false,K,H,G,Q,P;K=O._checkInbetweenSelector("a",J);if(K){while(J&&!J.test("a")){J=J.get("parentNode");}H=J.get("href");P=H.match("^mailto:","i")!="mailto:";if(P){G=H.lastIndexOf(".");if(G!==-1){Q=H.substring(G)+".";N=(M.indexOf(Q)!==-1);}}}L.currentTarget.toggleClass(q,N);});}if(D.get("grpUndoredo")){D.addButton(D.ICON_UNDO,"undo",true);D.addButton(D.ICON_REDO,"redo");}},_filter_rgb:function(x){if(x.toLowerCase().indexOf("rgb")!=-1){var A=new RegExp("(.*?)rgb\\s*?\\(\\s*?([0-9]+).*?,\\s*?([0-9]+).*?,\\s*?([0-9]+).*?\\)(.*?)","gi"),w=x.replace(A,"$1,$2,$3,$4,$5").split(","),z,y,v;if(w.length===5){z=parseInt(w[1],10).toString(16);y=parseInt(w[2],10).toString(16);v=parseInt(w[3],10).toString(16);z=z.length===1?"0"+z:z;y=y.length===1?"0"+y:y;v=v.length===1?"0"+v:v;x="#"+z+y+v;}}return x;},_defineExecCommandHeader:function(){if(!c.Plugin.ExecCommand.COMMANDS.itsaheading){c.mix(c.Plugin.ExecCommand.COMMANDS,{itsaheading:function(y,w){var B=this.get("host"),D=B.getInstance(),v=B.itsatoolbar,E=v._getCursorRef(),z=v._getActiveHeader(E),A=0,C=false,x;if(w==="none"){if(z){z.replace("<span class='"+g+"'>"+z.getHTML()+"</span>");v.headerSelectlist.set("disabled",true);}}else{if(w.length>1){A=parseInt(w.substring(1),10);}if((w.length===2)&&(w.toLowerCase().substring(0,1)==="h")&&(A>0)&&(A<10)){x=z?z:E;x.replace("<"+w+" id='"+D.guid()+"'>"+x.getHTML()+"</"+w+">");}}v._setCursorAtRef();v.sync({sender:"itsaheading"});}});}},_defineExecCommandFontSize:function(){if(!c.Plugin.ExecCommand.COMMANDS.itsafontsize){c.mix(c.Plugin.ExecCommand.COMMANDS,{itsafontsize:function(z,B){var y=this.get("host"),C=y.getInstance(),w=y.itsatoolbar,A=w._getCursorRef(),v,x=A.hasClass(g);if(x){v=A.get("parentNode");if(c.UA.webkit){v.setStyle("lineHeight","");}A.all("span").setStyle("fontSize","");A.all("."+i).replaceClass(i,g);A.setStyle("fontSize",B);A.addClass(i);A.removeClass(g);w._removeCursorRef();}else{w.execCommand("inserthtml","<span class='"+i+"' style='font-size:"+B+"'>"+m+"</span>");w._setCursorAtRef();}}});}},_defineExecCommandHyperlink:function(){if(!c.Plugin.ExecCommand.COMMANDS.itsacreatehyperlink){c.mix(c.Plugin.ExecCommand.COMMANDS,{itsacreatehyperlink:function(y,x){var A=this,D=A.get("host").getInstance(),z,E,w,C,v,B,F;v=x||prompt("Enter url","http://");if(v){C=D.config.doc.createElement("div");v=v.replace(/"/g,"").replace(/'/g,"");v=D.config.doc.createTextNode(v);C.appendChild(v);v=C.innerHTML;A.get("host")._execCommand("createlink",v);w=new D.EditorSelection();z=w.getSelected();if(!w.isCollapsed&&z.size()){E=z.item(0).one("a");if(E){z.item(0).replace(E);}if(E&&c.UA.gecko){if(E.get("parentNode").test("span")){if(E.get("parentNode").one("br.yui-cursor")){E.get("parentNode").insert(E,"before");}}}}else{A.get("host").execCommand("inserthtml",'<a href="'+v+'" target="_blank">'+v+"</a>");}}return E;}});}},_defineExecCommandMaillink:function(){if(!c.Plugin.ExecCommand.COMMANDS.itsacreatemaillink){c.mix(c.Plugin.ExecCommand.COMMANDS,{itsacreatemaillink:function(y,x){var A=this,D=A.get("host").getInstance(),z,E,w,C,v,F,B,G;v=x||prompt("Enter email","");if(v){C=D.config.doc.createElement("div");v=v.replace(/"/g,"").replace(/'/g,"");F=v;v="mailto:"+v;v=D.config.doc.createTextNode(v);C.appendChild(v);v=C.innerHTML;A.get("host")._execCommand("createlink",v);w=new D.EditorSelection();z=w.getSelected();if(!w.isCollapsed&&z.size()){E=z.item(0).one("a");if(E){z.item(0).replace(E);}if(E&&c.UA.gecko){if(E.get("parentNode").test("span")){if(E.get("parentNode").one("br.yui-cursor")){E.get("parentNode").insert(E,"before");}}}}else{A.get("host").execCommand("inserthtml",'<a href="'+v+'">'+F+"</a>");}}return E;}});}},_defineExecCommandImage:function(){if(!c.Plugin.ExecCommand.COMMANDS.itsacreateimage){c.mix(c.Plugin.ExecCommand.COMMANDS,{itsacreateimage:function(y,x){var A=this,D=A.get("host").getInstance(),z,E,w,C,v,B,F;v=x||prompt("Enter link to image","http://");if(v){C=D.config.doc.createElement("div");v=v.replace(/"/g,"").replace(/'/g,"");v=D.config.doc.createTextNode(v);C.appendChild(v);v=C.innerHTML;A.get("host")._execCommand("createlink",v);w=new D.EditorSelection();z=w.getSelected();if(!w.isCollapsed&&z.size()){E=z.item(0).one("a");if(E){z.item(0).replace(E);}if(E&&c.UA.gecko){if(E.get("parentNode").test("span")){if(E.get("parentNode").one("br.yui-cursor")){E.get("parentNode").insert(E,"before");}}}}else{A.get("host").execCommand("inserthtml",'<img src="'+v+'" />');
}}return E;}});}},_defineExecCommandYouTube:function(){if(!c.Plugin.ExecCommand.COMMANDS.itsacreateyoutube){c.mix(c.Plugin.ExecCommand.COMMANDS,{itsacreateyoutube:function(y,x){var A=this,D=A.get("host").getInstance(),z,E,w,C,v,B,F;v=x||prompt("Enter link to image","http://");if(v){C=D.config.doc.createElement("div");v=v.replace(/"/g,"").replace(/'/g,"");v=D.config.doc.createTextNode(v);C.appendChild(v);v=C.innerHTML;A.get("host")._execCommand("createlink",v);w=new D.EditorSelection();z=w.getSelected();if(!w.isCollapsed&&z.size()){E=z.item(0).one("a");if(E){z.item(0).replace(E);}if(E&&c.UA.gecko){if(E.get("parentNode").test("span")){if(E.get("parentNode").one("br.yui-cursor")){E.get("parentNode").insert(E,"before");}}}}else{F=v.indexOf("watch?v=");if(F!==-1){B=v.substring(v.videoitempos+8);A.get("host").execCommand("inserthtml",'<iframe width="420" height="315" src="http://www.youtube.com/embed/'+B+'" frameborder="0" allowfullscreen></iframe>');}}}return E;}});}}},{NS:"itsatoolbar",ATTRS:{paraSupport:{value:false,validator:function(v){return e.isBoolean(v);}},srcNode:{value:null,writeOnce:"initOnly",setter:function(v){return c.one(v);},validator:function(v){return c.one(v);}},btnSize:{value:2,validator:function(v){return(e.isNumber(v)&&(v>0)&&(v<4));}},headerLevels:{value:6,validator:function(v){return(e.isNumber(v)&&(v>0)&&(v<10));}},fontFamilies:{value:["Arial","Arial Black","Comic Sans MS","Courier New","Lucida Console","Tahoma","Times New Roman","Trebuchet MS","Verdana"],validator:function(v){return(e.isArray(v));}},btnFontfamily:{value:true,validator:function(v){return e.isBoolean(v);}},btnFontsize:{value:true,validator:function(v){return e.isBoolean(v);}},btnHeader:{value:true,validator:function(v){return e.isBoolean(v);}},btnBold:{value:true,validator:function(v){return e.isBoolean(v);}},btnItalic:{value:true,validator:function(v){return e.isBoolean(v);}},btnUnderline:{value:true,validator:function(v){return e.isBoolean(v);}},grpAlign:{value:true,validator:function(v){return e.isBoolean(v);}},btnJustify:{value:true,validator:function(v){return e.isBoolean(v);}},grpSubsuper:{value:true,validator:function(v){return e.isBoolean(v);}},btnTextcolor:{value:true,validator:function(v){return e.isBoolean(v);}},btnMarkcolor:{value:true,validator:function(v){return e.isBoolean(v);}},grpIndent:{value:true,validator:function(v){return e.isBoolean(v);}},grpLists:{value:true,validator:function(v){return e.isBoolean(v);}},grpUndoredo:{value:true,validator:function(v){return e.isBoolean(v);}},btnEmail:{value:true,validator:function(v){return e.isBoolean(v);}},btnHyperlink:{value:true,validator:function(v){return e.isBoolean(v);}},btnImage:{value:false,validator:function(v){return e.isBoolean(v);}},btnVideo:{value:false,validator:function(v){return e.isBoolean(v);}},colorPallet:{value:["#111111","#2D2D2D","#434343","#5B5B5B","#737373","#8B8B8B","#A2A2A2","#B9B9B9","#000000","#D0D0D0","#E6E6E6","#FFFFFF","#BFBF00","#FFFF00","#FFFF40","#FFFF80","#FFFFBF","#525330","#898A49","#AEA945","#7F7F00","#C3BE71","#E0DCAA","#FCFAE1","#60BF00","#80FF00","#A0FF40","#C0FF80","#DFFFBF","#3B5738","#668F5A","#7F9757","#407F00","#8A9B55","#B7C296","#E6EBD5","#00BF00","#00FF80","#40FFA0","#80FFC0","#BFFFDF","#033D21","#438059","#7FA37C","#007F40","#8DAE94","#ACC6B5","#DDEBE2","#00BFBF","#00FFFF","#40FFFF","#80FFFF","#BFFFFF","#033D3D","#347D7E","#609A9F","#007F7F","#96BDC4","#B5D1D7","#E2F1F4","#0060BF","#0080FF","#40A0FF","#80C0FF","#BFDFFF","#1B2C48","#385376","#57708F","#00407F","#7792AC","#A8BED1","#DEEBF6","#0000BF","#0000FF","#4040FF","#8080FF","#BFBFFF","#212143","#373E68","#444F75","#00007F","#585E82","#8687A4","#D2D1E1","#6000BF","#8000FF","#A040FF","#C080FF","#DFBFFF","#302449","#54466F","#655A7F","#40007F","#726284","#9E8FA9","#DCD1DF","#BF00BF","#FF00FF","#FF40FF","#FF80FF","#FFBFFF","#4A234A","#794A72","#936386","#7F007F","#9D7292","#C0A0B6","#ECDAE5","#BF005F","#FF007F","#FF409F","#FF80BF","#FFBFDF","#451528","#823857","#A94A76","#7F003F","#BC6F95","#D8A5BB","#F7DDE9","#C00000","#FF0000","#FF4040","#FF8080","#FFC0C0","#441415","#82393C","#AA4D4E","#800000","#BC6E6E","#D8A3A4","#F8DDDD","#BF5F00","#FF7F00","#FF9F40","#FFBF80","#FFDFBF","#482C1B","#855A40","#B27C51","#7F3F00","#C49B71","#E1C4A8","#FDEEE0"],validator:function(v){return e.isArray(v);}}}});},"gallery-2012.09.12-20-02",{requires:["plugin","base-build","node-base","editor","event-delegate","event-custom","cssbutton","gallery-itsaselectlist"],skinnable:true});