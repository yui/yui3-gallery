YUI.add("gallery-timespinner",function(a){YUI().add("gallery-timespinner",function(c){var f=c.Lang,d=c.Widget,q=c.Node,g=c.ClassNameManager.getClassName,l="timespinner",h="lock",k="hour_12",s="hour_24",m="minutes",e="seconds",i="sep",o="am_pm",n="updown",j="plus",p="minus";function b(t){b.superclass.constructor.apply(this,arguments);}b.NAME="timespinner";b.ATTRS={hourtype:{value:"24"},sep:{value:":"},seconds:{value:true},timepsan:{value:{required:false,sep:" - "}},holder:{value:""}};b.HTML_PARSER={};function r(t){return(t<10)?"0"+t:t;}c.extend(b,c.Widget,{initializer:function(){},destructor:function(){this._documentMouseUpHandle.detach();},renderUI:function(){this._renderTimeSelector();},getValue:function(){var u=this.get("contentBox");var v=u.get("firstChild");var y=v.get("childNodes");var z=y.get("childNodes").length;var t="";for(var w=0;w<z;w++){var x=y.get("childNode")[w];if(x.get("tagName")==="DIV"&&x.get("className")!==g(l,n)){t=t+y.get("childNode")[w].get("innerHTML");}else{t=t+y.get("childNode")[w].get("value");}}return t;},bindUI:function(){this.after("valueChange",this._afterValueChange);var t=this.get("contentBox");t.on("focus",c.bind(this._onTimeSegClick,this),"."+g(l,l));t.on("mousedown",c.bind(this._onMouseDown,this),"."+g(l,n));this._documentMouseUpHandle=t.on("mouseup",c.bind(this._onMouseUp,this),document);var u=(!c.UA.opera)?"down:":"press:";u+="38, 40, 33, 34";c.on("key",c.bind(this._onDirectionKey,this),t,u);c.on("change",c.bind(this._onInputChangeValid,this),"input");},syncUI:function(t){this._uiSetValue(t);},_renderTimeSelector:function(){var t=this.get("contentBox"),x=this.get("timepsan"),v=q.create(this._makeDiv(l)),w,u;this._makeClock(v);if(x.required){v.appendChild(q.create(this._makeDiv(i,x.sep)));this._makeClock(v);}w=q.create(this._makeDiv(n));w.appendChild(q.create(this._makeButton(j)));w.appendChild(q.create(this._makeButton(p)));v.appendChild(w);t.appendChild(v);c.one(this.get("holder")).appendChild(t);u=c.all(".yui3-timespinner-timespinner");u.plug(c.Plugin.NodeFocusManager,{descendants:"input[type=text]",keys:{next:"down:39",previous:"down:37"}});},_makeClock:function(v){var u=this.get("hourtype");var t=q.create(this._makeInPut(u==="12"?k:s,"00"));v.appendChild(t);v.appendChild(q.create(this._makeDiv(i,this.get("sep"))));v.appendChild(q.create(this._makeInPut(m,"00")));if(this.get("seconds")){v.appendChild(q.create(this._makeDiv(i,this.get("sep"))));v.appendChild(q.create(this._makeInPut(e,"00")));}if(u==="12"){v.appendChild(q.create(this._makeInPut(o,"AM")));}},_makeDiv:function(u,w){var t=g(l,u),v;if(arguments.length>1){v='<div class="'+t+'">'+w+"</div>";}else{v='<div class="'+t+'"></div>';}return v;},_makeButton:function(v,w){var t=g(l,v),u='<input type="button" class="'+t+'" aria-label="'+v+'"/>';return u;},_makeInPut:function(u,w){var t=g(l,u),v='<input type="text" class="'+t+'" value="'+w+'" aria-label="'+u+'"/>';return v;},_onMouseDown:function(x){var v=c.one("."+g(l,h)),w=false,u,t;if(v){var y;if(x.target.get("parentNode").get("parentNode").contains(v)){u=v.get("className").split(" ");t=x.target.get("className");switch(t){case g(l,j):y=this._up;this._preInputChange(v,this._up,u[0]);w=true;break;case g(l,p):y=this._down;this._preInputChange(v,this._down,u[0]);w=true;break;}}if(w){this._setMouseDownTimers(v,u[0],y);}}},_onTimeSegClick:function(v){var t=v.target.get("className"),u;if(t!==""){switch(t){case g(l,k):case g(l,s):case g(l,m):case g(l,e):case g(l,o):u=v.target;this._lockandload(u);break;}}},_lockandload:function(u){if(!u.hasClass(g(l,h))){var t=c.all("."+g(l,h));t.removeClass(g(l,h));u.addClass(g(l,h));}else{u.removeClass(g(l,h));}},_defaultCB:function(){return null;},_onMouseUp:function(t){if(this._mouseDownTimer){this._mouseDownTimer.cancel();this._mouseDownTimer=null;}if(this._mousePressTimer){this._mousePressTimer.cancel();this._mousePressTimer=null;}},_onDirectionKey:function(u){u.preventDefault();if(u.target.hasClass(g(l,h))){var t=u.target.get("className").split(" ");switch(u.charCode){case 38:this._onInputChange(u.target,this._up(u.target.get("value"),t[0]));break;case 40:this._onInputChange(u.target,this._down(u.target.get("value"),t[0]));break;}}},_setMouseDownTimers:function(v,u,t){this._mouseDownTimer=c.later(500,this,function(){this._mousePressTimer=c.later(100,this,function(){this._preInputChange(v,t,u);},null,true);});},_clearMouseDownTimers:function(){if(this._mouseDownTimer){this._mouseDownTimer.cancel();this._mouseDownTimer=null;}},_uiSetValue:function(u){var t=c.one("."+g(l,h));if(t){t.set("value",u);}},_onInputChange:function(u,v){var t=u.get("className").split(" ");if(this._validateValue(u.get("value"),t[0])){this.syncUI(v);}else{t[0]===g(l,o)?this.syncUI("AM"):this.syncUI("01");}},_preInputChange:function(v,u,t){this._onInputChange(v,u(v.get("value"),t));},_onInputChangeValid:function(t){this._onInputChange(t.target,t.target.get("value"));},_validateValue:function(u,t){switch(t){case g(l,k):u=(+u);return(f.isNumber(u)&&u>=0&&u<=12);case g(l,s):u=(+u);return(f.isNumber(u)&&u>=1&&u<=24);case g(l,o):if(u==="AM"||u==="PM"){return true;}else{return false;}break;default:u=(+u);return(f.isNumber(u)&&u>=0&&u<=59);}},_up:function(u,t){switch(t){case g(l,k):switch(u){case"12":return r(1);default:return r((+u)+1);}break;case g(l,s):switch(u){case"23":return r(0);default:return r((+u)+1);}break;case g(l,m):case g(l,e):switch(u){case"59":return r(0);default:return r((+u)+1);}break;case g(l,o):return u==="AM"?"PM":"AM";}},_down:function(u,t){switch(t){case g(l,k):switch(u){case"01":case"00":return r(12);default:return r((+u)-1);}break;case g(l,s):switch(u){case"00":return r(23);default:return r((+u)-1);}break;case g(l,m):case g(l,e):switch(u){case"00":return r(59);default:return r((+u)-1);}break;case g(l,o):return u==="AM"?"PM":"AM";}}});c.TimeSpinner=b;},"0.01",{requires:["widget","node-focusmanager"]});},"gallery-2010.12.01-21-32",{requires:["widget","node-focusmanager"]});