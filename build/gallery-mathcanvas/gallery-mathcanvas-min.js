YUI.add("gallery-mathcanvas",function(e){function l(){this.list=[];}l.width=function(S){return S.right-S.left;};l.height=function(S){return S.bottom-S.top;};l.xcenter=function(S){return Math.floor((S.left+S.right)/2);};l.ycenter=function(S){return Math.floor((S.top+S.bottom)/2);};l.area=function(S){return l.width(S)*l.height(S);};l.containsPt=function(S,T){return(S.left<=T[0]&&T[0]<S.right&&S.top<=T[1]&&T[1]<S.bottom);};l.containsRect=function(T,S){return(T.left<=S.left&&S.left<=S.right&&S.right<=T.right&&T.top<=S.top&&S.top<=S.bottom&&S.bottom<=T.bottom);};l.cover=function(T,S){var U={top:Math.min(T.top,S.top),left:Math.min(T.left,S.left),bottom:Math.max(T.bottom,S.bottom),right:Math.max(T.right,S.right)};return U;};l.prototype={add:function(V,T,S,U){this.list.push({rect:V,midline:T,font_size:S,func:U});return this.list.length-1;},get:function(S){return this.list[S];},find:function(S){return e.Array.find(this.list,function(T){return(T.func===S);});},findIndex:function(S){return e.Array.indexOf(this.list,this.find(S));},shift:function(U,T,S){if(T===0&&S===0){return;}var V=this.list[U];var W=e.clone(V.rect,true);V.rect.top+=S;V.rect.left+=T;V.rect.bottom+=S;V.rect.right+=T;V.midline+=S;e.Array.each(this.list,function(X){if(W.left<=X.rect.left&&X.rect.right<=W.right&&W.top<=X.rect.top&&X.rect.bottom<=W.bottom){X.rect.top+=S;X.rect.left+=T;X.rect.bottom+=S;X.rect.right+=T;X.midline+=S;}});},setMidline:function(S,T){this.shift(S,0,T-this.list[S].midline);},getBounds:function(){return this.list[this.list.length-1].rect;},getSelection:function(W,T){var U=this.getBounds();if(!l.containsPt(U,W)){return -1;}var V=0;var S=this.list.length-1;e.Array.each(this.list,function(Z,X){var Y=l.area(Z.rect);if(l.containsPt(Z.rect,W)&&l.containsPt(Z.rect,T)&&(V===0||Y<V)){S=X;V=Y;}});return S;},getParent:function(S){var V=this.list[S].rect;for(var T=S+1;T<this.list.length;T++){var U=this.list[T].rect;if(l.containsRect(U,V)){return T;}}return this.list.length-1;}};function I(){this.parent=null;}I.prototype={getParent:function(){return this.parent;},prepareToRender:function(V,U,T,S){var W=this.toString();var X={top:U.y,left:U.x,bottom:U.y+V.getLineHeight(T),right:U.x+V.getStringWidth(T,W)};return S.add(X,l.ycenter(X),T,this);},render:function(T,S){var U=S.find(this);T.drawString(U.rect.left,U.midline,U.font_size,this.toString());},parenthesizeForPrint:function(S){return(this instanceof c);},parenthesizeForRender:function(S){return(this instanceof c);}};I.updateSum=function(S,T){if(S instanceof k){S.appendArg(T);return S;}else{return new k(S,T);}};I.updateProduct=function(S,T){if(S instanceof R){S.appendArg(T);return S;}else{return new R(S,T);}};e.MathFunction=I;function N(T){N.superclass.constructor.call(this);var S=e.Lang.isString(T);if(S&&(T.indexOf(".")>=0||(!/x/i.test(T)&&/e/i.test(T)))){this.value=parseFloat(T);}else{if(S){this.value=parseInt(T);}else{this.value=T;}}}e.extend(N,I,{evaluate:function(){return this.value;},toString:function(){return this.value;}});I.Value=N;function s(S){s.superclass.constructor.call(this);this.name=S;}e.extend(s,I,{evaluate:function(T){var S=T[this.name];if(e.Lang.isUndefined(S)){throw new Error("undefined variable: "+this.name);}return(S instanceof I?S.evaluate(T):S);},toString:function(){return this.name;}});I.Variable=s;function x(){x.superclass.constructor.call(this);}e.extend(x,I,{evaluate:function(){return Math.PI;},toString:function(){return"\u03c0";}});I.Pi=x;function D(){D.superclass.constructor.call(this);}e.extend(D,I,{evaluate:function(){return Math.E;},toString:function(){return"e";}});I.E=D;function z(){z.superclass.constructor.call(this);}e.extend(z,I,{evaluate:function(){return e.ComplexMath.I;},toString:function(){return"i";}});I.I=z;function c(T,S){c.superclass.constructor.call(this);this.name=T;if(e.Lang.isArray(S)&&e.Lang.isArray(S[0])){S=S[0];}this.args=[];if(e.Lang.isArray(S)){for(var U=0;U<S.length;U++){this.appendArg(S[U]);}}else{for(var U=1;U<arguments.length;U++){this.appendArg(arguments[U]);}}}e.extend(c,I,{getArgCount:function(){return this.args.length;},getArg:function(S){return this.args[S];},appendArg:function(S){S.parent=this;this.args.push(S);},removeArg:function(T){var S=e.Array.indexOf(this.args,T);if(S>=0){T.parent=null;this.args.splice(S,1);}},replaceArg:function(S,U){var T=e.Array.indexOf(this.args,S);if(T>=0){S.parent=null;U.parent=this;this.args[T]=U;}},evaluateArgs:function(S){return e.Array.map(this.args,function(T){return T.evaluate(S);});},prepareToRender:function(T,ae,X,af){var S={top:ae.y,left:ae.x,bottom:ae.y+T.getLineHeight(X),right:ae.x+T.getStringWidth(X,this.name)};var ac=l.ycenter(S);var ad=ac;var U={x:S.right,y:S.top};var aa=T.getStringWidth(X,", ");var ah=this.args.length;var ab=[];for(var Z=0;Z<ah;Z++){var Y=this.args[Z].prepareToRender(T,U,X,af);var W=af.get(Y);var V=W.rect;U.x=V.right+aa;S=l.cover(S,V);ac=Math.max(ac,W.midline);ab.push(Y);}if(ah>1&&ac>ad){for(var Z=0;Z<ah;Z++){var Y=ab[Z];af.setMidline(Y,ac);S=l.cover(S,af.get(Y).rect);}}var ag=T.getParenthesisWidth(S);for(var Z=0;Z<ah;Z++){af.shift(ab[Z],ag,0);}S.right+=2*ag;return af.add(S,ac,X,this);},render:function(V,S){var X=S.find(this);V.drawString(X.rect.left,X.midline,X.font_size,this.name);var W={top:X.rect.top,bottom:X.rect.bottom};for(var U=0;U<this.args.length;U++){this.args[U].render(V,S);var X=S.find(this.args[U]);var T=X.rect;if(U===0){W.left=T.left;}if(U<this.args.length-1){V.drawString(T.right,X.midline,X.font_size,",");}else{W.right=T.right;V.drawParentheses(W);}}},toString:function(){return this.name+"("+this.args.join(",")+")";},_printArg:function(T){var S=T instanceof I?T:this.args[T];if(S.parenthesizeForPrint(this)){return"("+S+")";}else{return S.toString();}}});I.FunctionWithArgs=c;function q(S){q.superclass.constructor.call(this,"-",S);}e.extend(q,c,{evaluate:function(S){return e.ComplexMath.subtract(0,this.args[0].evaluate(S));},prepareToRender:function(U,Y,W,Z){var V=e.clone(Y,true);V.x+=U.getStringWidth(W,"-");var aa=this.args[0];if(aa instanceof G){V.x+=U.getStringWidth(W," ");
}var T={top:Y.y,left:Y.x,bottom:Y.y+U.getLineHeight(W),right:V.x};var ab=aa.prepareToRender(U,V,W,Z);var S=Z.get(ab);if(aa.parenthesizeForRender(this)){var X=U.getParenthesisWidth(S.rect);Z.shift(ab,X,0);T.right=S.rect.right+X;}T=l.cover(T,S.rect);return Z.add(T,S.midline,W,this);},render:function(V,T){var W=T.find(this);V.drawString(W.rect.left,W.midline,W.font_size,"-");var S=this.args[0];S.render(V,T);if(S.parenthesizeForRender(this)){var U=T.find(S);V.drawParentheses(U.rect);}},toString:function(){return"-"+this._printArg(0);}});I.Negate=q;function k(){p.superclass.constructor.call(this,"+",new e.Array(arguments));}e.extend(k,c,{evaluate:function(S){return e.ComplexMath.add(this.evaluateArgs(S));},prepareToRender:function(T,aa,W,ab){var U=e.clone(aa,true);var S={top:aa.y,left:aa.x,bottom:aa.y+T.getLineHeight(W),right:aa.x};var Y=l.ycenter(S);var Z=Y;var V=T.getStringWidth(W," ");var X=T.getStringWidth(W,"+");var ac=T.getStringWidth(W,"-");e.Array.each(this.args,function(ad,af){var ah=this;if(ad instanceof q){if(af>0){U.x+=V;}U.x+=ac+V;ah=ad;ad=ad.args[0];}else{if(af>0){U.x+=X+2*V;}}var ae=ad.prepareToRender(T,U,W,ab);var ag=ab.get(ae);U.x=ag.rect.right;if(ad.parenthesizeForRender(ah)){var ai=T.getParenthesisWidth(ag.rect);ab.shift(ae,ai,0);U.x+=2*ai;S.right=ag.rect.right+ai;}S=l.cover(S,ag.rect);Y=Math.max(Y,ag.midline);},this);if(this.args.length>1&&Y>Z){e.Array.each(this.args,function(ad){if(ad instanceof q){ad=ad.args[0];}var ae=ab.findIndex(ad);ab.setMidline(ae,Y);S=l.cover(S,ab.get(ae).rect);});}return ab.add(S,Y,W,this);},render:function(U,T){var W=T.find(this);var S=W.rect.left;var V=U.getStringWidth(W.font_size," ");e.Array.each(this.args,function(X,Y){var aa=this;if(X instanceof q){U.drawString(S,W.midline,W.font_size,"-");aa=X;X=X.args[0];}else{if(Y>0){U.drawString(S,W.midline,W.font_size,"+");}}X.render(U,T);var Z=T.find(X);S=Z.rect.right;if(X.parenthesizeForRender(aa)){U.drawParentheses(Z.rect);S+=U.getParenthesisWidth(Z.rect);}S+=V;},this);},toString:function(){return e.Array.reduce(this.args,"",function(U,S,T){if(S instanceof q){U+="-";S=S.args[0];}else{if(T>0){U+="+";}}return U+this._printArg(S);},this);}});I.Sum=k;function R(){p.superclass.constructor.call(this,"*",new e.Array(arguments));}e.extend(R,c,{evaluate:function(S){return e.ComplexMath.multiply(this.evaluateArgs(S));},prepareToRender:function(T,Z,V,aa){var U=e.clone(Z,true);var S={top:Z.y,left:Z.x,bottom:Z.y+T.getLineHeight(V),right:Z.x};var W=l.ycenter(S);var Y=W;var X=T.getStringWidth(V,"\u00b7");e.Array.each(this.args,function(ab,ad){var ac=ab.prepareToRender(T,U,V,aa);var ae=aa.get(ac);U.x=ae.rect.right+X;if(ab.parenthesizeForRender(this)){var af=T.getParenthesisWidth(ae.rect);aa.shift(ac,af,0);U.x+=2*af;S.right=ae.rect.right+af;}S=l.cover(S,ae.rect);W=Math.max(W,ae.midline);},this);if(this.args.length>1&&W>Y){e.Array.each(this.args,function(ab){var ac=aa.findIndex(ab);aa.setMidline(ac,W);S=l.cover(S,aa.get(ac).rect);});}return aa.add(S,W,V,this);},render:function(V,T){var W=T.find(this);var S=W.rect.left;var U=V.getStringWidth(W.font_size,"\u00b7");e.Array.each(this.args,function(X,Y){if(Y>0){V.drawString(S,W.midline,W.font_size,"\u00b7");}X.render(V,T);var Z=T.find(X);S=Z.rect.right;if(X.parenthesizeForRender(this)){V.drawParentheses(Z.rect);S+=V.getParenthesisWidth(Z.rect);}},this);},toString:function(){return e.Array.reduce(this.args,"",function(U,S,T){if(T>0){U+="*";}return U+this._printArg(T);},this);}});I.Product=R;function G(T,S){G.superclass.constructor.call(this,"/",T,S);}e.extend(G,c,{evaluate:function(S){return e.ComplexMath.divide(this.args[0].evaluate(S),this.args[1].evaluate(S));},prepareToRender:function(T,ac,Y,ad){var S={top:ac.y,left:ac.x,bottom:ac.y,right:ac.x};var W=T.getStringWidth(Y," ");var V=e.clone(ac,true);V.x+=W;var ab=this.args[0].prepareToRender(T,V,Y,ad);var Z=ad.get(ab);V.y=Z.rect.bottom;S=l.cover(S,Z.rect);var U=T.getHorizontalBarHeight();var aa=V.y+U/2;V.y+=U;var ae=this.args[1].prepareToRender(T,V,Y,ad);var X=ad.get(ae);S=l.cover(S,X.rect);var af=(Z.rect.right-X.rect.right)/2;if(af>0){ad.shift(ae,af,0);}else{if(af<0){ad.shift(ab,-af,0);}}S.right+=W;return ad.add(S,aa,Y,this);},render:function(T,S){var V=S.find(this);var U=T.getHorizontalBarHeight();var W={top:V.midline-U/2,left:V.rect.left,bottom:V.midline+U/2,right:V.rect.right};this.args[0].render(T,S);T.drawHorizontalBar(W);this.args[1].render(T,S);},toString:function(){return this._printArg(0)+"/"+this._printArg(1);}});I.Quotient=G;function w(S){w.superclass.constructor.call(this,"abs",S);}e.extend(w,c,{evaluate:function(S){return e.ComplexMath.abs(this.args[0].evaluate(S));},prepareToRender:function(V,X,W,Y){var T=V.getVerticalBarWidth();var Z=this.args[0];var aa=Z.prepareToRender(V,X,W,Y);var U=Y.get(aa);Y.shift(aa,T,0);var S={top:X.y,left:X.x,bottom:U.rect.bottom,right:U.rect.right+T};return Y.add(S,U.midline,W,this);},render:function(T,S){var V=S.find(this);T.drawVerticalBar(V.rect);this.args[0].render(T,S);var U=e.clone(V.rect,true);U.left=U.right-T.getVerticalBarWidth();T.drawVerticalBar(U);}});I.Magnitude=w;function o(S){o.superclass.constructor.call(this,"phase",S);}e.extend(o,c,{evaluate:function(S){return e.ComplexMath.phase(this.args[0].evaluate(S));}});I.Phase=o;function K(S){K.superclass.constructor.call(this,"conjugate",S);}e.extend(K,c,{evaluate:function(S){return e.ComplexMath.conjugate(this.args[0].evaluate(S));},prepareToRender:function(U,Y,X,Z){var V=U.getHorizontalBarHeight();var W=e.clone(Y,true);W.y+=V;var aa=this.args[0].prepareToRender(U,W,X,Z);var T=Z.get(aa);var S=e.clone(T.rect,true);S.top-=V;return Z.add(S,T.midline,X,this);},render:function(T,S){var U=S.find(this);T.drawHorizontalBar(U.rect);this.args[0].render(T,S);}});I.Conjugate=K;function d(S){d.superclass.constructor.call(this,"rotate",S);}e.extend(d,c,{evaluate:function(S){return e.ComplexMath.rotate(this.args[0].evaluate(S),this.args[1].evaluate(S));}});I.Rotate=d;function y(S){y.superclass.constructor.call(this,"re",S);}e.extend(y,c,{evaluate:function(S){var T=this.args[0].evaluate(S);
return e.ComplexMath.isComplexNumber(T)?T.real():T;}});I.RealPart=y;function L(S){L.superclass.constructor.call(this,"im",S);}e.extend(L,c,{evaluate:function(S){var T=this.args[0].evaluate(S);return e.ComplexMath.isComplexNumber(T)?T.imag():0;}});I.ImaginaryPart=L;function M(){M.superclass.constructor.call(this,"min",new e.Array(arguments));}e.extend(M,c,{evaluate:function(S){return Math.min.apply(null,this.evaluateArgs(S));}});I.Min=M;function p(){p.superclass.constructor.call(this,"max",new e.Array(arguments));}e.extend(p,c,{evaluate:function(S){return Math.max.apply(null,this.evaluateArgs(S));}});I.Max=p;function r(S){r.superclass.constructor.call(this,"sqrt",S);}e.extend(r,c,{evaluate:function(S){return e.ComplexMath.sqrt(this.args[0].evaluate(S));},prepareToRender:function(U,aa,X,ab){var ac=this.args[0].prepareToRender(U,aa,X,ab);var T=ab.get(ac);var Z=l.height(T.rect);var W=1+Math.round(2*Z/(4*Math.sqrt(3)));var Y=3;var V=4;ab.shift(ac,W,V);var S={top:aa.y,left:aa.x,bottom:T.rect.bottom,right:T.rect.right+Y};return ab.add(S,T.midline,X,this);},render:function(T,S){var U=S.find(this);this._drawSquareRoot(T,U.rect);this.args[0].render(T,S);},_drawSquareRoot:function(U,W){var V=l.height(W);var S=W.left;var X=W.top+Math.round(3*V/4);var T=Math.round((V-3)/(4*Math.sqrt(3)));U.beginPath();U.moveTo(S,X);S+=T;X=W.bottom-1;U.lineTo(S,X);S+=T;X=W.top+2;U.lineTo(S,X);S=W.right-1;U.lineTo(S,X);U.line(0,Math.round(V/8));U.stroke();}});I.SquareRoot=r;function A(S,T){A.superclass.constructor.call(this,"^",S,T);}e.extend(A,c,{evaluate:function(S){return e.ComplexMath.pow(this.args[0].evaluate(S),this.args[1].evaluate(S));},prepareToRender:function(T,ac,W,ad){var V=T.getStringWidth(W," ");var U=e.clone(ac,true);U.x+=V;var Y=this.args[0].prepareToRender(T,U,W,ad);var X=ad.get(Y);U.x=X.rect.right;if(this.args[0].parenthesizeForRender(this)){var ab=T.getParenthesisWidth(X.rect);ad.shift(Y,ab,0);U.x+=2*ab;}var ae=T.getSuperSubFontSize(W);var Z=this.args[1].prepareToRender(T,U,ae,ad);var aa=ad.get(Z);var S={top:ac.y,left:ac.x,bottom:ac.y+l.height(aa.rect)+T.getSuperscriptHeight(X.rect),right:aa.rect.right};if(S.bottom>X.rect.bottom){ad.shift(Y,0,S.bottom-X.rect.bottom);}else{S.bottom=X.rect.bottom;}return ad.add(S,X.midline,W,this);},render:function(T,S){if(this.args[0].parenthesizeForRender(this)){var U=S.find(this.args[0]);T.drawParentheses(U.rect);}this.args[0].render(T,S);this.args[1].render(T,S);},toString:function(){return this._printArg(0)+"^"+this._printArg(1);}});I.Exponential=A;function j(S,T){j.superclass.constructor.call(this,"log",S,T);}e.extend(j,c,{evaluate:function(S){return e.ComplexMath.divide(e.ComplexMath.log(this.args[1].evaluate(S)),e.ComplexMath.log(this.args[0].evaluate(S)));},prepareToRender:function(T,ac,W,ad){var S={top:ac.y,left:ac.x,bottom:ac.y+T.getLineHeight(W),right:ac.x+T.getStringWidth(W,"log")};var U={x:S.right,y:S.top};var Z=T.getSuperSubFontSize(W);var aa=this.args[0].prepareToRender(T,U,Z,ad);var X=ad.get(aa);U.x=X.rect.right;var V=this.args[1].prepareToRender(T,U,W,ad);var Y=ad.get(V);S=l.cover(S,Y.rect);var ab=T.getParenthesisWidth(Y.rect);ad.shift(V,ab,0);S.right+=2*ab;ad.shift(aa,0,Y.midline-S.top);S=l.cover(S,X.rect);return ad.add(S,Y.midline,W,this);},render:function(U,T){var V=T.find(this);U.drawString(V.rect.left,V.midline,V.font_size,"log");this.args[0].render(U,T);this.args[1].render(U,T);var S=T.find(this.args[1]);U.drawParentheses(S.rect);}});I.Logarithm=j;function u(S){u.superclass.constructor.call(this,"ln",S);}e.extend(u,c,{evaluate:function(S){return e.ComplexMath.log(this.args[0].evaluate(S));}});I.NaturalLog=u;function C(S){C.superclass.constructor.call(this,"sin",S);}e.extend(C,c,{evaluate:function(S){return e.ComplexMath.sin(this.args[0].evaluate(S));}});I.Sine=C;function P(S){P.superclass.constructor.call(this,"cos",S);}e.extend(P,c,{evaluate:function(S){return e.ComplexMath.cos(this.args[0].evaluate(S));}});I.Cosine=P;function Q(S){Q.superclass.constructor.call(this,"tan",S);}e.extend(Q,c,{evaluate:function(S){return e.ComplexMath.tan(this.args[0].evaluate(S));}});I.Tangent=Q;function n(S){n.superclass.constructor.call(this,"arcsin",S);}e.extend(n,c,{evaluate:function(S){return Math.asin(this.args[0].evaluate(S));}});I.Arcsine=n;function f(S){f.superclass.constructor.call(this,"arccos",S);}e.extend(f,c,{evaluate:function(S){return Math.acos(this.args[0].evaluate(S));}});I.Arccosine=f;function B(S){B.superclass.constructor.call(this,"arctan",S);}e.extend(B,c,{evaluate:function(S){return Math.atan(this.args[0].evaluate(S));}});I.Arctangent=B;function E(T,S){E.superclass.constructor.call(this,"arctan2",T,S);}e.extend(E,c,{evaluate:function(S){return Math.atan2(this.args[0].evaluate(S),this.args[1].evaluate(S));}});I.Arctangent2=E;function O(S){O.superclass.constructor.call(this,"cosh",S);}e.extend(O,c,{evaluate:function(S){return e.ComplexMath.cosh(this.args[0].evaluate(S));}});I.HyperbolicCosine=O;function t(S){t.superclass.constructor.call(this,"sinh",S);}e.extend(t,c,{evaluate:function(S){return e.ComplexMath.sinh(this.args[0].evaluate(S));}});I.HyperbolicSine=t;function a(S){a.superclass.constructor.call(this,"tanh",S);}e.extend(a,c,{evaluate:function(S){return e.ComplexMath.tanh(this.args[0].evaluate(S));}});I.HyperbolicTangent=a;function g(S){g.superclass.constructor.call(this,"arccosh",S);}e.extend(g,c,{evaluate:function(S){return e.ComplexMath.acosh(this.args[0].evaluate(S));}});I.InverseHyperbolicCosine=g;function i(S){i.superclass.constructor.call(this,"arcsinh",S);}e.extend(i,c,{evaluate:function(S){return e.ComplexMath.asinh(this.args[0].evaluate(S));}});I.InverseHyperbolicSine=i;function J(S){J.superclass.constructor.call(this,"arctanh",S);}e.extend(J,c,{evaluate:function(S){return e.ComplexMath.atanh(this.args[0].evaluate(S));}});I.InverseHyperbolicTangent=J;var H=(function(){var X={trace:function U(){},yy:{},symbols_:{"error":2,"expression":3,"e":4,"EOF":5,"NUMBER":6,"E":7,"PI":8,"I":9,"VARIABLE":10,"(":11,")":12,"+":13,"-":14,"*":15,"/":16,"^":17,"ABS":18,"PHASE":19,"CONJUGATE":20,"ROTATE":21,"arglist":22,"RE":23,"IM":24,"MIN":25,"MAX":26,"SQRT":27,"LOG":28,"LOG2":29,"LOG10":30,"LN":31,"ARCSIN":32,"ARCCOS":33,"ARCTAN":34,"ARCTAN2":35,"SIN":36,"COS":37,"TAN":38,"SINH":39,"COSH":40,"TANH":41,"ARCSINH":42,"ARCCOSH":43,"ARCTANH":44,",":45,"$accept":0,"$end":1},terminals_:{2:"error",5:"EOF",6:"NUMBER",7:"E",8:"PI",9:"I",10:"VARIABLE",11:"(",12:")",13:"+",14:"-",15:"*",16:"/",17:"^",18:"ABS",19:"PHASE",20:"CONJUGATE",21:"ROTATE",23:"RE",24:"IM",25:"MIN",26:"MAX",27:"SQRT",28:"LOG",29:"LOG2",30:"LOG10",31:"LN",32:"ARCSIN",33:"ARCCOS",34:"ARCTAN",35:"ARCTAN2",36:"SIN",37:"COS",38:"TAN",39:"SINH",40:"COSH",41:"TANH",42:"ARCSINH",43:"ARCCOSH",44:"ARCTANH",45:","},productions_:[0,[3,2],[4,1],[4,1],[4,1],[4,1],[4,1],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,2],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[22,1],[22,3]],performAction:function T(Y,ab,ac,af,ae,aa,ad){var Z=aa.length-1;
switch(ae){case 1:return aa[Z-1];break;case 2:this.$=new af.MathFunction.Value(Y);break;case 3:this.$=new af.MathFunction.E();break;case 4:this.$=new af.MathFunction.Pi();break;case 5:this.$=new af.MathFunction.I();break;case 6:this.$=new af.MathFunction.Variable(Y);break;case 7:this.$=aa[Z-1];break;case 8:this.$=af.MathFunction.updateSum(aa[Z-2],aa[Z]);break;case 9:this.$=af.MathFunction.updateSum(aa[Z-2],new af.MathFunction.Negate(aa[Z]));break;case 10:this.$=af.MathFunction.updateProduct(aa[Z-2],aa[Z]);break;case 11:this.$=new af.MathFunction.Quotient(aa[Z-2],aa[Z]);break;case 12:this.$=new af.MathFunction.Exponential(aa[Z-2],aa[Z]);break;case 13:this.$=new af.MathFunction.Negate(aa[Z]);break;case 14:this.$=new af.MathFunction.Magnitude(aa[Z-1]);break;case 15:this.$=new af.MathFunction.Phase(aa[Z-1]);break;case 16:this.$=new af.MathFunction.Conjugate(aa[Z-1]);break;case 17:this.$=new af.MathFunction.Rotate(aa[Z-1]);break;case 18:this.$=new af.MathFunction.RealPart(aa[Z-1]);break;case 19:this.$=new af.MathFunction.ImaginaryPart(aa[Z-1]);break;case 20:this.$=new af.MathFunction.Min(aa[Z-1]);break;case 21:this.$=new af.MathFunction.Max(aa[Z-1]);break;case 22:this.$=new af.MathFunction.SquareRoot(aa[Z-1]);break;case 23:this.$=new af.MathFunction.Logarithm(aa[Z-1]);break;case 24:this.$=new af.MathFunction.Logarithm(new af.MathFunction.Value(2),aa[Z-1]);break;case 25:this.$=new af.MathFunction.Logarithm(new af.MathFunction.Value(10),aa[Z-1]);break;case 26:this.$=new af.MathFunction.NaturalLog(aa[Z-1]);break;case 27:this.$=new af.MathFunction.Arcsine(aa[Z-1]);break;case 28:this.$=new af.MathFunction.Arccosine(aa[Z-1]);break;case 29:this.$=new af.MathFunction.Arctangent(aa[Z-1]);break;case 30:this.$=new af.MathFunction.Arctangent2(aa[Z-1]);break;case 31:this.$=new af.MathFunction.Sine(aa[Z-1]);break;case 32:this.$=new af.MathFunction.Cosine(aa[Z-1]);break;case 33:this.$=new af.MathFunction.Tangent(aa[Z-1]);break;case 34:this.$=new af.MathFunction.HyperbolicSine(aa[Z-1]);break;case 35:this.$=new af.MathFunction.HyperbolicCosine(aa[Z-1]);break;case 36:this.$=new af.MathFunction.HyperbolicTangent(aa[Z-1]);break;case 37:this.$=new af.MathFunction.InverseHyperbolicSine(aa[Z-1]);break;case 38:this.$=new af.MathFunction.InverseHyperbolicCosine(aa[Z-1]);break;case 39:this.$=new af.MathFunction.InverseHyperbolicTangent(aa[Z-1]);break;case 40:this.$=[aa[Z]];break;case 41:this.$=aa[Z-2].concat(aa[Z]);break;}},table:[{3:1,4:2,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],11:[1,8],14:[1,9],18:[1,10],19:[1,11],20:[1,12],21:[1,13],23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26],36:[1,27],37:[1,28],38:[1,29],39:[1,30],40:[1,31],41:[1,32],42:[1,33],43:[1,34],44:[1,35]},{1:[3]},{5:[1,36],13:[1,37],14:[1,38],15:[1,39],16:[1,40],17:[1,41]},{5:[2,2],12:[2,2],13:[2,2],14:[2,2],15:[2,2],16:[2,2],17:[2,2],45:[2,2]},{5:[2,3],12:[2,3],13:[2,3],14:[2,3],15:[2,3],16:[2,3],17:[2,3],45:[2,3]},{5:[2,4],12:[2,4],13:[2,4],14:[2,4],15:[2,4],16:[2,4],17:[2,4],45:[2,4]},{5:[2,5],12:[2,5],13:[2,5],14:[2,5],15:[2,5],16:[2,5],17:[2,5],45:[2,5]},{5:[2,6],12:[2,6],13:[2,6],14:[2,6],15:[2,6],16:[2,6],17:[2,6],45:[2,6]},{4:42,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],11:[1,8],14:[1,9],18:[1,10],19:[1,11],20:[1,12],21:[1,13],23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26],36:[1,27],37:[1,28],38:[1,29],39:[1,30],40:[1,31],41:[1,32],42:[1,33],43:[1,34],44:[1,35]},{4:43,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],11:[1,8],14:[1,9],18:[1,10],19:[1,11],20:[1,12],21:[1,13],23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26],36:[1,27],37:[1,28],38:[1,29],39:[1,30],40:[1,31],41:[1,32],42:[1,33],43:[1,34],44:[1,35]},{11:[1,44]},{11:[1,45]},{11:[1,46]},{11:[1,47]},{11:[1,48]},{11:[1,49]},{11:[1,50]},{11:[1,51]},{11:[1,52]},{11:[1,53]},{11:[1,54]},{11:[1,55]},{11:[1,56]},{11:[1,57]},{11:[1,58]},{11:[1,59]},{11:[1,60]},{11:[1,61]},{11:[1,62]},{11:[1,63]},{11:[1,64]},{11:[1,65]},{11:[1,66]},{11:[1,67]},{11:[1,68]},{11:[1,69]},{1:[2,1]},{4:70,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],11:[1,8],14:[1,9],18:[1,10],19:[1,11],20:[1,12],21:[1,13],23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26],36:[1,27],37:[1,28],38:[1,29],39:[1,30],40:[1,31],41:[1,32],42:[1,33],43:[1,34],44:[1,35]},{4:71,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],11:[1,8],14:[1,9],18:[1,10],19:[1,11],20:[1,12],21:[1,13],23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26],36:[1,27],37:[1,28],38:[1,29],39:[1,30],40:[1,31],41:[1,32],42:[1,33],43:[1,34],44:[1,35]},{4:72,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],11:[1,8],14:[1,9],18:[1,10],19:[1,11],20:[1,12],21:[1,13],23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26],36:[1,27],37:[1,28],38:[1,29],39:[1,30],40:[1,31],41:[1,32],42:[1,33],43:[1,34],44:[1,35]},{4:73,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],11:[1,8],14:[1,9],18:[1,10],19:[1,11],20:[1,12],21:[1,13],23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26],36:[1,27],37:[1,28],38:[1,29],39:[1,30],40:[1,31],41:[1,32],42:[1,33],43:[1,34],44:[1,35]},{4:74,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],11:[1,8],14:[1,9],18:[1,10],19:[1,11],20:[1,12],21:[1,13],23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26],36:[1,27],37:[1,28],38:[1,29],39:[1,30],40:[1,31],41:[1,32],42:[1,33],43:[1,34],44:[1,35]},{12:[1,75],13:[1,37],14:[1,38],15:[1,39],16:[1,40],17:[1,41]},{5:[2,13],12:[2,13],13:[2,13],14:[2,13],15:[2,13],16:[2,13],17:[2,13],45:[2,13]},{4:76,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],11:[1,8],14:[1,9],18:[1,10],19:[1,11],20:[1,12],21:[1,13],23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26],36:[1,27],37:[1,28],38:[1,29],39:[1,30],40:[1,31],41:[1,32],42:[1,33],43:[1,34],44:[1,35]},{4:77,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],11:[1,8],14:[1,9],18:[1,10],19:[1,11],20:[1,12],21:[1,13],23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26],36:[1,27],37:[1,28],38:[1,29],39:[1,30],40:[1,31],41:[1,32],42:[1,33],43:[1,34],44:[1,35]},{4:78,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],11:[1,8],14:[1,9],18:[1,10],19:[1,11],20:[1,12],21:[1,13],23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26],36:[1,27],37:[1,28],38:[1,29],39:[1,30],40:[1,31],41:[1,32],42:[1,33],43:[1,34],44:[1,35]},{4:80,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],11:[1,8],14:[1,9],18:[1,10],19:[1,11],20:[1,12],21:[1,13],22:79,23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26],36:[1,27],37:[1,28],38:[1,29],39:[1,30],40:[1,31],41:[1,32],42:[1,33],43:[1,34],44:[1,35]},{4:81,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],11:[1,8],14:[1,9],18:[1,10],19:[1,11],20:[1,12],21:[1,13],23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26],36:[1,27],37:[1,28],38:[1,29],39:[1,30],40:[1,31],41:[1,32],42:[1,33],43:[1,34],44:[1,35]},{4:82,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],11:[1,8],14:[1,9],18:[1,10],19:[1,11],20:[1,12],21:[1,13],23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26],36:[1,27],37:[1,28],38:[1,29],39:[1,30],40:[1,31],41:[1,32],42:[1,33],43:[1,34],44:[1,35]},{4:80,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],11:[1,8],14:[1,9],18:[1,10],19:[1,11],20:[1,12],21:[1,13],22:83,23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26],36:[1,27],37:[1,28],38:[1,29],39:[1,30],40:[1,31],41:[1,32],42:[1,33],43:[1,34],44:[1,35]},{4:80,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],11:[1,8],14:[1,9],18:[1,10],19:[1,11],20:[1,12],21:[1,13],22:84,23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26],36:[1,27],37:[1,28],38:[1,29],39:[1,30],40:[1,31],41:[1,32],42:[1,33],43:[1,34],44:[1,35]},{4:85,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],11:[1,8],14:[1,9],18:[1,10],19:[1,11],20:[1,12],21:[1,13],23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26],36:[1,27],37:[1,28],38:[1,29],39:[1,30],40:[1,31],41:[1,32],42:[1,33],43:[1,34],44:[1,35]},{4:80,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],11:[1,8],14:[1,9],18:[1,10],19:[1,11],20:[1,12],21:[1,13],22:86,23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26],36:[1,27],37:[1,28],38:[1,29],39:[1,30],40:[1,31],41:[1,32],42:[1,33],43:[1,34],44:[1,35]},{4:87,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],11:[1,8],14:[1,9],18:[1,10],19:[1,11],20:[1,12],21:[1,13],23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26],36:[1,27],37:[1,28],38:[1,29],39:[1,30],40:[1,31],41:[1,32],42:[1,33],43:[1,34],44:[1,35]},{4:88,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],11:[1,8],14:[1,9],18:[1,10],19:[1,11],20:[1,12],21:[1,13],23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26],36:[1,27],37:[1,28],38:[1,29],39:[1,30],40:[1,31],41:[1,32],42:[1,33],43:[1,34],44:[1,35]},{4:89,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],11:[1,8],14:[1,9],18:[1,10],19:[1,11],20:[1,12],21:[1,13],23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26],36:[1,27],37:[1,28],38:[1,29],39:[1,30],40:[1,31],41:[1,32],42:[1,33],43:[1,34],44:[1,35]},{4:90,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],11:[1,8],14:[1,9],18:[1,10],19:[1,11],20:[1,12],21:[1,13],23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26],36:[1,27],37:[1,28],38:[1,29],39:[1,30],40:[1,31],41:[1,32],42:[1,33],43:[1,34],44:[1,35]},{4:91,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],11:[1,8],14:[1,9],18:[1,10],19:[1,11],20:[1,12],21:[1,13],23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26],36:[1,27],37:[1,28],38:[1,29],39:[1,30],40:[1,31],41:[1,32],42:[1,33],43:[1,34],44:[1,35]},{4:92,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],11:[1,8],14:[1,9],18:[1,10],19:[1,11],20:[1,12],21:[1,13],23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26],36:[1,27],37:[1,28],38:[1,29],39:[1,30],40:[1,31],41:[1,32],42:[1,33],43:[1,34],44:[1,35]},{4:80,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],11:[1,8],14:[1,9],18:[1,10],19:[1,11],20:[1,12],21:[1,13],22:93,23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26],36:[1,27],37:[1,28],38:[1,29],39:[1,30],40:[1,31],41:[1,32],42:[1,33],43:[1,34],44:[1,35]},{4:94,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],11:[1,8],14:[1,9],18:[1,10],19:[1,11],20:[1,12],21:[1,13],23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26],36:[1,27],37:[1,28],38:[1,29],39:[1,30],40:[1,31],41:[1,32],42:[1,33],43:[1,34],44:[1,35]},{4:95,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],11:[1,8],14:[1,9],18:[1,10],19:[1,11],20:[1,12],21:[1,13],23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26],36:[1,27],37:[1,28],38:[1,29],39:[1,30],40:[1,31],41:[1,32],42:[1,33],43:[1,34],44:[1,35]},{4:96,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],11:[1,8],14:[1,9],18:[1,10],19:[1,11],20:[1,12],21:[1,13],23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26],36:[1,27],37:[1,28],38:[1,29],39:[1,30],40:[1,31],41:[1,32],42:[1,33],43:[1,34],44:[1,35]},{4:97,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],11:[1,8],14:[1,9],18:[1,10],19:[1,11],20:[1,12],21:[1,13],23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26],36:[1,27],37:[1,28],38:[1,29],39:[1,30],40:[1,31],41:[1,32],42:[1,33],43:[1,34],44:[1,35]},{4:98,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],11:[1,8],14:[1,9],18:[1,10],19:[1,11],20:[1,12],21:[1,13],23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26],36:[1,27],37:[1,28],38:[1,29],39:[1,30],40:[1,31],41:[1,32],42:[1,33],43:[1,34],44:[1,35]},{4:99,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],11:[1,8],14:[1,9],18:[1,10],19:[1,11],20:[1,12],21:[1,13],23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26],36:[1,27],37:[1,28],38:[1,29],39:[1,30],40:[1,31],41:[1,32],42:[1,33],43:[1,34],44:[1,35]},{4:100,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],11:[1,8],14:[1,9],18:[1,10],19:[1,11],20:[1,12],21:[1,13],23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26],36:[1,27],37:[1,28],38:[1,29],39:[1,30],40:[1,31],41:[1,32],42:[1,33],43:[1,34],44:[1,35]},{4:101,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],11:[1,8],14:[1,9],18:[1,10],19:[1,11],20:[1,12],21:[1,13],23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26],36:[1,27],37:[1,28],38:[1,29],39:[1,30],40:[1,31],41:[1,32],42:[1,33],43:[1,34],44:[1,35]},{4:102,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],11:[1,8],14:[1,9],18:[1,10],19:[1,11],20:[1,12],21:[1,13],23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26],36:[1,27],37:[1,28],38:[1,29],39:[1,30],40:[1,31],41:[1,32],42:[1,33],43:[1,34],44:[1,35]},{5:[2,8],12:[2,8],13:[2,8],14:[2,8],15:[1,39],16:[1,40],17:[1,41],45:[2,8]},{5:[2,9],12:[2,9],13:[2,9],14:[2,9],15:[1,39],16:[1,40],17:[1,41],45:[2,9]},{5:[2,10],12:[2,10],13:[2,10],14:[2,10],15:[2,10],16:[2,10],17:[1,41],45:[2,10]},{5:[2,11],12:[2,11],13:[2,11],14:[2,11],15:[2,11],16:[2,11],17:[1,41],45:[2,11]},{5:[2,12],12:[2,12],13:[2,12],14:[2,12],15:[2,12],16:[2,12],17:[2,12],45:[2,12]},{5:[2,7],12:[2,7],13:[2,7],14:[2,7],15:[2,7],16:[2,7],17:[2,7],45:[2,7]},{12:[1,103],13:[1,37],14:[1,38],15:[1,39],16:[1,40],17:[1,41]},{12:[1,104],13:[1,37],14:[1,38],15:[1,39],16:[1,40],17:[1,41]},{12:[1,105],13:[1,37],14:[1,38],15:[1,39],16:[1,40],17:[1,41]},{12:[1,106],45:[1,107]},{12:[2,40],13:[1,37],14:[1,38],15:[1,39],16:[1,40],17:[1,41],45:[2,40]},{12:[1,108],13:[1,37],14:[1,38],15:[1,39],16:[1,40],17:[1,41]},{12:[1,109],13:[1,37],14:[1,38],15:[1,39],16:[1,40],17:[1,41]},{12:[1,110],45:[1,107]},{12:[1,111],45:[1,107]},{12:[1,112],13:[1,37],14:[1,38],15:[1,39],16:[1,40],17:[1,41]},{12:[1,113],45:[1,107]},{12:[1,114],13:[1,37],14:[1,38],15:[1,39],16:[1,40],17:[1,41]},{12:[1,115],13:[1,37],14:[1,38],15:[1,39],16:[1,40],17:[1,41]},{12:[1,116],13:[1,37],14:[1,38],15:[1,39],16:[1,40],17:[1,41]},{12:[1,117],13:[1,37],14:[1,38],15:[1,39],16:[1,40],17:[1,41]},{12:[1,118],13:[1,37],14:[1,38],15:[1,39],16:[1,40],17:[1,41]},{12:[1,119],13:[1,37],14:[1,38],15:[1,39],16:[1,40],17:[1,41]},{12:[1,120],45:[1,107]},{12:[1,121],13:[1,37],14:[1,38],15:[1,39],16:[1,40],17:[1,41]},{12:[1,122],13:[1,37],14:[1,38],15:[1,39],16:[1,40],17:[1,41]},{12:[1,123],13:[1,37],14:[1,38],15:[1,39],16:[1,40],17:[1,41]},{12:[1,124],13:[1,37],14:[1,38],15:[1,39],16:[1,40],17:[1,41]},{12:[1,125],13:[1,37],14:[1,38],15:[1,39],16:[1,40],17:[1,41]},{12:[1,126],13:[1,37],14:[1,38],15:[1,39],16:[1,40],17:[1,41]},{12:[1,127],13:[1,37],14:[1,38],15:[1,39],16:[1,40],17:[1,41]},{12:[1,128],13:[1,37],14:[1,38],15:[1,39],16:[1,40],17:[1,41]},{12:[1,129],13:[1,37],14:[1,38],15:[1,39],16:[1,40],17:[1,41]},{5:[2,14],12:[2,14],13:[2,14],14:[2,14],15:[2,14],16:[2,14],17:[2,14],45:[2,14]},{5:[2,15],12:[2,15],13:[2,15],14:[2,15],15:[2,15],16:[2,15],17:[2,15],45:[2,15]},{5:[2,16],12:[2,16],13:[2,16],14:[2,16],15:[2,16],16:[2,16],17:[2,16],45:[2,16]},{5:[2,17],12:[2,17],13:[2,17],14:[2,17],15:[2,17],16:[2,17],17:[2,17],45:[2,17]},{4:130,6:[1,3],7:[1,4],8:[1,5],9:[1,6],10:[1,7],11:[1,8],14:[1,9],18:[1,10],19:[1,11],20:[1,12],21:[1,13],23:[1,14],24:[1,15],25:[1,16],26:[1,17],27:[1,18],28:[1,19],29:[1,20],30:[1,21],31:[1,22],32:[1,23],33:[1,24],34:[1,25],35:[1,26],36:[1,27],37:[1,28],38:[1,29],39:[1,30],40:[1,31],41:[1,32],42:[1,33],43:[1,34],44:[1,35]},{5:[2,18],12:[2,18],13:[2,18],14:[2,18],15:[2,18],16:[2,18],17:[2,18],45:[2,18]},{5:[2,19],12:[2,19],13:[2,19],14:[2,19],15:[2,19],16:[2,19],17:[2,19],45:[2,19]},{5:[2,20],12:[2,20],13:[2,20],14:[2,20],15:[2,20],16:[2,20],17:[2,20],45:[2,20]},{5:[2,21],12:[2,21],13:[2,21],14:[2,21],15:[2,21],16:[2,21],17:[2,21],45:[2,21]},{5:[2,22],12:[2,22],13:[2,22],14:[2,22],15:[2,22],16:[2,22],17:[2,22],45:[2,22]},{5:[2,23],12:[2,23],13:[2,23],14:[2,23],15:[2,23],16:[2,23],17:[2,23],45:[2,23]},{5:[2,24],12:[2,24],13:[2,24],14:[2,24],15:[2,24],16:[2,24],17:[2,24],45:[2,24]},{5:[2,25],12:[2,25],13:[2,25],14:[2,25],15:[2,25],16:[2,25],17:[2,25],45:[2,25]},{5:[2,26],12:[2,26],13:[2,26],14:[2,26],15:[2,26],16:[2,26],17:[2,26],45:[2,26]},{5:[2,27],12:[2,27],13:[2,27],14:[2,27],15:[2,27],16:[2,27],17:[2,27],45:[2,27]},{5:[2,28],12:[2,28],13:[2,28],14:[2,28],15:[2,28],16:[2,28],17:[2,28],45:[2,28]},{5:[2,29],12:[2,29],13:[2,29],14:[2,29],15:[2,29],16:[2,29],17:[2,29],45:[2,29]},{5:[2,30],12:[2,30],13:[2,30],14:[2,30],15:[2,30],16:[2,30],17:[2,30],45:[2,30]},{5:[2,31],12:[2,31],13:[2,31],14:[2,31],15:[2,31],16:[2,31],17:[2,31],45:[2,31]},{5:[2,32],12:[2,32],13:[2,32],14:[2,32],15:[2,32],16:[2,32],17:[2,32],45:[2,32]},{5:[2,33],12:[2,33],13:[2,33],14:[2,33],15:[2,33],16:[2,33],17:[2,33],45:[2,33]},{5:[2,34],12:[2,34],13:[2,34],14:[2,34],15:[2,34],16:[2,34],17:[2,34],45:[2,34]},{5:[2,35],12:[2,35],13:[2,35],14:[2,35],15:[2,35],16:[2,35],17:[2,35],45:[2,35]},{5:[2,36],12:[2,36],13:[2,36],14:[2,36],15:[2,36],16:[2,36],17:[2,36],45:[2,36]},{5:[2,37],12:[2,37],13:[2,37],14:[2,37],15:[2,37],16:[2,37],17:[2,37],45:[2,37]},{5:[2,38],12:[2,38],13:[2,38],14:[2,38],15:[2,38],16:[2,38],17:[2,38],45:[2,38]},{5:[2,39],12:[2,39],13:[2,39],14:[2,39],15:[2,39],16:[2,39],17:[2,39],45:[2,39]},{12:[2,41],13:[1,37],14:[1,38],15:[1,39],16:[1,40],17:[1,41],45:[2,41]}],defaultActions:{36:[2,1]},parseError:function V(Z,Y){throw new Error(Z);
},parse:function W(ag){var an=this,ad=[0],ax=[null],ai=[],ay=this.table,Z="",ah=0,av=0,ab=0,af=2,ak=1;this.lexer.setInput(ag);this.lexer.yy=this.yy;this.yy.lexer=this.lexer;if(typeof this.lexer.yylloc=="undefined"){this.lexer.yylloc={};}var aa=this.lexer.yylloc;ai.push(aa);if(typeof this.yy.parseError==="function"){this.parseError=this.yy.parseError;}function am(aA){ad.length=ad.length-2*aA;ax.length=ax.length-aA;ai.length=ai.length-aA;}function al(){var aA;aA=an.lexer.lex()||1;if(typeof aA!=="number"){aA=an.symbols_[aA]||aA;}return aA;}var au,ap,ac,at,az,aj,ar={},ao,aw,Y,ae;while(true){ac=ad[ad.length-1];if(this.defaultActions[ac]){at=this.defaultActions[ac];}else{if(au==null){au=al();}at=ay[ac]&&ay[ac][au];}if(typeof at==="undefined"||!at.length||!at[0]){if(!ab){ae=[];for(ao in ay[ac]){if(this.terminals_[ao]&&ao>2){ae.push("'"+this.terminals_[ao]+"'");}}var aq="";if(this.lexer.showPosition){aq="Parse error on line "+(ah+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+ae.join(", ");}else{aq="Parse error on line "+(ah+1)+": Unexpected "+(au==1?"end of input":("'"+(this.terminals_[au]||au)+"'"));}this.parseError(aq,{text:this.lexer.match,token:this.terminals_[au]||au,line:this.lexer.yylineno,loc:aa,expected:ae});}if(ab==3){if(au==ak){throw new Error(aq||"Parsing halted.");}av=this.lexer.yyleng;Z=this.lexer.yytext;ah=this.lexer.yylineno;aa=this.lexer.yylloc;au=al();}while(1){if((af.toString()) in ay[ac]){break;}if(ac==0){throw new Error(aq||"Parsing halted.");}am(1);ac=ad[ad.length-1];}ap=au;au=af;ac=ad[ad.length-1];at=ay[ac]&&ay[ac][af];ab=3;}if(at[0] instanceof Array&&at.length>1){throw new Error("Parse Error: multiple actions possible at state: "+ac+", token: "+au);}switch(at[0]){case 1:ad.push(au);ax.push(this.lexer.yytext);ai.push(this.lexer.yylloc);ad.push(at[1]);au=null;if(!ap){av=this.lexer.yyleng;Z=this.lexer.yytext;ah=this.lexer.yylineno;aa=this.lexer.yylloc;if(ab>0){ab--;}}else{au=ap;ap=null;}break;case 2:aw=this.productions_[at[1]][1];ar.$=ax[ax.length-aw];ar._$={first_line:ai[ai.length-(aw||1)].first_line,last_line:ai[ai.length-1].last_line,first_column:ai[ai.length-(aw||1)].first_column,last_column:ai[ai.length-1].last_column};aj=this.performAction.call(ar,Z,av,ah,this.yy,at[1],ax,ai);if(typeof aj!=="undefined"){return aj;}if(aw){ad=ad.slice(0,-1*aw*2);ax=ax.slice(0,-1*aw);ai=ai.slice(0,-1*aw);}ad.push(this.productions_[at[1]][0]);ax.push(ar.$);ai.push(ar._$);Y=ay[ad[ad.length-2]][ad[ad.length-1]];ad.push(Y);break;case 3:return true;}}return true;}};var S=(function(){var ab=({EOF:1,parseError:function ad(ag,af){if(this.yy.parseError){this.yy.parseError(ag,af);}else{throw new Error(ag);}},setInput:function(af){this._input=af;this._more=this._less=this.done=false;this.yylineno=this.yyleng=0;this.yytext=this.matched=this.match="";this.conditionStack=["INITIAL"];this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0};return this;},input:function(){var ag=this._input[0];this.yytext+=ag;this.yyleng++;this.match+=ag;this.matched+=ag;var af=ag.match(/\n/);if(af){this.yylineno++;}this._input=this._input.slice(1);return ag;},unput:function(af){this._input=af+this._input;return this;},more:function(){this._more=true;return this;},pastInput:function(){var af=this.matched.substr(0,this.matched.length-this.match.length);return(af.length>20?"...":"")+af.substr(-20).replace(/\n/g,"");},upcomingInput:function(){var af=this.match;if(af.length<20){af+=this._input.substr(0,20-af.length);}return(af.substr(0,20)+(af.length>20?"...":"")).replace(/\n/g,"");},showPosition:function(){var af=this.pastInput();var ag=new Array(af.length+1).join("-");return af+this.upcomingInput()+"\n"+ag+"^";},next:function(){if(this.done){return this.EOF;}if(!this._input){this.done=true;}var aj,ah,ag,af;if(!this._more){this.yytext="";this.match="";}var ak=this._currentRules();for(var ai=0;ai<ak.length;ai++){ah=this._input.match(this.rules[ak[ai]]);if(ah){af=ah[0].match(/\n.*/g);if(af){this.yylineno+=af.length;}this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:af?af[af.length-1].length-1:this.yylloc.last_column+ah[0].length};this.yytext+=ah[0];this.match+=ah[0];this.matches=ah;this.yyleng=this.yytext.length;this._more=false;this._input=this._input.slice(ah[0].length);this.matched+=ah[0];aj=this.performAction.call(this,this.yy,this,ak[ai],this.conditionStack[this.conditionStack.length-1]);if(aj){return aj;}else{return;}}}if(this._input===""){return this.EOF;}else{this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno});}},lex:function Y(){var af=this.next();if(typeof af!=="undefined"){return af;}else{return this.lex();}},begin:function Z(af){this.conditionStack.push(af);},popState:function ae(){return this.conditionStack.pop();},_currentRules:function ac(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules;}});ab.performAction=function aa(aj,ag,ai,af){var ah=af;switch(ai){case 0:return 6;break;case 1:return 6;break;case 2:return 6;break;case 3:return 6;break;case 4:return 6;break;case 5:return 6;break;case 6:return 8;break;case 7:return 8;break;case 8:return 7;break;case 9:return 9;break;case 10:return 15;break;case 11:return 16;break;case 12:return 14;break;case 13:return 13;break;case 14:return 17;break;case 15:return 11;break;case 16:return 12;break;case 17:return 45;break;case 18:return 23;break;case 19:return 24;break;case 20:return 18;break;case 21:return 19;break;case 22:return 20;break;case 23:return 21;break;case 24:return 26;break;case 25:return 25;break;case 26:return 27;break;case 27:return 28;break;case 28:return 29;break;case 29:return 30;break;case 30:return 31;break;case 31:return 32;break;case 32:return 33;break;case 33:return 34;break;case 34:return 35;break;case 35:return 36;break;case 36:return 37;break;case 37:return 38;break;case 38:return 39;break;case 39:return 40;break;case 40:return 41;break;case 41:return 42;
break;case 42:return 43;break;case 43:return 44;break;case 44:return 10;break;case 45:break;case 46:return 5;break;}};ab.rules=[/^0[xX][0-9a-fA-F]+/,/^[0-9]+[eE][-+]?[0-9]+/,/^[0-9]+\.([0-9]+)?([eE][-+]?[0-9]+)?/,/^([0-9]+)?\.[0-9]+([eE][-+]?[0-9]+)?/,/^[1-9][0-9]*/,/^0\b/,/^pi\b/,/^\u03c0/,/^e\b/,/^i\b/,/^\*/,/^\//,/^-/,/^\+/,/^\^/,/^\(/,/^\)/,/^,/,/^re\b/,/^im\b/,/^abs\b/,/^phase\b/,/^conjugate\b/,/^rotate\b/,/^max\b/,/^min\b/,/^sqrt\b/,/^log\b/,/^log2\b/,/^log10\b/,/^ln\b/,/^arcsin\b/,/^arccos\b/,/^arctan\b/,/^arctan2\b/,/^sin\b/,/^cos\b/,/^tan\b/,/^sinh\b/,/^cosh\b/,/^tanh\b/,/^arcsinh\b/,/^arccosh\b/,/^arctanh\b/,/^[^-*/+^(),\s0-9][^-*/+^(),\s]*/,/^\s+/,/^$/];ab.conditions={"INITIAL":{"rules":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46],"inclusive":true}};return ab;})();X.lexer=S;return X;})();if(typeof require!=="undefined"&&typeof exports!=="undefined"){exports.parser=H;exports.parse=function(){return H.parse.apply(H,arguments);};exports.main=function b(S){if(!S[1]){throw new Error("Usage: "+S[0]+" FILE");}if(typeof process!=="undefined"){var U=require("fs").readFileSync(require("path").join(process.cwd(),S[1]),"utf8");}else{var T=require("file").path(require("file").cwd());var U=T.join(S[1]).read({charset:"utf-8"});}return exports.parser.parse(U);};if(typeof module!=="undefined"&&require.main===module){exports.main(typeof process!=="undefined"?process.argv.slice(1):require("system").args);}}function m(S){m.superclass.constructor.call(this,S);}m.NAME="MathCanvas";m.ATTRS={func:{value:new e.MathFunction.Value(0),setter:function(S){return e.Lang.isString(S)?e.MathCanvas.Parser.parse(S):S;}},fontName:{value:"sans-serif",validator:e.Lang.isString},fontSize:{value:1,validator:e.Lang.isNumber},minWidth:{value:100,validator:e.Lang.isNumber},minHeight:{value:100,validator:e.Lang.isNumber}};function F(T){var U=T.charAt(0).toUpperCase()+T.substr(1);var S=Math.max(this.get("min"+U),this["render_"+T]+5);this.set(T,S+"px");this.canvas.setAttribute(T,S);}e.extend(m,e.Widget,{initializer:function(V){this.after("funcChange",function(){this.selection=-1;this._renderExpression();});this.after("fontNameChange",this._renderExpression);this.after("fontSizeChange",this._renderExpression);this.after("minWidthChange",this._renderExpression);this.after("minHeightChange",this._renderExpression);var W=navigator.userAgent.toLowerCase();var S=navigator.platform;var U=W.indexOf("series60")!=-1||W.indexOf("symbian")!=-1||W.indexOf("windows ce")!=-1||W.indexOf("blackberry")!=-1;var Z=typeof orientation!="undefined";var Y="ontouchstart" in document.documentElement;var X=S.indexOf("iPhone")!=-1||S.indexOf("iPad")!=-1;var T=W.indexOf("android")!=-1||(!X&&!U&&Y&&Z);this.touch=Y||W.indexOf("iphone")!=-1;},renderUI:function(){var T=this.get("contentBox");var S=this.get("minWidth");this.set("width",S+"px");var V=this.get("minHeight");this.set("height",S+"px");this.canvas=e.Node.create('<canvas width="'+S+'" height="'+V+'" tabindex="0"></canvas>');if(!this.canvas){throw Error("This browser does not support canvas rendering.");}T.appendChild(this.canvas);this.context=new e.Canvas.Context2d(this.canvas);e.mix(this.context,v);this.context.math_canvas=this;this._renderExpression();function U(X){var W=e.Array.reduce(X,"",function(Y,Z){return Y+e.Lang.sub('<button type="button" class="keyboard-{value}" value="{value}">{label}</button>',{value:Z.value||Z,label:Z.label||Z});});return"<p>"+W+"</p>";}if(this.touch||YUI.config.debug_mathcanvas_keyboard){this.keyboard=e.Node.create('<div class="keyboard">'+U([1,2,3,4,5,6,7,8,9,0])+U(["+",{value:"-",label:"&ndash;"},{value:"*",label:"&times;"},"/","^","|",",","e","\u03c0","."])+'<p class="last">'+'<button type="button" class="keyboard-hide" value="hide" title="Hide keyboard">&dArr;</button>'+'<button type="button" class="keyboard-eval" value="=" title="Evaluate expression">=</button>'+'<button type="button" class="keyboard-delete" value="delete" title="Delete selection">&empty;</button>'+'<button type="button" class="keyboard-expand" value="expand" title="Expand selection">&hArr;</button>'+'<select class="keyboard-func">'+"<option>Functions</option>"+"<optgroup>"+"<option>abs</option>"+"<option>arccos</option>"+"<option>arcsin</option>"+"<option>arctan</option>"+"<option>arctan2</option>"+"<option>conjugate</option>"+"<option>cos</option>"+"<option>cosh</option>"+"<option>sinh</option>"+"<option>tanh</option>"+"<option>imag</option>"+"<option>arccosh</option>"+"<option>arcsinh</option>"+"<option>arctanh</option>"+"<option>log</option>"+"<option>max</option>"+"<option>min</option>"+"<option>ln</option>"+"<option>phase</option>"+"<option>real</option>"+"<option>rotate</option>"+"<option>sin</option>"+"<option>sqrt</option>"+"<option>tan</option>"+"</optgroup>"+"</select>"+"<br>"+'<select class="keyboard-const">'+"<option>Constants</option>"+"<optgroup>"+"<option>c</option>"+"<option>g</option>"+"</optgroup>"+"</select>"+"</p>"+"</div>");T.appendChild(this.keyboard);this.keyboard.setStyle("bottom",(-this.keyboard.get("offsetHeight"))+"px");}},bindUI:function(){this.canvas.on("mousedown",function(X){function S(ab){var aa=this.canvas.getXY();var Z=[Math.round(ab.pageX-aa[0])-Y[0],Math.round(ab.pageY-aa[1])-Y[1]];this.selection=this.rect_list.getSelection(T,Z);this._renderExpression();}var V=this.rect_list.getBounds();var Y=[Math.floor((this.canvas.getAttribute("width")-l.width(V))/2),Math.floor((this.canvas.getAttribute("height")-l.height(V))/2)];var W=this.canvas.getXY();var T=[Math.round(X.pageX-W[0])-Y[0],Math.round(X.pageY-W[1])-Y[1]];S.call(this,X);var U=this.canvas.on("mousemove",S,this);e.one(e.config.doc).once("mouseup",function(Z){U.detach();if(this.selection>=0){this.showKeyboard();}else{this.hideKeyboard();}},this);},this);this.canvas.on("keydown",function(S){if(S.charCode==32){this.expandSelection();}else{if(S.charCode==8){this.deleteSelection();}}},this);if(this.keyboard){this.keyboard.delegate("click",function(S){var T=S.currentTarget.get("value");
if(T=="hide"){this.hideKeyboard();}else{if(T=="expand"){this.expandSelection();}else{if(T=="delete"){this.deleteSelection();}else{if(T=="="){this.fire("evaluate");this.hideKeyboard();}}}}},"button",this);this.keyboard.one(".keyboard-func").on("change",function(S){this.set("selectedIndex",0);});this.keyboard.one(".keyboard-const").on("change",function(S){this.set("selectedIndex",0);});}},destructor:function(){this.canvas=null;this.context=null;},showKeyboard:function(){if(!this.keyboard){return;}if(this.keyboard_anim){this.keyboard_anim.stop();}this.keyboard_anim=new e.Anim({node:this.keyboard,to:{bottom:0},duration:0.5});this.keyboard_anim.run();},hideKeyboard:function(){if(!this.keyboard){return;}if(this.keyboard_anim){this.keyboard_anim.stop();}this.keyboard_anim=new e.Anim({node:this.keyboard,to:{bottom:-this.keyboard.get("offsetHeight")},duration:0.5});this.keyboard_anim.run();},expandSelection:function(){if(this.selection>=0){var S=this.rect_list.get(this.selection).func.getParent();if(S){this.selection=this.rect_list.findIndex(S);this._renderExpression();}}},deleteSelection:function(){if(this.selection>=0){this.deleteFunction(this.rect_list.get(this.selection).func);}},deleteFunction:function(T){var U=T.getParent();var S=U;if(!U){this.selection=0;this.set("func","0");return;}else{if(U.getArgCount()==1){this.deleteFunction(U);return;}else{if(U.getArgCount()==2){var S=(U.getArg(0)==T?U.getArg(1):U.getArg(0));var V=U.getParent();if(V){V.replaceArg(U,S);}else{this.selection=-1;S.parent=null;this.set("func",S);}}else{U.removeArg(T);}}}this.selection=-1;this._renderExpression();this.selection=this.rect_list.findIndex(S);this._renderExpression();},_renderExpression:function(){this.context.clearRect(0,0,this.canvas.getAttribute("width"),this.canvas.getAttribute("height"));var V=this.get("func");if(!V){return;}this.rect_list=new l();var S={x:0,y:0};V.prepareToRender(this.context,S,100,this.rect_list);var U=this.rect_list.getBounds();this.render_width=l.width(U);F.call(this,"width");this.render_height=l.height(U);F.call(this,"height");this.context.save();this.context.translate(Math.floor((this.canvas.getAttribute("width")-l.width(U))/2),Math.floor((this.canvas.getAttribute("height")-l.height(U))/2));if(this.selection>=0){var T=this.rect_list.get(this.selection).rect;this.context.save();this.context.set("fillStyle","#99FFFF");this.context.fillRect(T.left,T.top,l.width(T),l.height(T));this.context.restore();}V.render(this.context,this.rect_list);this.context.restore();}});var h=Math.PI/6;var v={drawString:function(W,T,S,V){var U=this.getLineHeight(S);this._setFont(S);this.set("textBaseline","top");this.fillText(V,W,Math.floor(T-U/2));},getLineHeight:function(S){return(13*this.math_canvas.get("fontSize")*S/100);},getStringWidth:function(S,U){this.save();this._setFont(S);var T=this.measureText(U).width;this.restore();return T;},_setFont:function(S){this.set("font",(this.math_canvas.get("fontSize")*S/100)+"em "+this.math_canvas.get("fontName"));},getSuperSubFontSize:function(S){var T=S*0.6;return Math.max(T,40);},getSuperscriptHeight:function(S){return l.height(S)/2;},getSubscriptDepth:function(S){return l.height(S)/2;},drawSquareBrackets:function(U){var T=U.bottom-U.top;var S=this.getSquareBracketWidth(U)-2;this.moveTo(U.left-2,U.top);this.line(-S,0);this.line(0,T-1);this.line(S,0);this.stroke();this.moveTo(U.right+1,U.top);this.line(S,0);this.line(0,T-1);this.line(-S,0);this.stroke();},getSquareBracketWidth:function(T){var S=T.bottom-T.top;return Math.round(3+((S-1)/10));},drawParentheses:function(W){var V=W.bottom-W.top;var S=V/(2*Math.sin(h));var T=Math.round(S);var X=l.ycenter(W);var U=this.getParenthesisWidth(W);this.beginPath();this.arc(W.left-U+S,X,T,Math.PI-h,Math.PI+h,false);this.stroke();this.beginPath();this.arc(W.right+U-S,X,T,h,-h,true);this.stroke();},getParenthesisWidth:function(T){var S=T.bottom-T.top;return 2+Math.round(0.5+(S*(1-Math.cos(h)))/(2*Math.sin(h)));},drawVerticalBar:function(S){this.moveTo(S.left+1,S.top);this.lineTo(S.left+1,S.bottom);this.stroke();},getVerticalBarWidth:function(){return 3;},drawHorizontalBar:function(S){var T=S.top+1;this.moveTo(S.left,T);this.lineTo(S.right-1,T);this.stroke();},getHorizontalBarHeight:function(){return 3;}};H.yy.MathFunction=e.MathFunction;e.MathCanvas=m;e.MathCanvas.RectList=l;e.MathCanvas.Parser=H;},"gallery-2012.05.16-20-37",{skinnable:true,requires:["widget","collection","node-screen","gallery-complexnumber","gallery-canvas","gallery-node-optimizations","anim-base","array-extras"]});