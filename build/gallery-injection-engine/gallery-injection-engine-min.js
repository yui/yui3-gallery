YUI.add("gallery-injection-engine",function(f){var c,a=f.config.doc.documentElement,b="script",d=/^(http[s]?:\/\/|\/\/[\w\d]+)/;function e(){e.superclass.constructor.apply(this,arguments);}f.mix(e,{NAME:"injection",ATTRS:{bootstrap:{readOnly:true},css:{getter:"_buildCSS"},js:{getter:"_buildJS"},dir:{value:a.dir||"ltr"},lang:{value:a.lang||"en"},container:{setter:function(g){return f.one(g);}},dynamicAttrs:{value:[]},dynamicEvents:{value:[]}}});f.extend(e,f.Base,{YCONFIG_MAP:["guid","lang"],initializer:function(h){var g=this;c=f.merge((h||{}),{lang:g.get("lang"),guid:f.guid()});f.each(g.get("dynamicAttrs"),function(i){g.addAttr(i,{value:c[i]},false);delete c[i];});YUI.Env[c.guid]=f.bind(g._connect,g);f.later(0,g,function(){g._init();});},preload:function(j){var g=this,i=g.get("container"),k=f.UA.ie,h=function(l){if((l=g._testFullURL(l))&&(l=l.url)){if(k){(new Image()).src=l;}else{i.append('<object data="'+l+'" width="0" tabindex="-1" height="0" style="display:none;left:-9999px;position:absolute;"></object>');}}};j=(f.Lang.isArray(j)?j:f.Array(arguments,0,true));if(j.length>0){f.each(j,h);}else{f.each(g.get("js"),h);f.each(g.get("css"),h);}return g;},boot:function(){var g=this;g._createSandbox(c);return g;},_connect:function(h){var g=this;g._set("bootstrap",h);h.setAttrs(c);f.each(g.get("dynamicAttrs"),function(j){var i=g.get(j);if(!f.Lang.isUndefined(i)){h.set(j,g.get(j));}g.on(j+"Change",function(k){h.set(k.attrName,k.newVal);});});f.each(g.get("dynamicEvents"),function(i){i=(f.Lang.isObject(i)?i:{name:i});if(i.name){h.on(i.name,f.bind(g._onEvent,g,i));}});if(!f.UA.ie){g.get("container").all("object").remove();}return this._ready();},_init:function(){this._bind();},_bind:function(){},_ready:function(){},_onEvent:function(j,i){var g=this,h=j.rename||j.name;if((j.fn?j.fn.apply(g,[i,h,j]):true)){g.fire(h);}},_buildJS:function(g){return f.Array((g||[]));},_buildCSS:function(g){return f.Array((g||[]));},_buildMeta:function(g){return'<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>';},_buildCfg:function(){var g={};f.each(this.YCONFIG_MAP,function(h){g[h]=c[h];});g.t0=new Date().getTime();g.debug=c.debug||false;return g;},_buildBody:function(j){var g=[(j.html?j.html:"")],i=f.JSON||(f.config.win||{}).JSON,h=this._buildCfg(),k=[];if(i){k=i.stringify(h);}else{k=[];f.each(f.Object.keys(h),function(m){var l=h[m];if(!f.Lang.isUndefined(l)){k.push(m+":"+(f.Lang.isBoolean(l)?l:'"'+l+'"'));}});k="{"+k.join(",")+"}";}g.push("<",b,">YUI_config=",k,";</",b,">");return g;},_createSandbox:function(i){var o=this,j=f.Node.create('<iframe frameborder="0"></iframe>'),g=o.get("container"),h=o.get("css"),l=o.get("js"),n=o._buildMeta(i),k=o._buildBody(i),m;f.each(h,function(q,p){q=o._testFullURL(q);h[p]=(q&&f.Lang.isObject(q)?'<link rel="stylesheet" type="text/css" href="'+q.url+'"/>':"<style>"+q+"</style>");});f.each(l,function(q,p){q=o._testFullURL(q);l[p]=(q&&f.Lang.isObject(q)?"<"+b+' src="'+q.url+'"></'+b+">":"<"+b+">"+q+"</"+b+">");});j.set("src","javascript"+((f.UA.ie)?":false":":")+";");g.append(j);m=j._node.contentWindow.document;m.open().write('<!doctype html><html dir="'+o.get("dir")+'" lang="'+o.get("lang")+'"><head>'+n+h.join("")+"</head><body>"+k.join("")+l.join("")+"</body></html>");m.close();},_testFullURL:function(g){if(f.Lang.isString(g)){g=(d.test(g)?{url:g}:g);}return(f.Lang.isObject(g)&&!g.url?null:g);}});f.InjectionEngine=e;},"gallery-2011.10.27-17-03",{requires:["node","base-base"]});