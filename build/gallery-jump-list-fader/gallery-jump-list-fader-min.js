YUI.add("gallery-jump-list-fader",function(A){A.namespace("Plugin").JumpListFader=A.Base.create("jump-list-fader",A.Plugin.Base,[],{_anims:[],_animBase:{on:{start:function(B){B.currentTarget.get("node").setStyle("overflow","hidden");},end:function(B){B.currentTarget.get("node").setStyle("overflow","hidden");}}},_animHideTo:{height:0,opacity:0},_animShowTo:{opacity:1},initializer:function(B){this._animBase.easing=this.get("easing");this._animBase.duration=this.get("duration");this._hideShowAllLinks();A.one(this.get("container")).all(".back-to-top").set("text","Show All").on("click",function(C){C.preventDefault();this._showAll();},this);this.get("selection");A.delegate("click",function(F){var C=F.currentTarget.getAttribute("href"),E,D;if("#"!==C.substring(0,1)){return;}F.preventDefault();D=C.substring(1);E=A.one(this.get("container")).one("a[name="+D+"]")||A.one(this.get("container")).one("#"+D);if(E!==null){this.set("selection",E);}},this.get("host"),this.get("selector"),this);},_clearAnims:function(){A.Array.invoke(this._anims,"stop",false);this._anims=[];},_runAnims:function(){A.Array.invoke(this._anims,"run");},_addAnimToGroup:function(C,B){C.each(function(E){switch(B){case"hide":if(parseInt(E.getStyle("opacity"),10)===0){return;}var D=this._animBase;D.to=this._animHideTo;D.node=E;this._anims.push(new A.Anim(D));break;case"show":this._anims.push(this._getOpenAnim(E));break;}},this);},_getOpenAnim:function(D){var B=0,C={},E=this._animBase;C.height=D.getStyle("height");C.overflow=D.getStyle("overflow");C.opactiy=D.getStyle("opacity");C.visibility=D.getStyle("visibility");D.setStyles({"height":"auto","overflow":"auto","opacity":1,"visibility":"visible"});B=D.get("offsetHeight");D.setStyles(C);E.to=this._animShowTo;E.to.height=B+"px";E.node=D;return new A.Anim(E);},_showAll:function(){this._clearAnims();this._addAnimToGroup(A.one(this.get("container")).all("."+this.get("groupClass")),"show");this._runAnims();this._hideShowAllLinks();this._setActiveSelector();},_hideAll:function(){this._clearAnims();this._addAnimToGroup(A.one(this.get("container")).all("."+this.get("groupClass")),"hide");this._runAnims();this._setActiveSelector();},_hideAllExcept:function(F){var C=this.get("groupClass"),B=A.one(this.get("container")).all("."+C),E,D;this._clearAnims();E=F;if(!E.hasClass(C)){E=E.ancestor("."+C);}D=B.refresh().indexOf(E);if(D>-1){B._nodes.splice(D,1);}this._addAnimToGroup(B,"hide");if(E.getStyle("opacity")!=1){this._anims.push(this._getOpenAnim(E));}this._runAnims();this._hideShowAllLinks(E);this._setActiveSelector("#"+(F.get("name")||F.get("id")));},_hideShowAllLinks:function(B){A.one(this.get("container")).all(".back-to-top").setStyle("visibility","hidden");if(B){B.all(".back-to-top").setStyle("visibility","visible");}},_setActiveSelector:function(B){this.get("host").all(".active").removeClass("active");if(B){this.get("host").all(this.get("selector")+"[href="+B+"]").addClass("active");}}},{NS:"jumpListFader",ATTRS:{selector:{value:"a"},container:{value:"#jump-to-container"},groupClass:{value:"jump-group"},easing:{easing:A.Easing.easeOutStrong},duration:{value:0.28},selection:{value:"all",setter:function(B){if(B===null){this._hideAll();}else{if(B==="all"){this._showAll();}else{if(B instanceof A.Node){this._hideAllExcept(B);}}}return B;}}}});},"gallery-2010.09.08-19-45",{requires:["node-pluginhost","anim-easing","event-base","event-delegate","plugin","base-build","collection"]});