YUI.add("gallery-progress-bar",function(b){var a=b.Lang;b.ProgressBar=b.Base.create("progressBar",b.Widget,[],{_anim:null,renderUI:function(){this.get("contentBox").append(a.sub(this.get("layout"),{sliderClass:this.getClassName("slider"),labelClass:this.getClassName("label")}));},bindUI:function(){this.after("labelChange",this._updateLabel);this.after("labelTemplateChange",this._updateLabel);this.after("progressChange",this._updateBar);},syncUI:function(){this._updateBar();},increment:function(c){c=c||1;this.set("progress",this.get("progress")+parseFloat(c,10));return this;},decrement:function(c){c=c||1;this.set("progress",this.get("progress")-parseFloat(c,10));return this;},update:function(c){this.set("progress",c);return this;},setLabelAt:function(c,e){var d=this.get("label");c=parseFloat(c,10);d[c]=e;this.set("label",d);return this;},removeLabelAt:function(c){var d=this.get("label");c=parseFloat(c,10);if(d[c]!==undefined&&d[c]!==null){delete d[c];}this.set("label",d);return this;},setLabelTemplateAt:function(c,e){var d=this.get("labelTemplate");c=parseFloat(c,10);d[c]=e;this.set("labelTemplate",d);return this;},removeLabelTemplateAt:function(c){var d=this.get("labelTemplate");c=parseFloat(c,10);if(d[c]!==undefined&&d[c]!==null){delete d[c];}this.set("labelTemplate",d);return this;},_updateLabel:function(h){var f=this.get("progress"),d=this.getAttrs(),c=this._getLabel(f),g=this._getLabelTemplate(f);d.label=c||"";this.get("contentBox").all("."+this.getClassName("label")).set("text",a.sub(g,d));},_updateBar:function(f){var d=this.get("contentBox"),c=d.get("offsetWidth")*this.get("progress")/100;if(!this._anim){this._makeAnim();}if(this._anim&&this._anim.get("running")){this._anim.stop();}this._anim.set("to.width",c);this._anim.run();this._updateLabel();},_makeAnim:function(){var d=this.get("animation"),c=this.get("contentBox").one(this.get("animateNode"));d.node=c;if(!d.to){d.to={width:0};}this._anim=new b.Anim(d);},_getAnimateNode:function(){return("."+this.getClassName("slider"));},_getLabel:function(f){var e=this.get("label"),d=null,h,g=-1,c;if(!a.isObject(e)){return e;}if(e[f]!==undefined&&e[f]!==null){d=e[f];}else{h=b.Object.keys(e);h.sort(b.Array.numericSort);c=h.length;while(++g<c){if(h[g]<=f){d=e[h[g]];}}}return d;},_getLabelTemplate:function(d){var f=this.get("labelTemplate"),h=null,g,e=-1,c;if(!a.isObject(f)){return f;}if(f[d]!==undefined&&f[d]!==null){h=f[d];}else{g=b.Object.keys(f);g.sort(b.Array.numericSort);c=g.length;while(++e<c){if(g[e]<=d){h=f[g[e]];}}}return h;}},{ATTRS:{animation:{value:{easing:b.Easing.easeIn,duration:0.5}},animateNode:{valueFn:"_getAnimateNode"},labelTemplate:{value:{0:"{label} - {progress}%"},validator:function(c){return(a.isString(c)||a.isObject(c));},setter:function(c){if(a.isString(c)){c={0:c};}return c;}},label:{value:{0:"Loading",100:"Complete"},validator:function(c){return(a.isString(c)||a.isObject(c));},setter:function(c){if(a.isString(c)){c={0:c};}return c;}},layout:{value:'<div class="{sliderClass} {labelClass}"></div>'},precision:{value:2,setter:function(c){return parseInt(c,10);}},progress:{value:0,setter:function(d){var c=Math.pow(10,this.get("precision"));d=parseFloat(d,10);if(d<0){d=0;}else{if(d>100){d=100;}}return Math.round(d*c)/c;}}}});},"gallery-2011.02.09-21-32",{requires:["widget","anim","base-build"]});