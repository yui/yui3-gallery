YUI.add("gallery-async",function(a){(function(d,i){var m="complete",k="initOnly",l={all:"_runAll",queue:"_runQueue"},e=d.Array,p=d.AsyncCommand,r=d.Lang,g,o=e.each,n=d.instanceOf,f=r.isArray,s=r.isFunction,j=r.isString,b=e.map,q=d.merge,h=e.unnest,c=d.Base.create(i,p,[],{initializer:function(){var t=this,u=l[t.get("mode")];if(u){t._set("fn",function(v){t[u].call(t,v,t.get("run"));});}},_runAll:function(x,w){var t=w.length,u=0,v=[];o(w,function(z,y){z.run().after(m,function(A){if(A.failed){x.fail(A.error);return;}u+=1;v[y]=A.value;if(u===t){x(v);}});});if(!t){x(v);}},_runQueue:function(w,v,t,u){t=t||0;u=u||[];if(t>=v.length){w(u);return;}v[t].run().after(m,function(x){if(x.failed){w.fail(x.error);return;}u[t]=x.value;this._runQueue(w,v,t+1,u);},this);}},{ATTRS:{config:{value:{},writeOnce:k},mode:{value:"queue",writeOnce:k},run:{setter:function(u){var t=this.get("config");return b(f(u)?u:[u],function(v){if(n(v,p)){return v;}if(j(v)){v=c.commands[v]||{};}if(s(v)){return new p(q(t,{fn:v}));}return new p(q(t,v));});},value:[],writeOnce:k}},commands:{},runAll:function(){return g({},"all",h(arguments));},runAllWithConfig:function(){var t=e(arguments);return g(t.shift(),"all",h(t));},runQueue:function(){return g({},"queue",h(arguments));},runQueueWithConfig:function(){var t=e(arguments);return g(t.shift(),"queue",h(t));}});g=function(t,v,u){return new c({config:t,mode:v,run:u}).run();};d.Async=c;}(a,arguments[1]));},"gallery-2012.06.20-20-07",{requires:["array-extras","gallery-array-unnest","gallery-async-command"],skinnable:false});