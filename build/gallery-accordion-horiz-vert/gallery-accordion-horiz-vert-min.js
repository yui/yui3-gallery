YUI.add("gallery-accordion-horiz-vert",function(b){var l=(0<b.UA.ie&&b.UA.ie<8),n=!(0<b.UA.ie&&b.UA.ie<8),q=(l?1:0);function m(r){r=r||{};if(b.Lang.isUndefined(r.tabIndex)){r.tabIndex=null;}if(b.Lang.isUndefined(r.horizontal)){r.horizontal=false;}m.superclass.constructor.call(this,r);}function g(){return !b.Lang.isUndefined(b.Anim);}function j(r){return(r&&n&&!b.Lang.isUndefined(b.Anim));}m.NAME="accordion";m.ATTRS={horizontal:{value:false,writeOnce:true},titles:{writeOnce:true},replaceTitleContainer:{value:true,validator:b.Lang.isBoolean},sections:{writeOnce:true},replaceSectionContainer:{value:true,validator:b.Lang.isBoolean},allowAllClosed:{value:false,validator:b.Lang.isBoolean,setter:function(r){this.allow_all_closed=r;return r;}},allowMultipleOpen:{value:false,validator:b.Lang.isBoolean},animateRender:{value:false,writeOnce:true,validator:b.Lang.isBoolean,setter:j},animateInsertRemove:{valueFn:g,validator:b.Lang.isBoolean,setter:j},animateOpenClose:{valueFn:g,validator:b.Lang.isBoolean,setter:j},animateDuration:{value:null,validator:function(r){return(r===null||b.Lang.isNumber(r));}},animateEasing:{value:null,validator:function(r){return(r===null||b.Lang.isFunction(r));}}};m.HTML_PARSER={titles:function(r){return r.all("li > div:nth-child(1)");},sections:function(r){return r.all("li > div:nth-child(2)");}};var a=b.ClassNameManager.getClassName(m.NAME,"open");var f=b.ClassNameManager.getClassName(m.NAME,"closed");function o(r){b.Event.purgeElement(r,true);while(r.hasChildNodes()){r.removeChild(r.lastChild);}}b.extend(m,b.Widget,{initializer:function(r){this.section_list=[];this.get("allowAllClosed");if(this.get("horizontal")){this.slide_style_name="width";this.slide_size_name="offsetWidth";this.fixed_style_name="height";this.fixed_size_name="offsetHeight";}else{this.slide_style_name="height";this.slide_size_name="offsetHeight";this.fixed_style_name="width";this.fixed_size_name="offsetWidth";}this.after("allowMultipleOpenChange",function(s){if(this.section_list&&this.section_list.length>0&&!s.newVal){this.closeAllSections();}});this.after("allowAllClosedChange",function(s){if(this.section_list&&this.section_list.length>0&&!s.newVal&&this.allSectionsClosed()){this.toggleSection(0);}});},renderUI:function(){this.get("boundingBox").addClass(this.getClassName(this.get("horizontal")?"horiz":"vert"));var u=this.get("titles");if(b.Lang.isString(u)){u=b.all(u);}var v=this.get("sections");if(b.Lang.isString(v)){v=b.all(v);}if(u instanceof b.NodeList&&v instanceof b.NodeList&&u.size()==v.size()){var s=this.get("animateInsertRemove");this.set("animateInsertRemove",this.get("animateRender"));var t=u.size();for(var r=0;r<t;r++){this.appendSection(u.item(r),v.item(r));}this.set("animateInsertRemove",s);}else{if(u instanceof Array&&v instanceof Array&&u.length==v.length){var s=this.get("animateInsertRemove");this.set("animateInsertRemove",this.get("animateRender"));var t=u.length;for(var r=0;r<t;r++){this.appendSection(u[r],v[r]);}this.set("animateInsertRemove",s);}else{}}this.get("contentBox").all("> li").remove();},getSectionCount:function(){return this.section_list.length;},getTitle:function(r){return this.section_list[r].title;},setTitle:function(r,w){var s=this.section_list[r].title;o(s);var u;if(b.Lang.isString(w)){var u=b.one(w);if(!u){s.set("innerHTML",w);}}else{u=w;}if(u&&this.get("replaceTitleContainer")){var v=s.get("parentNode");var x=s.get("nextSibling");v.removeChild(s);if(x){v.insertBefore(u,x);}else{v.appendChild(u);}this.section_list[r].title=u;u.addClass(this.getClassName("title"));u.addClass(this.section_list[r].open?a:f);}else{if(u){s.appendChild(u);}}if(l){s.setStyle("display",s.get("innerHTML")?"":"none");}},getSection:function(r){return this.section_list[r].content;},setSection:function(r,t){var w=this.section_list[r].content;o(w);var s;if(b.Lang.isString(t)){var s=b.one(t);if(!s){w.set("innerHTML",t);}}else{s=t;}if(s&&this.get("replaceSectionContainer")){var v=w.getStyle("display");var u=w.get("parentNode");var x=w.get("nextSibling");u.removeChild(w);if(x){u.insertBefore(s,x);}else{u.appendChild(s);}this.section_list[r].content=s;s.addClass(this.getClassName("section"));s.addClass(this.section_list[r].open?a:f);s.setStyle("display",v);}else{if(s){w.appendChild(s);}}},_getClip:function(r){return this.section_list[r].clip;},prependSection:function(s,r){return this.insertSection(0,s,r);},appendSection:function(s,r){return this.insertSection(this.section_list.length,s,r);},insertSection:function(u,y,v){this.fire("beforeInsert",u);var z=b.Node.create("<div/>");z.addClass(this.getClassName("title"));z.addClass(f);var x=b.Node.create("<div/>");x.addClass(this.getClassName("section-clip"));x.setStyle(this.slide_style_name,q+"px");if(this.get("animateOpenClose")){x.setStyle("opacity",0);}var w=b.Node.create("<div/>");w.addClass(this.getClassName("section"));w.addClass(f);w.setStyle("display","none");x.appendChild(w);this.section_list.splice(u,0,{title:z,clip:x,content:w,open:false,anim:null});if(u<this.section_list.length-1){this.get("contentBox").insertBefore(z,this.section_list[u+1].title);}else{this.get("contentBox").appendChild(z);}this.setTitle(u,y);z=this.section_list[u].title;var A=z.get(this.slide_size_name);if(this.get("animateInsertRemove")){z.setStyle(this.slide_style_name,q+"px");var s={node:z,from:{opacity:0},to:{opacity:1}};s.to[this.slide_style_name]=A;var r=this._createAnimator(s);r.on("end",function(B,t){this.section_list[t].title.setStyle(this.slide_style_name,"auto");},this,u);r.run();}if(v){this.setSection(u,v);w=this.section_list[u].content;}if(u<this.section_list.length-1){this.get("contentBox").insertBefore(x,this.section_list[u+1].title);}else{this.get("contentBox").appendChild(x);}this.fire("insert",u,A);if(!this.allow_all_closed&&this.allSectionsClosed()){this.toggleSection(0);}return{title:z,content:w};},removeSection:function(t){this.fire("beforeRemove",t);function r(x,w){w[0].removeChild(w[1]);w[0].removeChild(w[2]);if(w[3]){this.fire("remove",t);}}var s=[this.get("contentBox"),this.section_list[t].title,this.section_list[t].clip,true];
if(this.get("animateInsertRemove")){var v={node:this.section_list[t].clip,from:{opacity:1},to:{opacity:0}};v.to[this.slide_style_name]=q;if(this.section_list[t].open){this._startAnimator(t,v);}v.node=this.section_list[t].title;var u=this._createAnimator(v);u.on("end",r,this,s);u.run();}else{s[3]=false;r.call(this,null,s);}this.section_list.splice(t,1);if(!s[3]){this.fire("remove",t);}if(!this.allow_all_closed&&this.allSectionsClosed()){this.toggleSection(0);}},findSection:function(s){s=b.Node.getDOMNode(b.one(s));var u=this.section_list.length;for(var r=0;r<u;r++){var v=b.Node.getDOMNode(this.section_list[r].title);var t=b.Node.getDOMNode(this.section_list[r].content);if(s==v||b.DOM.contains(v,s)||s==t||b.DOM.contains(t,s)){return r;}}return -1;},isSectionOpen:function(r){return this.section_list[r].open;},openSection:function(r){if(!this.section_list[r].open){this.toggleSection(r);}},closeSection:function(r){if(this.section_list[r].open){this.toggleSection(r);}},allSectionsOpen:function(){var s=this.section_list.length;for(var r=0;r<s;r++){if(!this.section_list[r].open){return false;}}return true;},allSectionsClosed:function(){var s=this.section_list.length;for(var r=0;r<s;r++){if(this.section_list[r].open){return false;}}return true;},toggleSection:function(r){if(!this.section_list[r].open&&!this.get("allowMultipleOpen")){var u=this.allow_all_closed;this.allow_all_closed=true;this.closeAllSections();this.allow_all_closed=u;}else{if(this.section_list[r].open&&!this.allow_all_closed){this.section_list[r].open=false;if(this.allSectionsClosed()){this.section_list[r].open=true;return;}this.section_list[r].open=true;}}function w(A,z){this.section_list[z].clip.setStyle(this.slide_style_name,"auto");this.fire("open",z);}function y(A,z){this.section_list[z].content.setStyle("display","none");this.fire("close",z);}if(!this.section_list[r].open){this.section_list[r].content.setStyle("display","block");this.fire("beforeOpen",r);this.section_list[r].open=true;this.section_list[r].title.replaceClass(f,a);this.section_list[r].content.replaceClass(f,a);var s=this.section_list[r].content.get(this.slide_size_name);if(this.get("animateOpenClose")){var x={node:this.section_list[r].clip,from:{opacity:0},to:{opacity:1}};x.to[this.slide_style_name]=s;var v=this._startAnimator(r,x);v.on("end",w,this,r);}else{var t=this.section_list[r].clip;if(t.getStyle("opacity")=="0"){t.setStyle("opacity",1);}w.call(this,null,r);}}else{this.fire("beforeClose",r);this.section_list[r].open=false;this.section_list[r].title.replaceClass(a,f);this.section_list[r].content.replaceClass(a,f);if(this.get("animateOpenClose")){var x={node:this.section_list[r].clip,from:{opacity:1},to:{opacity:0}};x.to[this.slide_style_name]=q;var v=this._startAnimator(r,x);v.on("end",y,this,r);}else{this.section_list[r].clip.setStyle(this.slide_style_name,q+"px");y.call(this,null,r);}}},openAllSections:function(){if(this.get("allowMultipleOpen")){var s=this.section_list.length;for(var r=0;r<s;r++){if(!this.section_list[r].open){this.toggleSection(r);}}}},closeAllSections:function(){var s=this.section_list.length;var t=true;for(var r=0;r<s;r++){if(this.section_list[r].open){if(!this.allow_all_closed&&t){t=false;}else{this.toggleSection(r);}}}if(!this.allow_all_closed&&t){this.toggleSection(0);}},_createAnimator:function(s){var r=this.get("animateDuration");if(r!==null){s.duration=r;}var t=this.get("animateEasing");if(t!==null){s.easing=t;}return new b.Anim(s);},_startAnimator:function(r,t){var s=this.section_list[r].anim;if(s){s.stop(true);}this.section_list[r].anim=s=this._createAnimator(t);s.on("end",function(v,u,w){if(u<this.section_list.length&&this.section_list[u].anim==w){this.section_list[u].anim=null;}},this,r,s);s.run();return s;}});b.Accordion=m;function k(){k.superclass.constructor.apply(this,arguments);}k.NAME="FixedSizeAccordionPlugin";k.NS="fixedsize";k.ATTRS={};var i=["animateRender","animateInsertRemove","animateOpenClose"];var e={width:"totalWidth",height:"totalHeight"};var d={width:"overflowX",height:"overflowY"};var h={width:"horizMarginBorderPadding",height:"vertMarginBorderPadding"};function c(r){this.set(r,false);this.modifyAttr(r,{readOnly:true});}function p(){var z=this.get("host");if(!this.init_fixed_size){b.Array.each(i,c,z);if(!z.get("rendered")){this.afterHostEvent("render",p,this);}this.onHostEvent("insert",function(){b.later(1,this,p);},this);this.onHostEvent("remove",p,this);this.onHostEvent("open",p,this);this.onHostEvent("close",p,this);this.init_fixed_size=true;}var t=z.slide_style_name;var w=z.get("boundingBox").parseDimensionStyle(t);var v=z.getSectionCount();var u=[];for(var s=0;s<v;s++){w-=z.getTitle(s)[e[t]]();if(z.isSectionOpen(s)){u.push(s);}}v=u.length;var A=Math.floor(w/v);var r=w%v;for(s=0;s<v;s++){var x=z.getSection(u[s]);var y=A-x[h[t]]();if(s===v-1){y+=r;}x.setStyle(t,y+"px");x.setStyle(d[t],"auto");}}b.extend(k,b.Plugin.Base,{initializer:function(r){var s=this.get("host");var t=s.slide_style_name;this.init_fixed_size=false;if(s.get(t)){p.call(this);}this.afterHostEvent(t+"Change",function(){b.later(1,this,p);},this);}});b.namespace("Plugin");b.Plugin.FixedSizeAccordion=k;},"gallery-2011.07.06-19-30",{skinnable:true,optional:["anim-base"],requires:["widget","selector-css3","plugin","gallery-dimensions"]});