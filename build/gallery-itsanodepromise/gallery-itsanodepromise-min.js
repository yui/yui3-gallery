YUI.add("gallery-itsanodepromise",function(e,t){"use strict";var n=e.Node,r=e.Lang,i=e.Array,s=document.implementation.hasFeature("MutationEvents","2.0"),o=250,u="availableagain",a="unavailableagain",f="contentreadyagain";n.fireAvailabilities=function(t){var n=this,r;n._loopingEvents||(n._loopingEvents={}),r=n._loopingEvents,r[t]||(r[t]=function(){n.availablePromise(t).then(function(i){e.fire(u,{target:i,type:u}),n.unavailablePromise(t).then(function(n){e.fire(a,{target:n,type:a}),r[t]()})}),n.contentreadyPromise(t).then(function(t){e.fire(f,{target:t,type:f})})},r[t]())},n.availablePromise=function(t,n){var r=this;return new e.Promise(function(i,s){var o=!1,u=e.once("available",function(){i(e.one(t)),o=!0,a&&a.cancel()},t),a=n&&e.later(n,null,function(){o||(s(new Error(t+" was not available within "+n+" ms")),u.detach.call(r))})})},n.contentreadyPromise=function(t,n){var r=this;return new e.Promise(function(i,s){var o=!1,u=e.once("available",function(){i(e.one(t)),o=!0,a&&a.cancel()},t),a=n&&e.later(n,null,function(){o||(s(new Error(t+" was not ready within "+n+" ms")),u.detach.call(r))})})},i.each(["show","hide"],function(t){n.prototype[t+"Promise"]=function(n,i){var s=this;return r.isObject(n)&&(i=n)&&(n=null)&&console.log("reshift name to config"),i&&(!i.duration||i.duration===0)&&(i=null)&&console.log("making config null"),e.usePromise("transition").then(function(){return new e.Promise(function(e){s[t](n||!0,i,function(){s.setStyle("opacity",t==="hide"?0:1),e(s)})})},function(t){e.soon(function(){throw t})})}}),n.unavailablePromise=function(t,n){var r=this,i,u;return n=n||{},n.afteravailable?(i=e.merge(n),delete i.afteravailable,this.availablePromise(t,n.timeout).then(e.bind(r.unavailablePromise,r,t,i))):(u=new e.Promise(function(r,i){var a,f,l=n&&n.timeout,c=n&&n.intervalNonNative;e.one(t)?(s?f=e.after("DOMNodeRemoved",function(){e.soon(function(){e.one(t)||(f.detach(),r(t))})}):a=e.later(c||o,null,function(){e.one(t)||(a.cancel(),r(t))},null,!0),l&&e.later(l,null,function(){var n="node "+t+" was not removed within "+l+" ms";!s&&!e.one(t)?r(t):i(new Error(n)),f&&u.getStatus()==="pending"&&f.detach()})):r(t)}),u)},s&&e.mix(e.Node.DOM_EVENTS,{DOMNodeRemoved:!0}),e.Node.prototype.availablePromise=n.availablePromise,e.Node.prototype.contentreadyPromise=n.contentreadyPromise,e.Node.prototype.unavailablePromise=n.unavailablePromise},"@VERSION@",{requires:["yui-base","yui-later","event-base","event-custom","node-base","node-style","timers","promise","gallery-itsamodulesloadedpromise"]});
