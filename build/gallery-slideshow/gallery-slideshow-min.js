YUI.add("gallery-slideshow",function(H){var F=function(){this._imageList=[];F.superclass.constructor.apply(this,arguments);},E="zIndex",A="SlideShow",D="slideshow",C=H.Lang.isNumber,B=H.ClassNameManager.getClassName,G={header:B(D,"header"),body:B(D,"body"),footer:B(D,"footer")};F.NAME=A;F.NS=A;F.HTML_PARSER={title:function(I){var J=I.one(G.header);return J?J.get("innerHTML"):"";},image_height:function(I){var J=I.one(G.body);return J?parseInt(J.getStyle("height"),10):null;},image_width:function(I){var J=I.one(G.body);return J?parseInt(J.getStyle("width"),10):null;},bodyNode:G.body,headerNode:G.header,footerNode:G.footer,images:function(I){I.all(G.body+" li").each(function(L,K){var J={};this._parseImage(L,J);J._node.setStyle(E,-1*K);this._imageList.push(J);},this);}};F.ATTRS={delay:{value:5000,validator:C},animation:{validator:H.Lang.isObject,setter:function(I){if(!(I instanceof H.Anim)){I=new H.Anim(I);}I.on("end",function(){this.endTransition();},this);return I;}},image_height:{validator:C,setter:function(I){if(this.get("rendered")){this.get("bodyNode").setStyle("height",I);}return I;}},image_width:{validator:C,setter:function(I){if(this.get("rendered")){this.get("bodyNode").setStyle("width",I);}return I;}},title:{value:"",validator:H.Lang.isString,setter:function(I){if(this.get("rendered")){this._setHeaderContents(I);}return I;}},images:{lazyAdd:false,validator:H.Lang.isArray,getter:function(){return this._imageList;},setter:function(I){this.clearImages();this.addImages(I);}},bodyNode:{writeOnce:true},headerNode:{writeOnce:true},footerNode:{writeOnce:true}};H.extend(F,H.Widget,{TEMPLATES:{header:"<div class='"+G.header+"'></div>",body:"<ul class='"+G.body+"'></ul>",footer:"<div class='"+G.footer+"'></div>"},_renderImages:function(){var J=1,I=this.get("bodyNode");I.all("li").each(function(K){var L=+K.getStyle(E)||2;J=J>L?L:J;});H.Array.each(this._imageList,function(M,L){if(!H.Lang.isValue(M._node)){J-=1;var K=this._createImage(M,J);if(L===0){this.currentImage=K;}}},this);},_createImage:function(J,K){var I=this.get("bodyNode"),M=H.Node.create("<li><img /></li>"),L=M.one("img");L.set("src",J.src);M.setStyle(E,K);J._node=M;I.insert(M);H.later(1000,this,function(O,N){O.setXY(N.getXY());},[M,I]);return M;},_setHeaderContents:function(J){var I=this.get("headerNode");if(!H.Lang.isValue(I)){I=this._addTemplate(this.TEMPLATES.header,0);this.set("headerNode",I);}I.set("innerHTML",J);},_addTemplate:function(J,I){var K=H.Node.create(J);this.get("contentBox").insert(K,I);return K;},_parseImage:function(J,I){I._node=J;I.src=J.one("img").get("src");},clearImages:function(){if(this.get("rendered")){this._destroyImagesUI();}this._imageList=[];},addImages:function(I){if(H.Lang.isArray(I)){H.Array.each(I,function(J){this._imageList.push(J);},this);}else{this._imageList.push(I);}if(this.get("rendered")){this._renderImages();}},_destroyImagesUI:function(){this.get("bodyNode").all("li").remove();H.Array.each(this._imageList,function(I){delete I._node;});},renderUI:function(){var K=this.get("bodyNode"),L=this.get("title"),I=this.get("image_height"),J=this.get("image_width");if(L.length>0){this._setHeaderContents(L);if(!H.Lang.isValue(K)){K=this._addTemplate(this.TEMPLATES.body);this.set("bodyNode",K);}}if(J){K.setStyle("width",J);}if(I){K.setStyle("height",I);}this._renderImages();},bindUI:function(){H.later(this.get("delay"),this,"beginTransition");},beginTransition:function(){var I=this.get("animation");if(I){I.set("node",this.currentImage);I.run();}else{this.endTransition();}},endTransition:function(){var I=this.get("bodyNode").all("li"),J=this.get("animation");I.each(function(L,M,O){var N=+L.getStyle(E),K=-1*O.size();if(N===-1){this.currentImage=L;}L.setStyle(E,N===0?K+1:N+1);},this);I.setStyles(J.get("from"));H.later(this.get("delay"),this,"beginTransition");}});H.SlideShow=F;},"gallery-2010.03.23-17-54",{requires:["widget","substitute"],optional:["anim"]});