YUI.add("gallery-widget-io",function(B){function A(C){A.superclass.constructor.apply(this,arguments);}A.NS="io";A.NAME="widgetIO";A.LOADING_CLASS_NAME=B.Widget.getClassName("loading");A.ATTRS={uri:{value:null},cfg:{value:null},formatter:{valueFn:function(){return this._defFormatter;}}};B.extend(A,B.Plugin.Base,{destructor:function(){if(this._activeIO){B.io.abort(this._activeIO);this._activeIO=null;}},refresh:function(){if(!this._activeIO){var D=this.get("uri"),C;if(D){C=this.get("cfg")||{};C.on=C.on||{};C.on.start=C.on.start||B.bind(this._defStartHandler,this);C.on.complete=C.on.complete||B.bind(this._defCompleteHandler,this);C.on.success=C.on.success||B.bind(this._defSuccessHandler,this);C.on.failure=C.on.failure||B.bind(this._defFailureHandler,this);C.method=C.method;B.io(D,C);}}},setContent:function(C){this.get("host").get("contentBox").setContent(C);},_defSuccessHandler:function(F,E){var C=E.responseText;var D=this.get("formatter");this._toggleLoadingClass(false);this.setContent(D(C));},_defFailureHandler:function(D,C){this._toggleLoadingClass(false);this.setContent("Failed to retrieve content");},_defStartHandler:function(D,C){this._activeIO=C;this.setContent("");this._toggleLoadingClass(true);},_defCompleteHandler:function(D,C){this._activeIO=null;this._toggleLoadingClass(false);},_defFormatter:function(C){return C;},_toggleLoadingClass:function(C){this.get("host").get("boundingBox").toggleClass(A.LOADING_CLASS_NAME,C);}});B.Plugin.WidgetIO=A;},"gallery-2010.03.29-18-07",{requires:["plugin","widget","io"]});