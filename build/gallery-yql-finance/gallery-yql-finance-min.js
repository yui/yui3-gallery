YUI.add("gallery-yql-finance",function(b){var a=function(){};a.prototype={makeArray:function(c,d,n){var h,f,e,m,o,l,g={};m=n.length;o=c.length;l=d.length;for(h=0;h<m;h+=o){for(f=0;f<o;f+=1){g[c[f]]=g[c[f]]||{};for(e=0;e<l;e+=1){g[c[f]][d[e]]=g[c[f]][d[e]]||[];g[c[f]][d[e]].push(n[h+f][d[e]]);}}}return g;},getQuotes:function(c,j,e){var l="select {COLUMNS} from yahoo.finance.quotes "+"where symbol in ({SYMBOLS})",g=["Change"],h,k="",f,d;e=e||{};e.columns=e.columns||g;d=c.length;for(f=0;f<d;f+=1){k+='"'+c[f]+'"';if(f!==(d-1)){k+=",";}}h=b.substitute(l,{COLUMNS:e.columns.join(),SYMBOLS:k});b.YQL(h,function(m){var i=null;if(!m.hasOwnProperty("error")&&m.query.hasOwnProperty("results")&&m.query.results){i=b.YQL.Finance.makeArray(c,e.columns,m.query.results.quote);}j(i);});},getHistoricalQuotes:function(c,g,s){var j='"http://ichart.finance.yahoo.com/table.csv?'+"s={SYMBOL}"+"&g={FREQUENCY}"+'"',q="select {COLUMNS} from csv where url in "+"({HIST_URLS})"+' and columns="Date,Open,High,Low,Close,Volume,AdjClose"'+' and Date >= "{START_DATE}" and Date <= "{END_DATE}"'+' | sort(field="{SORT_COLS}", descending="{SORT_DESC}")',m=["Date","Open","High","Low","Close","Volume","AdjClose"],k=3600,h,u,r="",o,l,e,v,t,d,f,p;e=new Date();v=e.getDate();t=e.getMonth();d=e.getFullYear();f=d+"-"+(t+1)+"-"+"01";p=d+"-"+(t+1)+"-"+v;s=s||{};s.columns=s.columns||m;s.frequency=s.frequency||"d";s.startDate=s.startDate||f;s.endDate=s.endDate||p;s.sortCols=s.sortCols||"Date";s.sortDesc=s.sortDesc||"false";s.maxAge=s.maxAge||k;l=c.length;for(o=0;o<l;o+=1){r+=b.substitute(j,{SYMBOL:encodeURIComponent(c[o]),FREQUENCY:s.frequency});if(o!==(l-1)){r+=",";}}h=b.substitute(q,{HIST_URLS:r,COLUMNS:s.columns.join(),START_DATE:s.startDate,END_DATE:s.endDate,SORT_COLS:s.sortCols,SORT_DESC:s.sortDesc});u={allowCache:true,on:{success:function(n){var i=null;if(!n.hasOwnProperty("error")&&n.query.hasOwnProperty("results")&&n.query.results){i=b.YQL.Finance.makeArray(c,s.columns,n.query.results.row);}g(i);}}};b.YQL(h,u,{"_maxage":s.maxAge});}};b.YQL.Finance=new a();},"gallery-2011.06.01-20-18",{requires:["substitute","yql"]});