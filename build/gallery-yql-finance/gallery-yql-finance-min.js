YUI.add("gallery-yql-finance",function(b){var a=function(c,e,d){if(!d){d={};}this._params=d;this._callback=e;};a.prototype={_callback:null,_params:null,makeArray:function(c,d,n){var h,f,e,m,o,l,g={};m=n.length;o=c.length;l=d.length;for(h=0;h<m;h+=o){for(f=0;f<o;f+=1){g[c[f]]=g[c[f]]||{};for(e=0;e<l;e+=1){g[c[f]][d[e]]=g[c[f]][d[e]]||[];g[c[f]][d[e]].push(n[h+f][d[e]]);}}}return g;},getQuotes:function(c,j,e){var l="select {COLUMNS} from yahoo.finance.quotes "+"where symbol in ({SYMBOLS})",g=["Change"],h,k="",f,d;e=e||{};e.columns=e.columns||g;d=c.length;for(f=0;f<d;f+=1){k+='"'+c[f]+'"';if(f!==(d-1)){k+=",";}}h=b.substitute(l,{COLUMNS:e.columns.join(),SYMBOLS:k});b.YQL(h,function(m){var i=null;if(!m.hasOwnProperty("error")&&m.query.hasOwnProperty("results")&&m.query.results){i=b.YQL.Finance.makeArray(c,e.columns,m.query.results.quote);}j(i);});},getHistoricalQuotes:function(e,s,j){var o='"http://ichart.finance.yahoo.com/table.csv?'+"s={SYMBOL}"+"&g={FREQUENCY}"+'"',t="select {COLUMNS} from csv where url in "+"({HIST_URLS})"+' and columns="Date,Open,High,Low,Close,Volume,AdjClose"'+' and Date >= "{START_DATE}" and Date <= "{END_DATE}"'+' | sort(field="{SORT_COLS}", descending="{SORT_DESC}")',q=["Date","Open","High","Low","Close","Volume","AdjClose"],r,p="",l,g,d,k,h,c,f,m;d=new Date();k=d.getDate();h=d.getMonth();c=d.getFullYear();f=c+"-"+(h+1)+"-"+"01";m=c+"-"+(h+1)+"-"+k;j=j||{};j.columns=j.columns||q;j.frequency=j.frequency||"d";j.startDate=j.startDate||f;j.endDate=j.endDate||m;j.sortCols=j.sortCols||"Date";j.sortDesc=j.sortDesc||"false";g=e.length;for(l=0;l<g;l+=1){p+=b.substitute(o,{SYMBOL:encodeURIComponent(e[l]),FREQUENCY:j.frequency});if(l!==(g-1)){p+=",";}}r=b.substitute(t,{HIST_URLS:p,COLUMNS:j.columns.join(),START_DATE:j.startDate,END_DATE:j.endDate,SORT_COLS:j.sortCols,SORT_DESC:j.sortDesc});b.YQL(r,function(n){var i=null;if(!n.hasOwnProperty("error")&&n.query.hasOwnProperty("results")&&n.query.results){i=b.YQL.Finance.makeArray(e,j.columns,n.query.results.row);}s(i);});}};b.YQL.Finance=new a();},"gallery-2010.11.17-21-32",{requires:["substitute","yql"]});