YUI.add("gallery-yui3treeview",function(a){var j=a.ClassNameManager.getClassName,h="treeview",r="tree",n="treeleaf",l="contentBox",u="boundingBox",i=true,o=a.Widget,e="value",g="content",b=a.Widget,t=a.Node,q="srcNode",k="id",m="destroyed",p="body",f=a.Handlebars,c=a.ClassNameManager.getClassName,d=a.Widget.getClassName,s={loading:j(h,"loading"),tree:j(r),treeLabel:j(h,"treelabel"),labelcontent:j(h,"label-content"),treeview:j(h),collapsed:j(r,"collapsed"),leaf:j(n)};a.WidgetHTMLRenderer=function(){};a.WidgetHTMLRenderer.prototype={renderHTML:function(y){var z,w,v,x;if(!this.get(m)){v={};w=[];this.renderUI(w,v);v.content=w.join("");z=[];this._renderUI(z,v);x=z.join("");if(y){if(t&&y instanceof t){y.append(x);}else{y.push(x);}}this._renderedUI=true;}return x;},_renderHTML:function(){var x=this.DEF_PARENT_NODE,v=this._parentNode||(x&&t.one(x)),w=v||[],y;this.renderHTML(w);if(!v){y=w.join();t.one(p).insert(y,0);}},_renderUI:function(v,w){this._renderBox(v,w);},_renderBox:function(v,w){w.id=this.get(k);this._renderBoxClassNames(w);if(this.CONTENT_TEMPLATE){w.contentBox=f.render(this.CONTENT_TEMPLATE,w);}else{w.contentBox=w.content;}v.push(f.render(this.BOUNDING_TEMPLATE,w));this._mapInstance(w.id);},_renderBoxClassNames:function(z){var y=this._getClasses(),v,x,w=this.getClassName(g),A=[];A[A.length]=d();for(x=y.length-3;x>=0;x--){v=y[x];A[A.length]=v.CSS_PREFIX||c(v.NAME.toLowerCase());}if(this.CONTENT_TEMPLATE===null){A.push(w);}else{z.contentClasses=w;}z.boundingClasses=A.join(" ");},syncRenderedBoxes:function(){var w=a.Node.one("#"+this.get(k)),v=(this.CONTENT_TEMPLATE===null)?w:w.one("."+this.getClassName(g));this._set("boundingBox",w);this._set("contentBox",v);},renderer:function(){if(!this._renderedUI){this._renderHTML();}this.syncRenderedBoxes();this._bindUI();this.bindUI();this._syncUI();this.syncUI();},BOUNDING_TEMPLATE:'<div id="{{id}}" class="{{boundingClasses}}">{{{contentBox}}}</div>',CONTENT_TEMPLATE:'<div class="{{contentClasses}}">{{{content}}}</div>',_setBox:function(w,v){v=t.one(v);if(v&&!v.get(k)){v.set(k,w||a.guid());}return v;}};a.Treeview=a.Base.create("treeview",o,[a.WidgetParent,a.WidgetChild,a.WidgetHTMLRenderer],{BOUNDING_TEMPLATE:'<ul id="{{id}}" class="{{boundingClasses}}">{{{contentBox}}}</ul>',CONTENT_TEMPLATE:null,TREEVIEWLABEL_TEMPLATE:"<a class='{{treelabelClassName}}' role='treeitem' href='javascript:void(0);'><span class={{labelcontentClassName}}>{{{label}}}</span></a>",EXPANDCONTROL_TEMPLATE:"<span class='{labelcontentClassName}'>{label}</span>",_populated:null,initializer:function(v){this.lazyLoad=v.lazyLoad;this.publish("toggleTreeState",{defaultFn:this._toggleTreeState});},renderUI:function(B){var y=this.get("label"),z,x=this.get("depth")>-1,w=a.Handlebars,v=this.getClassName("treelabel"),A=s.labelcontent;this.BOUNDING_TEMPLATE=x?'<li id="{{id}}" class="{{boundingClasses}}">{{{contentBox}}}</li>':'<ul id="{{id}}" class="{{boundingClasses}}">{{{contentBox}}}</ul>';this.CONTENT_TEMPLATE=x?'<ul id="{{id}}" class="{{contentClasses}}">{{{content}}}</ul>':null;z=w.render(this.TREEVIEWLABEL_TEMPLATE,{label:y,treelabelClassName:v,labelcontentClassName:A});B.push(z);},_renderBoxClassNames:function(z){var y=this._getClasses(),v,x,w=this.getClassName(g),A=[];A[A.length]=b.getClassName();for(x=y.length-3;x>=0;x--){v=y[x];A[A.length]=a.ClassNameManager.getClassName(v.NAME.toLowerCase())||this.getClassName(v.NAME.toLowerCase());}if(this.CONTENT_TEMPLATE===null){A.push(w);A.push(s.collapsed);}else{z.contentClasses=w+" "+s.collapsed;}z.boundingClasses=A.join(" ");},bindUI:function(){if(this.isRoot()){this.get("boundingBox").on("click",this._onViewEvents,this);}},_onViewEvents:function(z){var B=z.target,v=z.keyCode,x,y,w,A;x=B.get("className").split(" ");A=x.length;z.preventDefault();for(w=0;w<A;w++){y=x[w];switch(y){case s.labelcontent:this.fire("toggleTreeState",{actionNode:B});break;case s.treeLabel:if(v===39){this._expandTree(B);}else{if(v===37){this._collapseTree(B);}}break;}}},_renderChildren:function(v){if(this.lazyLoad){}else{this._onLazyRenderChildren(v);}},_onLazyRenderChildren:function(x,v){var w="";if(x.each){x.each(function(y){w+=y.renderHTML();});}if(v&&v.set){v.append(w);}},_toggleTreeState:function(x){var v=x.actionNode.ancestor(".yui3-treeview-content"),w=a.Widget.getByNode(x.actionNode);if(this.lazyLoad&&!v.hasClass("rendered")){this._onLazyRenderChildren(w,v);v.addClass("rendered");}v.toggleClass(s.collapsed);},_collapseTree:function(w){var v=w.ancestor("."+s.treeview);if(!v.hasClass(s.collapsed)){v.toggleClass(s.collapsed);}},_expandTree:function(w){var v=w.ancestor("."+s.treeview);if(v.hasClass(s.collapsed)){v.toggleClass(s.collapsed);}}},{ATTRS:{label:{value:"Default Parent Label"},defaultChildType:{value:"TreeLeaf"},boundingBox:{getter:function(v){if(this.get("initialized")&&!this.get("rendered")&&!this._handling&&this._populated){this._handling=i;this.render();v=this._state.get(u,e);}return v;}},contentBox:{getter:function(v){if(this.get("initialized")&&!this.get("rendered")&&!this._handling&&this._populated){this._handling=i;this.render();v=this._state.get(l,e);}return v;}}}});a.TreeLeaf=a.Base.create("treeleaf",o,[a.WidgetChild,a.WidgetHTMLRenderer],{BOUNDING_TEMPLATE:'<li id="{{id}}" class="{{boundingClasses}}">{{{contentBox}}}</li>',CONTENT_TEMPLATE:null,renderUI:function(v){v.push(this.get("label"));}},{ATTRS:{label:{value:"Default Child Label"},boundingBox:{getter:function(v){if(this.get("initialized")&&!this.get("rendered")&&!this._handling&&this.get("parent")._populated){this._handling=i;this.render();v=this._state.get(u,e);}return v;}},contentBox:{getter:function(v){if(this.get("initialized")&&!this.get("rendered")&&!this._handling&&this.get("parent")._populated){this._handling=i;this.render();v=this._state.get(l,e);}return v;}}}});},"@VERSION@",{requires:["base","widget","widget-parent","widget-child","node-focusmanager","handlebars"]});