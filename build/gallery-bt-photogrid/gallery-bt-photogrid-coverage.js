if (typeof __coverage__ === 'undefined') { __coverage__ = {}; }
if (!__coverage__['build/gallery-bt-photogrid/gallery-bt-photogrid.js']) {
   __coverage__['build/gallery-bt-photogrid/gallery-bt-photogrid.js'] = {"path":"build/gallery-bt-photogrid/gallery-bt-photogrid.js","s":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0},"fnMap":{"1":{"name":"(anonymous_1)","line":1,"loc":{"start":{"line":1,"column":32},"end":{"line":1,"column":51}}},"2":{"name":"(anonymous_2)","line":44,"loc":{"start":{"line":44,"column":17},"end":{"line":44,"column":29}}},"3":{"name":"(anonymous_3)","line":66,"loc":{"start":{"line":66,"column":16},"end":{"line":66,"column":28}}},"4":{"name":"(anonymous_4)","line":71,"loc":{"start":{"line":71,"column":14},"end":{"line":71,"column":26}}},"5":{"name":"(anonymous_5)","line":81,"loc":{"start":{"line":81,"column":12},"end":{"line":81,"column":28}}},"6":{"name":"(anonymous_6)","line":95,"loc":{"start":{"line":95,"column":20},"end":{"line":95,"column":44}}},"7":{"name":"(anonymous_7)","line":113,"loc":{"start":{"line":113,"column":43},"end":{"line":113,"column":56}}},"8":{"name":"(anonymous_8)","line":139,"loc":{"start":{"line":139,"column":40},"end":{"line":139,"column":53}}},"9":{"name":"(anonymous_9)","line":155,"loc":{"start":{"line":155,"column":41},"end":{"line":155,"column":53}}},"10":{"name":"(anonymous_10)","line":182,"loc":{"start":{"line":182,"column":16},"end":{"line":182,"column":28}}},"11":{"name":"(anonymous_11)","line":186,"loc":{"start":{"line":186,"column":49},"end":{"line":186,"column":62}}},"12":{"name":"(anonymous_12)","line":204,"loc":{"start":{"line":204,"column":18},"end":{"line":204,"column":35}}},"13":{"name":"(anonymous_13)","line":242,"loc":{"start":{"line":242,"column":20},"end":{"line":242,"column":39}}},"14":{"name":"(anonymous_14)","line":271,"loc":{"start":{"line":271,"column":28},"end":{"line":271,"column":44}}},"15":{"name":"(anonymous_15)","line":320,"loc":{"start":{"line":320,"column":23},"end":{"line":320,"column":36}}},"16":{"name":"(anonymous_16)","line":323,"loc":{"start":{"line":323,"column":20},"end":{"line":323,"column":33}}},"17":{"name":"(anonymous_17)","line":337,"loc":{"start":{"line":337,"column":23},"end":{"line":337,"column":36}}},"18":{"name":"(anonymous_18)","line":376,"loc":{"start":{"line":376,"column":20},"end":{"line":376,"column":39}}},"19":{"name":"(anonymous_19)","line":379,"loc":{"start":{"line":379,"column":21},"end":{"line":379,"column":40}}},"20":{"name":"(anonymous_20)","line":382,"loc":{"start":{"line":382,"column":18},"end":{"line":382,"column":37}}},"21":{"name":"(anonymous_21)","line":385,"loc":{"start":{"line":385,"column":20},"end":{"line":385,"column":39}}},"22":{"name":"(anonymous_22)","line":388,"loc":{"start":{"line":388,"column":19},"end":{"line":388,"column":38}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":397,"column":57}},"2":{"start":{"line":10,"column":0},"end":{"line":392,"column":3}},"3":{"start":{"line":45,"column":8},"end":{"line":45,"column":30}},"4":{"start":{"line":47,"column":8},"end":{"line":47,"column":58}},"5":{"start":{"line":54,"column":8},"end":{"line":54,"column":38}},"6":{"start":{"line":63,"column":8},"end":{"line":63,"column":80}},"7":{"start":{"line":67,"column":8},"end":{"line":67,"column":40}},"8":{"start":{"line":68,"column":8},"end":{"line":68,"column":38}},"9":{"start":{"line":72,"column":8},"end":{"line":72,"column":34}},"10":{"start":{"line":82,"column":8},"end":{"line":82,"column":36}},"11":{"start":{"line":84,"column":8},"end":{"line":84,"column":115}},"12":{"start":{"line":85,"column":8},"end":{"line":85,"column":32}},"13":{"start":{"line":96,"column":8},"end":{"line":100,"column":47}},"14":{"start":{"line":102,"column":8},"end":{"line":111,"column":9}},"15":{"start":{"line":110,"column":12},"end":{"line":110,"column":33}},"16":{"start":{"line":113,"column":8},"end":{"line":164,"column":17}},"17":{"start":{"line":114,"column":12},"end":{"line":122,"column":27}},"18":{"start":{"line":124,"column":12},"end":{"line":126,"column":13}},"19":{"start":{"line":125,"column":16},"end":{"line":125,"column":23}},"20":{"start":{"line":128,"column":12},"end":{"line":128,"column":75}},"21":{"start":{"line":130,"column":12},"end":{"line":134,"column":13}},"22":{"start":{"line":131,"column":16},"end":{"line":131,"column":37}},"23":{"start":{"line":133,"column":16},"end":{"line":133,"column":40}},"24":{"start":{"line":136,"column":12},"end":{"line":159,"column":13}},"25":{"start":{"line":137,"column":16},"end":{"line":137,"column":38}},"26":{"start":{"line":139,"column":16},"end":{"line":153,"column":26}},"27":{"start":{"line":140,"column":20},"end":{"line":140,"column":37}},"28":{"start":{"line":142,"column":20},"end":{"line":150,"column":21}},"29":{"start":{"line":143,"column":24},"end":{"line":143,"column":51}},"30":{"start":{"line":144,"column":24},"end":{"line":144,"column":54}},"31":{"start":{"line":145,"column":24},"end":{"line":145,"column":57}},"32":{"start":{"line":146,"column":24},"end":{"line":146,"column":55}},"33":{"start":{"line":148,"column":24},"end":{"line":148,"column":54}},"34":{"start":{"line":149,"column":24},"end":{"line":149,"column":52}},"35":{"start":{"line":152,"column":20},"end":{"line":152,"column":42}},"36":{"start":{"line":155,"column":16},"end":{"line":158,"column":26}},"37":{"start":{"line":156,"column":20},"end":{"line":156,"column":38}},"38":{"start":{"line":157,"column":20},"end":{"line":157,"column":42}},"39":{"start":{"line":162,"column":12},"end":{"line":162,"column":26}},"40":{"start":{"line":163,"column":12},"end":{"line":163,"column":31}},"41":{"start":{"line":173,"column":8},"end":{"line":173,"column":33}},"42":{"start":{"line":183,"column":8},"end":{"line":184,"column":17}},"43":{"start":{"line":186,"column":8},"end":{"line":193,"column":11}},"44":{"start":{"line":187,"column":12},"end":{"line":187,"column":42}},"45":{"start":{"line":189,"column":12},"end":{"line":192,"column":13}},"46":{"start":{"line":190,"column":16},"end":{"line":190,"column":25}},"47":{"start":{"line":191,"column":16},"end":{"line":191,"column":25}},"48":{"start":{"line":195,"column":8},"end":{"line":195,"column":20}},"49":{"start":{"line":205,"column":8},"end":{"line":206,"column":36}},"50":{"start":{"line":208,"column":8},"end":{"line":210,"column":9}},"51":{"start":{"line":209,"column":12},"end":{"line":209,"column":19}},"52":{"start":{"line":212,"column":8},"end":{"line":212,"column":34}},"53":{"start":{"line":214,"column":8},"end":{"line":219,"column":9}},"54":{"start":{"line":215,"column":12},"end":{"line":215,"column":39}},"55":{"start":{"line":216,"column":12},"end":{"line":216,"column":30}},"56":{"start":{"line":217,"column":12},"end":{"line":217,"column":39}},"57":{"start":{"line":218,"column":12},"end":{"line":218,"column":19}},"58":{"start":{"line":221,"column":8},"end":{"line":221,"column":49}},"59":{"start":{"line":223,"column":8},"end":{"line":230,"column":9}},"60":{"start":{"line":224,"column":12},"end":{"line":226,"column":13}},"61":{"start":{"line":225,"column":16},"end":{"line":225,"column":69}},"62":{"start":{"line":227,"column":12},"end":{"line":227,"column":49}},"63":{"start":{"line":228,"column":12},"end":{"line":228,"column":35}},"64":{"start":{"line":229,"column":12},"end":{"line":229,"column":22}},"65":{"start":{"line":232,"column":8},"end":{"line":232,"column":48}},"66":{"start":{"line":243,"column":8},"end":{"line":251,"column":14}},"67":{"start":{"line":253,"column":8},"end":{"line":269,"column":9}},"68":{"start":{"line":255,"column":12},"end":{"line":255,"column":51}},"69":{"start":{"line":256,"column":12},"end":{"line":256,"column":35}},"70":{"start":{"line":264,"column":12},"end":{"line":264,"column":33}},"71":{"start":{"line":266,"column":12},"end":{"line":268,"column":13}},"72":{"start":{"line":267,"column":16},"end":{"line":267,"column":31}},"73":{"start":{"line":271,"column":8},"end":{"line":273,"column":11}},"74":{"start":{"line":272,"column":12},"end":{"line":272,"column":44}},"75":{"start":{"line":275,"column":8},"end":{"line":275,"column":26}},"76":{"start":{"line":277,"column":8},"end":{"line":287,"column":9}},"77":{"start":{"line":285,"column":12},"end":{"line":285,"column":34}},"78":{"start":{"line":286,"column":12},"end":{"line":286,"column":36}},"79":{"start":{"line":321,"column":16},"end":{"line":321,"column":35}},"80":{"start":{"line":324,"column":16},"end":{"line":324,"column":29}},"81":{"start":{"line":338,"column":16},"end":{"line":338,"column":51}},"82":{"start":{"line":377,"column":12},"end":{"line":377,"column":50}},"83":{"start":{"line":380,"column":12},"end":{"line":380,"column":51}},"84":{"start":{"line":383,"column":12},"end":{"line":383,"column":48}},"85":{"start":{"line":386,"column":12},"end":{"line":386,"column":50}},"86":{"start":{"line":389,"column":12},"end":{"line":389,"column":49}},"87":{"start":{"line":394,"column":0},"end":{"line":394,"column":44}}},"branchMap":{"1":{"line":84,"type":"cond-expr","locations":[{"start":{"line":84,"column":63},"end":{"line":84,"column":103}},{"start":{"line":84,"column":106},"end":{"line":84,"column":107}}]},"2":{"line":96,"type":"cond-expr","locations":[{"start":{"line":96,"column":30},"end":{"line":96,"column":45}},{"start":{"line":96,"column":48},"end":{"line":96,"column":50}}]},"3":{"line":99,"type":"binary-expr","locations":[{"start":{"line":99,"column":18},"end":{"line":99,"column":36}},{"start":{"line":99,"column":40},"end":{"line":99,"column":112}}]},"4":{"line":100,"type":"binary-expr","locations":[{"start":{"line":100,"column":16},"end":{"line":100,"column":20}},{"start":{"line":100,"column":24},"end":{"line":100,"column":46}}]},"5":{"line":102,"type":"if","locations":[{"start":{"line":102,"column":8},"end":{"line":102,"column":8}},{"start":{"line":102,"column":8},"end":{"line":102,"column":8}}]},"6":{"line":124,"type":"if","locations":[{"start":{"line":124,"column":12},"end":{"line":124,"column":12}},{"start":{"line":124,"column":12},"end":{"line":124,"column":12}}]},"7":{"line":130,"type":"if","locations":[{"start":{"line":130,"column":12},"end":{"line":130,"column":12}},{"start":{"line":130,"column":12},"end":{"line":130,"column":12}}]},"8":{"line":136,"type":"if","locations":[{"start":{"line":136,"column":12},"end":{"line":136,"column":12}},{"start":{"line":136,"column":12},"end":{"line":136,"column":12}}]},"9":{"line":136,"type":"binary-expr","locations":[{"start":{"line":136,"column":16},"end":{"line":136,"column":29}},{"start":{"line":136,"column":33},"end":{"line":136,"column":45}}]},"10":{"line":142,"type":"if","locations":[{"start":{"line":142,"column":20},"end":{"line":142,"column":20}},{"start":{"line":142,"column":20},"end":{"line":142,"column":20}}]},"11":{"line":189,"type":"if","locations":[{"start":{"line":189,"column":12},"end":{"line":189,"column":12}},{"start":{"line":189,"column":12},"end":{"line":189,"column":12}}]},"12":{"line":208,"type":"if","locations":[{"start":{"line":208,"column":8},"end":{"line":208,"column":8}},{"start":{"line":208,"column":8},"end":{"line":208,"column":8}}]},"13":{"line":208,"type":"binary-expr","locations":[{"start":{"line":208,"column":12},"end":{"line":208,"column":17}},{"start":{"line":208,"column":21},"end":{"line":208,"column":39}}]},"14":{"line":214,"type":"if","locations":[{"start":{"line":214,"column":8},"end":{"line":214,"column":8}},{"start":{"line":214,"column":8},"end":{"line":214,"column":8}}]},"15":{"line":223,"type":"if","locations":[{"start":{"line":223,"column":8},"end":{"line":223,"column":8}},{"start":{"line":223,"column":8},"end":{"line":223,"column":8}}]},"16":{"line":223,"type":"binary-expr","locations":[{"start":{"line":223,"column":12},"end":{"line":223,"column":21}},{"start":{"line":223,"column":25},"end":{"line":223,"column":34}}]},"17":{"line":224,"type":"if","locations":[{"start":{"line":224,"column":12},"end":{"line":224,"column":12}},{"start":{"line":224,"column":12},"end":{"line":224,"column":12}}]},"18":{"line":250,"type":"binary-expr","locations":[{"start":{"line":250,"column":21},"end":{"line":250,"column":28}},{"start":{"line":250,"column":32},"end":{"line":250,"column":56}}]},"19":{"line":253,"type":"if","locations":[{"start":{"line":253,"column":8},"end":{"line":253,"column":8}},{"start":{"line":253,"column":8},"end":{"line":253,"column":8}}]},"20":{"line":272,"type":"cond-expr","locations":[{"start":{"line":272,"column":37},"end":{"line":272,"column":38}},{"start":{"line":272,"column":41},"end":{"line":272,"column":42}}]},"21":{"line":277,"type":"if","locations":[{"start":{"line":277,"column":8},"end":{"line":277,"column":8}},{"start":{"line":277,"column":8},"end":{"line":277,"column":8}}]},"22":{"line":338,"type":"cond-expr","locations":[{"start":{"line":338,"column":38},"end":{"line":338,"column":42}},{"start":{"line":338,"column":45},"end":{"line":338,"column":50}}]}},"code":["(function () { YUI.add('gallery-bt-photogrid', function (Y, NAME) {","","/**"," * Provide PhotoGrid class to rendering a lot of photo in many kinds of layout"," *"," * @module gallery-bt-photogrid"," * @static"," */","","var COLUMN_CHANGE = 'columnWidthChange',","    RENDER_FINISHED = 'renderFinished',","","    RENDER_INTERVAL = 100,","","    PREFIX = 'bpg_',","","    CLASSES = {","        COLUMN: PREFIX + 'column',","        MODULE: PREFIX + 'module',","        HIDDEN: PREFIX + 'hidden'","    },","","    HTMLS = {","        COLUMN: '<div class=\"' + CLASSES.COLUMN + '\"></div>'","    },","","    GRID_CFGS = {","        vertical: 1,","        horizontal: 1","    },","","/**"," * PhotoGrid is a Widget which can help you to render a lot of photo in different patterns."," *"," * @class PhotoGrid"," * @constructor"," * @namespace Bottle"," * @extends Widget"," * @uses Bottle.SyncScroll"," * @param [config] {Object} Object literal with initial attribute values",""," */","PhotoGrid = Y.Base.create('btphotogrid', Y.Widget, [Y.Bottle.SyncScroll], {","    initializer: function () {","        this.parseImageData();","","        this.set('syncScrollMethod', this._updateColumns);","","        /**","         * Fired when all grid rendered","         *","         * @event renderFinished","         */","        this.publish(RENDER_FINISHED);","","        /**","         * internal eventhandlers, keep for destructor","         *","         * @property _bpgEventHandlers","         * @type EventHandle","         * @private","         */","        this._bpgEventHandlers = this.after(COLUMN_CHANGE, this._updateColumns);","    },","","    destructor: function () {","        this._bpgEventHandlers.detach();","        delete this._bpgEventHandlers;","    },","","    renderUI: function () {","        this._updateColumns(true);","    },","","    /**","     * append new html into photogrid. the html will be parsed into photogrid then render","     *","     * @method append","     * @param html {String} new html string","     */","    append: function (html) {","        var N = Y.Node.create(html);","","        this.parseImageData((N.getDOMNode().nodeType === 11) ? Y.Node.create('<div>' + html + '</div>') : N, true);","        this.renderImages(true);","    },","","    /**","     * parse image data from a node","     *","     * @method parseImageData","     * @param [node] {Node} node to parse data. If omitted, Widget ContentBox will be used.","     * @param [append=false] {Boolean} <b>true</b> to append data. <b>false</b> or ommited to clean old image data.","     */","    parseImageData: function (node, append) {","        var images = append ? this._bpgImages : [],","            that = this,","            css = this.get('photoNode'),","            hid = Y.one('.btHidden') || Y.one('body').appendChild(Y.Node.create('<div class=\"btHidden\"></div>')),","            P = node || this.get('contentBox');","","        if (!append) {","            /**","             * internal unloaded image count","             *","             * @property _bpgPending","             * @type Number","             * @protected","             */","            this._bpgPending = 0;","        }","","        P.all(this.get('moduleNode')).each(function (O) {","            var image = {","                icon: O.getData('icon'),","                img: O.getData('img'),","                width: O.getData('width'),","                height: O.getData('height'),","                module: O.addClass(CLASSES.MODULE),","                error: false","            },","            P = O.one(css);","","            if (!image.icon) {","                return;","            }","","            image.load = Y.Node.create('<img src=\"' + image.icon + '\" />');","","            if (P) {","                P.append(image.load);","            } else {","                O.insert(image.load, 0);","            }","","            if (!image.height || !image.width) {","                this._bpgPending += 1;","","                image.load.once('load', function (E) {","                    var O = E.target;","","                    if (Y.UA.ie) {","                        image.loadie = new Image();","                        image.loadie.src = image.icon;","                        this.height = this.loadie.height;","                        this.width = this.loadie.width;","                    } else {","                        this.height = O.get('height');","                        this.width = O.get('width');","                    }","","                    that._bpgPending -= 1;","                }, image);","","                image.load.once('error', function () {","                    this.error = true;","                    that._bpgPending -= 1;","                }, image);","            }","","            // Append to document to start image load, only required by IE9+","            hid.append(O);","            images.push(image);","        }, this);","","        /**","         * internal image meta data","         *","         * @property _bpgImages","         * @type Array","         * @protected","         */","        this._bpgImages = images;","    },","","    /**","     * Get the column with minimal height","     *","     * @method _minColumn","     * @protected","     */","    _minColumn: function () {","        var minI = 9999,","            minO;","","        this.get('contentBox').all('> div').each(function (O) {","            var H = O.get('offsetHeight');","","            if (H < minI) {","                minI = H;","                minO = O;","            }","        });","","        return minO;","    },","","    /**","     * rendering images","     *","     * @method renderImages","     * @param [start] {Node} node to parse data. If omitted, Widget ContentBox will be used.","     */","    renderImages: function (start) {","        var img,","            delay = RENDER_INTERVAL;","","        if (start && this._bpgRendering) {","            return;","        }","","        this._bpgRendering = true;","","        if (this._bpgImages.length <= this._bpgRendered) {","            this._bpgRendering = false;","            this.syncScroll();","            this.fire(RENDER_FINISHED);","            return;","        }","","        img = this._bpgImages[this._bpgRendered];","","        if (img.width || img.error) {","            if (img.error) {","                img.load.setAttribute('src', this.get('errorImage'));","            }","            this._minColumn().append(img.module);","            this._bpgRendered += 1;","            delay = 1;","        }","","        Y.later(delay, this, this.renderImages);","    },","","    /**","     * update Widget width with parent node","     *","     * @method _updateColumns","     * @param [refresh] {Boolean} <b>true</b> to clean contencBox","     * @protected","     */","    _updateColumns: function (refresh) {","        var P = this.get('contentBox'),","            W = P.get('offsetWidth'),","            w = this.get('columnWidth'),","            N = Math.round(W / w),","            a = Math.floor(W / N),","            f = W - a * (N - 1),","            HTML = HTMLS.COLUMN,","            render = refresh || (this._bpgColumns !== N),","            I;","","        if (render) {","            // clean content box","            P.all(this.get('moduleNode')).remove();","            P.set('innerHTML', '');","","            /**","             * Keep current computed column number","             *","             * @property _bpgColumns","             * @protected","             */","            this._bpgColumns = N;","","            for (I = 0;I < N;I++) {","                P.append(HTML);","            }","        }","","        P.all('> div').each(function (O, I) {","            O.set('offsetWidth', I ? a : f);","        });","","        this.syncScroll();","","        if (render) {","            /**","             * internal rendered image","             *","             * @property _bpgRendered","             * @type Number","             * @protected","             */","            this._bpgRendered = 0;","            this.renderImages(true);","        }","    }","}, {","    /**","     * Static property used to define the default attribute configuration.","     *","     * @property ATTRS","     * @type Object","     * @static","     * @protected","     */","    ATTRS: {","        /**","         * Default error Image.","         *","         * @attribute errorImage","         * @type String","         * @default 'about:blank'","         */","        errorImage: {","            value: 'http://l.yimg.com/f/i/tw/map/i/cpx.gif',","            validator: Y.Lang.isString","        },","","        /**","         * Default column width. Column number will be decided by Math.round(parentWidth / columnWidth), and then all these columns will be fitted equally.","         *","         * @attribute columnWidth","         * @type Number","         * @default 200","         */","        columnWidth: {","            value: 200,","            validator: function (V) {","                return (V * 1 > 0);","            },","            setter: function (V) {","                return V * 1;","            }","        },","","        /**","         * Rendering mode of PhotoGrid, should be one of: 'vertical', 'horizontal'","         *","         * @attribute gridType","         * @type String","         * @default vertical","         */","        gridType: {","            value: 'vertical',","            validator: function (V) {","                return GRID_CFGS[V] ? true : false;","            }","        },","","        /**","         * Default module child nodes css selector.","         *","         * @attribute moduleNode","         * @type String","         * @default '> div'","         */","        moduleNode: {","            value: '> div',","            validator: Y.Lang.isString","        },","","        /**","         * Default image child node css selector. If can not find the Node, a new image node will be inserted under the module node.","         *","         * @attribute photoNode","         * @type String","         * @default '.img'","         */","        photoNode: {","            value: '.img',","            validator: Y.Lang.isString","        }","    },","","    /**","     * Static property used to define the default HTML parsing rules","     *","     * @property HTML_PARSER","     * @static","     * @protected","     * @type Object","     */","    HTML_PARSER: {","        errorImage: function (srcNode) {","            return srcNode.getData('error-image');","        },","        columnWidth: function (srcNode) {","            return srcNode.getData('column-width');","        },","        gridType: function (srcNode) {","            return srcNode.getData('grid-type');","        },","        moduleNode: function (srcNode) {","            return srcNode.getData('module-node');","        },","        photoNode: function (srcNode) {","            return srcNode.getData('photo-node');","        }","    }","});","","Y.namespace('Bottle').PhotoGrid = PhotoGrid;","","","}, 'gallery-2012.12.19-21-23', {\"requires\": [\"gallery-bt-syncscroll\"]});","","}());"]};
}
var __cov_d6CtHqaByxszP9BkYGf69g = __coverage__['build/gallery-bt-photogrid/gallery-bt-photogrid.js'];
__cov_d6CtHqaByxszP9BkYGf69g.s['1']++;YUI.add('gallery-bt-photogrid',function(Y,NAME){__cov_d6CtHqaByxszP9BkYGf69g.f['1']++;__cov_d6CtHqaByxszP9BkYGf69g.s['2']++;var COLUMN_CHANGE='columnWidthChange',RENDER_FINISHED='renderFinished',RENDER_INTERVAL=100,PREFIX='bpg_',CLASSES={COLUMN:PREFIX+'column',MODULE:PREFIX+'module',HIDDEN:PREFIX+'hidden'},HTMLS={COLUMN:'<div class="'+CLASSES.COLUMN+'"></div>'},GRID_CFGS={vertical:1,horizontal:1},PhotoGrid=Y.Base.create('btphotogrid',Y.Widget,[Y.Bottle.SyncScroll],{initializer:function(){__cov_d6CtHqaByxszP9BkYGf69g.f['2']++;__cov_d6CtHqaByxszP9BkYGf69g.s['3']++;this.parseImageData();__cov_d6CtHqaByxszP9BkYGf69g.s['4']++;this.set('syncScrollMethod',this._updateColumns);__cov_d6CtHqaByxszP9BkYGf69g.s['5']++;this.publish(RENDER_FINISHED);__cov_d6CtHqaByxszP9BkYGf69g.s['6']++;this._bpgEventHandlers=this.after(COLUMN_CHANGE,this._updateColumns);},destructor:function(){__cov_d6CtHqaByxszP9BkYGf69g.f['3']++;__cov_d6CtHqaByxszP9BkYGf69g.s['7']++;this._bpgEventHandlers.detach();__cov_d6CtHqaByxszP9BkYGf69g.s['8']++;delete this._bpgEventHandlers;},renderUI:function(){__cov_d6CtHqaByxszP9BkYGf69g.f['4']++;__cov_d6CtHqaByxszP9BkYGf69g.s['9']++;this._updateColumns(true);},append:function(html){__cov_d6CtHqaByxszP9BkYGf69g.f['5']++;__cov_d6CtHqaByxszP9BkYGf69g.s['10']++;var N=Y.Node.create(html);__cov_d6CtHqaByxszP9BkYGf69g.s['11']++;this.parseImageData(N.getDOMNode().nodeType===11?(__cov_d6CtHqaByxszP9BkYGf69g.b['1'][0]++,Y.Node.create('<div>'+html+'</div>')):(__cov_d6CtHqaByxszP9BkYGf69g.b['1'][1]++,N),true);__cov_d6CtHqaByxszP9BkYGf69g.s['12']++;this.renderImages(true);},parseImageData:function(node,append){__cov_d6CtHqaByxszP9BkYGf69g.f['6']++;__cov_d6CtHqaByxszP9BkYGf69g.s['13']++;var images=append?(__cov_d6CtHqaByxszP9BkYGf69g.b['2'][0]++,this._bpgImages):(__cov_d6CtHqaByxszP9BkYGf69g.b['2'][1]++,[]),that=this,css=this.get('photoNode'),hid=(__cov_d6CtHqaByxszP9BkYGf69g.b['3'][0]++,Y.one('.btHidden'))||(__cov_d6CtHqaByxszP9BkYGf69g.b['3'][1]++,Y.one('body').appendChild(Y.Node.create('<div class="btHidden"></div>'))),P=(__cov_d6CtHqaByxszP9BkYGf69g.b['4'][0]++,node)||(__cov_d6CtHqaByxszP9BkYGf69g.b['4'][1]++,this.get('contentBox'));__cov_d6CtHqaByxszP9BkYGf69g.s['14']++;if(!append){__cov_d6CtHqaByxszP9BkYGf69g.b['5'][0]++;__cov_d6CtHqaByxszP9BkYGf69g.s['15']++;this._bpgPending=0;}else{__cov_d6CtHqaByxszP9BkYGf69g.b['5'][1]++;}__cov_d6CtHqaByxszP9BkYGf69g.s['16']++;P.all(this.get('moduleNode')).each(function(O){__cov_d6CtHqaByxszP9BkYGf69g.f['7']++;__cov_d6CtHqaByxszP9BkYGf69g.s['17']++;var image={icon:O.getData('icon'),img:O.getData('img'),width:O.getData('width'),height:O.getData('height'),module:O.addClass(CLASSES.MODULE),error:false},P=O.one(css);__cov_d6CtHqaByxszP9BkYGf69g.s['18']++;if(!image.icon){__cov_d6CtHqaByxszP9BkYGf69g.b['6'][0]++;__cov_d6CtHqaByxszP9BkYGf69g.s['19']++;return;}else{__cov_d6CtHqaByxszP9BkYGf69g.b['6'][1]++;}__cov_d6CtHqaByxszP9BkYGf69g.s['20']++;image.load=Y.Node.create('<img src="'+image.icon+'" />');__cov_d6CtHqaByxszP9BkYGf69g.s['21']++;if(P){__cov_d6CtHqaByxszP9BkYGf69g.b['7'][0]++;__cov_d6CtHqaByxszP9BkYGf69g.s['22']++;P.append(image.load);}else{__cov_d6CtHqaByxszP9BkYGf69g.b['7'][1]++;__cov_d6CtHqaByxszP9BkYGf69g.s['23']++;O.insert(image.load,0);}__cov_d6CtHqaByxszP9BkYGf69g.s['24']++;if((__cov_d6CtHqaByxszP9BkYGf69g.b['9'][0]++,!image.height)||(__cov_d6CtHqaByxszP9BkYGf69g.b['9'][1]++,!image.width)){__cov_d6CtHqaByxszP9BkYGf69g.b['8'][0]++;__cov_d6CtHqaByxszP9BkYGf69g.s['25']++;this._bpgPending+=1;__cov_d6CtHqaByxszP9BkYGf69g.s['26']++;image.load.once('load',function(E){__cov_d6CtHqaByxszP9BkYGf69g.f['8']++;__cov_d6CtHqaByxszP9BkYGf69g.s['27']++;var O=E.target;__cov_d6CtHqaByxszP9BkYGf69g.s['28']++;if(Y.UA.ie){__cov_d6CtHqaByxszP9BkYGf69g.b['10'][0]++;__cov_d6CtHqaByxszP9BkYGf69g.s['29']++;image.loadie=new Image();__cov_d6CtHqaByxszP9BkYGf69g.s['30']++;image.loadie.src=image.icon;__cov_d6CtHqaByxszP9BkYGf69g.s['31']++;this.height=this.loadie.height;__cov_d6CtHqaByxszP9BkYGf69g.s['32']++;this.width=this.loadie.width;}else{__cov_d6CtHqaByxszP9BkYGf69g.b['10'][1]++;__cov_d6CtHqaByxszP9BkYGf69g.s['33']++;this.height=O.get('height');__cov_d6CtHqaByxszP9BkYGf69g.s['34']++;this.width=O.get('width');}__cov_d6CtHqaByxszP9BkYGf69g.s['35']++;that._bpgPending-=1;},image);__cov_d6CtHqaByxszP9BkYGf69g.s['36']++;image.load.once('error',function(){__cov_d6CtHqaByxszP9BkYGf69g.f['9']++;__cov_d6CtHqaByxszP9BkYGf69g.s['37']++;this.error=true;__cov_d6CtHqaByxszP9BkYGf69g.s['38']++;that._bpgPending-=1;},image);}else{__cov_d6CtHqaByxszP9BkYGf69g.b['8'][1]++;}__cov_d6CtHqaByxszP9BkYGf69g.s['39']++;hid.append(O);__cov_d6CtHqaByxszP9BkYGf69g.s['40']++;images.push(image);},this);__cov_d6CtHqaByxszP9BkYGf69g.s['41']++;this._bpgImages=images;},_minColumn:function(){__cov_d6CtHqaByxszP9BkYGf69g.f['10']++;__cov_d6CtHqaByxszP9BkYGf69g.s['42']++;var minI=9999,minO;__cov_d6CtHqaByxszP9BkYGf69g.s['43']++;this.get('contentBox').all('> div').each(function(O){__cov_d6CtHqaByxszP9BkYGf69g.f['11']++;__cov_d6CtHqaByxszP9BkYGf69g.s['44']++;var H=O.get('offsetHeight');__cov_d6CtHqaByxszP9BkYGf69g.s['45']++;if(H<minI){__cov_d6CtHqaByxszP9BkYGf69g.b['11'][0]++;__cov_d6CtHqaByxszP9BkYGf69g.s['46']++;minI=H;__cov_d6CtHqaByxszP9BkYGf69g.s['47']++;minO=O;}else{__cov_d6CtHqaByxszP9BkYGf69g.b['11'][1]++;}});__cov_d6CtHqaByxszP9BkYGf69g.s['48']++;return minO;},renderImages:function(start){__cov_d6CtHqaByxszP9BkYGf69g.f['12']++;__cov_d6CtHqaByxszP9BkYGf69g.s['49']++;var img,delay=RENDER_INTERVAL;__cov_d6CtHqaByxszP9BkYGf69g.s['50']++;if((__cov_d6CtHqaByxszP9BkYGf69g.b['13'][0]++,start)&&(__cov_d6CtHqaByxszP9BkYGf69g.b['13'][1]++,this._bpgRendering)){__cov_d6CtHqaByxszP9BkYGf69g.b['12'][0]++;__cov_d6CtHqaByxszP9BkYGf69g.s['51']++;return;}else{__cov_d6CtHqaByxszP9BkYGf69g.b['12'][1]++;}__cov_d6CtHqaByxszP9BkYGf69g.s['52']++;this._bpgRendering=true;__cov_d6CtHqaByxszP9BkYGf69g.s['53']++;if(this._bpgImages.length<=this._bpgRendered){__cov_d6CtHqaByxszP9BkYGf69g.b['14'][0]++;__cov_d6CtHqaByxszP9BkYGf69g.s['54']++;this._bpgRendering=false;__cov_d6CtHqaByxszP9BkYGf69g.s['55']++;this.syncScroll();__cov_d6CtHqaByxszP9BkYGf69g.s['56']++;this.fire(RENDER_FINISHED);__cov_d6CtHqaByxszP9BkYGf69g.s['57']++;return;}else{__cov_d6CtHqaByxszP9BkYGf69g.b['14'][1]++;}__cov_d6CtHqaByxszP9BkYGf69g.s['58']++;img=this._bpgImages[this._bpgRendered];__cov_d6CtHqaByxszP9BkYGf69g.s['59']++;if((__cov_d6CtHqaByxszP9BkYGf69g.b['16'][0]++,img.width)||(__cov_d6CtHqaByxszP9BkYGf69g.b['16'][1]++,img.error)){__cov_d6CtHqaByxszP9BkYGf69g.b['15'][0]++;__cov_d6CtHqaByxszP9BkYGf69g.s['60']++;if(img.error){__cov_d6CtHqaByxszP9BkYGf69g.b['17'][0]++;__cov_d6CtHqaByxszP9BkYGf69g.s['61']++;img.load.setAttribute('src',this.get('errorImage'));}else{__cov_d6CtHqaByxszP9BkYGf69g.b['17'][1]++;}__cov_d6CtHqaByxszP9BkYGf69g.s['62']++;this._minColumn().append(img.module);__cov_d6CtHqaByxszP9BkYGf69g.s['63']++;this._bpgRendered+=1;__cov_d6CtHqaByxszP9BkYGf69g.s['64']++;delay=1;}else{__cov_d6CtHqaByxszP9BkYGf69g.b['15'][1]++;}__cov_d6CtHqaByxszP9BkYGf69g.s['65']++;Y.later(delay,this,this.renderImages);},_updateColumns:function(refresh){__cov_d6CtHqaByxszP9BkYGf69g.f['13']++;__cov_d6CtHqaByxszP9BkYGf69g.s['66']++;var P=this.get('contentBox'),W=P.get('offsetWidth'),w=this.get('columnWidth'),N=Math.round(W/w),a=Math.floor(W/N),f=W-a*(N-1),HTML=HTMLS.COLUMN,render=(__cov_d6CtHqaByxszP9BkYGf69g.b['18'][0]++,refresh)||(__cov_d6CtHqaByxszP9BkYGf69g.b['18'][1]++,this._bpgColumns!==N),I;__cov_d6CtHqaByxszP9BkYGf69g.s['67']++;if(render){__cov_d6CtHqaByxszP9BkYGf69g.b['19'][0]++;__cov_d6CtHqaByxszP9BkYGf69g.s['68']++;P.all(this.get('moduleNode')).remove();__cov_d6CtHqaByxszP9BkYGf69g.s['69']++;P.set('innerHTML','');__cov_d6CtHqaByxszP9BkYGf69g.s['70']++;this._bpgColumns=N;__cov_d6CtHqaByxszP9BkYGf69g.s['71']++;for(I=0;I<N;I++){__cov_d6CtHqaByxszP9BkYGf69g.s['72']++;P.append(HTML);}}else{__cov_d6CtHqaByxszP9BkYGf69g.b['19'][1]++;}__cov_d6CtHqaByxszP9BkYGf69g.s['73']++;P.all('> div').each(function(O,I){__cov_d6CtHqaByxszP9BkYGf69g.f['14']++;__cov_d6CtHqaByxszP9BkYGf69g.s['74']++;O.set('offsetWidth',I?(__cov_d6CtHqaByxszP9BkYGf69g.b['20'][0]++,a):(__cov_d6CtHqaByxszP9BkYGf69g.b['20'][1]++,f));});__cov_d6CtHqaByxszP9BkYGf69g.s['75']++;this.syncScroll();__cov_d6CtHqaByxszP9BkYGf69g.s['76']++;if(render){__cov_d6CtHqaByxszP9BkYGf69g.b['21'][0]++;__cov_d6CtHqaByxszP9BkYGf69g.s['77']++;this._bpgRendered=0;__cov_d6CtHqaByxszP9BkYGf69g.s['78']++;this.renderImages(true);}else{__cov_d6CtHqaByxszP9BkYGf69g.b['21'][1]++;}}},{ATTRS:{errorImage:{value:'http://l.yimg.com/f/i/tw/map/i/cpx.gif',validator:Y.Lang.isString},columnWidth:{value:200,validator:function(V){__cov_d6CtHqaByxszP9BkYGf69g.f['15']++;__cov_d6CtHqaByxszP9BkYGf69g.s['79']++;return V*1>0;},setter:function(V){__cov_d6CtHqaByxszP9BkYGf69g.f['16']++;__cov_d6CtHqaByxszP9BkYGf69g.s['80']++;return V*1;}},gridType:{value:'vertical',validator:function(V){__cov_d6CtHqaByxszP9BkYGf69g.f['17']++;__cov_d6CtHqaByxszP9BkYGf69g.s['81']++;return GRID_CFGS[V]?(__cov_d6CtHqaByxszP9BkYGf69g.b['22'][0]++,true):(__cov_d6CtHqaByxszP9BkYGf69g.b['22'][1]++,false);}},moduleNode:{value:'> div',validator:Y.Lang.isString},photoNode:{value:'.img',validator:Y.Lang.isString}},HTML_PARSER:{errorImage:function(srcNode){__cov_d6CtHqaByxszP9BkYGf69g.f['18']++;__cov_d6CtHqaByxszP9BkYGf69g.s['82']++;return srcNode.getData('error-image');},columnWidth:function(srcNode){__cov_d6CtHqaByxszP9BkYGf69g.f['19']++;__cov_d6CtHqaByxszP9BkYGf69g.s['83']++;return srcNode.getData('column-width');},gridType:function(srcNode){__cov_d6CtHqaByxszP9BkYGf69g.f['20']++;__cov_d6CtHqaByxszP9BkYGf69g.s['84']++;return srcNode.getData('grid-type');},moduleNode:function(srcNode){__cov_d6CtHqaByxszP9BkYGf69g.f['21']++;__cov_d6CtHqaByxszP9BkYGf69g.s['85']++;return srcNode.getData('module-node');},photoNode:function(srcNode){__cov_d6CtHqaByxszP9BkYGf69g.f['22']++;__cov_d6CtHqaByxszP9BkYGf69g.s['86']++;return srcNode.getData('photo-node');}}});__cov_d6CtHqaByxszP9BkYGf69g.s['87']++;Y.namespace('Bottle').PhotoGrid=PhotoGrid;},'gallery-2012.12.19-21-23',{'requires':['gallery-bt-syncscroll']});
