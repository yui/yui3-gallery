YUI.add("gallery-node-optimizations",function(e){var d=/^([a-z]*)\.([-_a-z0-9]+)$/i;var f=/^\.([-_a-z0-9]+)$/i;var a=/^[a-z]+$/i;var b=e.Node.prototype.ancestor;e.Node.prototype.ancestor=function(h,i){if(e.Lang.isString(h)){var g=f.exec(h);if(g&&g.length){return this.getAncestorByClassName(g[1],i);}if(a.test(h)){return this.getAncestorByTagName(h,i);}}return b.apply(this,arguments);};e.Node.prototype.getAncestorByClassName=function(h,g){var i=this._node;if(!g){i=i.parentNode;}while(i&&!e.DOM.hasClass(i,h)){i=i.parentNode;if(!i||!i.tagName){return null;}}return e.one(i);};e.Node.prototype.getAncestorByTagName=function(i,g){var h=this._node;if(!g){h=h.parentNode;}i=i.toLowerCase();while(h&&h.tagName.toLowerCase()!=i){h=h.parentNode;if(!h||!h.tagName){return null;}}return e.one(h);};var c=e.Node.prototype.all;e.Node.prototype.all=function(h){if(e.Lang.isString(h)){var g=d.exec(h);if(g&&g.length){return this.getElementsByClassName(g[2],g[1]);}if(a.test(h)){return this.getElementsByTagName(h);}}return c.apply(this,arguments);};e.Node.prototype.getElementsByClassName=function(k,m){var n=this.getElementsByTagName(m||"*");var j=null;var h=n.size();for(var g=0;g<h;g++){var l=n.item(g);if(e.DOM.hasClass(e.Node.getDOMNode(l),k)){if(!j){j=new e.NodeList(l);}else{j.push(l);}}}if(!j){j=new e.NodeList("#surely-this-cannot-possibly-exist-on-your-page");}return j;};},"gallery-2011.08.24-23-44",{requires:["node-base"]});