YUI.add("gallery-node-optimizations",function(d){var c=/^([a-z]*)\.([-_a-z0-9]+)$/i;var e=/^\.([-_a-z0-9]+)$/i;var a=/^[a-z]+$/i;d.Node.class_re_prefix="(?:^|\\s)(?:";d.Node.class_re_suffix=")(?:\\s|$)";var b=d.Node.prototype.ancestor;d.Node.prototype.ancestor=function(g,h){if(d.Lang.isString(g)){var f=e.exec(g);if(f&&f.length){return this.getAncestorByClassName(f[1],h);}if(a.test(g)){return this.getAncestorByTagName(g,h);}}return b.apply(this,arguments);};d.Node.prototype.getAncestorByClassName=function(g,f){var h=this._node;if(!f){h=h.parentNode;}while(h&&!d.DOM.hasClass(h,g)){h=h.parentNode;if(!h||!h.tagName){return null;}}return d.one(h);};d.Node.prototype.getAncestorByTagName=function(h,f){var g=this._node;if(!f){g=g.parentNode;}h=h.toLowerCase();while(g&&g.tagName.toLowerCase()!=h){g=g.parentNode;if(!g||!g.tagName){return null;}}return d.one(g);};d.Node.prototype.getElementsByClassName=function(h,k){var l=d.Node.getDOMNode(this).getElementsByTagName(k||"*");var g=new d.NodeList();for(var f=0;f<l.length;f++){var j=l[f];if(d.DOM.hasClass(j,h)){g.push(j);}}return g;};d.Node.prototype.getFirstElementByClassName=function(k,f){if(!f||f=="*"||f=="div"){var q=[d.Node.getDOMNode(this)],o=[];while(q.length){for(var m=0;m<q.length;m++){var p=q[m],g=p.children||p.childNodes;for(var l=0;l<g.length;l++){var n=g[l];if(d.DOM.hasClass(n,k)){return d.one(n);}o.push(n);}}q=o;o=[];}}else{var h=d.Node.getDOMNode(this).getElementsByTagName(f||"*");for(var m=0;m<h.length;m++){var n=h[m];if(d.DOM.hasClass(n,k)){return d.one(n);}}}return null;};},"gallery-2012.06.27-20-10",{requires:["node-base"]});