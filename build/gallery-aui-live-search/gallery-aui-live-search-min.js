YUI.add("gallery-aui-live-search",function(l){var h=l.Lang,j=h.isString,i=h.isObject,a=h.isFunction,s="",g="data",k="delay",o="hide",q="index",b="input",r="live-search",n="matchRegex",d="nodes",e="show",c="*",f=13,m=function(t){return(t instanceof l.NodeList);};var p=l.Component.create({NAME:r,ATTRS:{data:{value:function(t){return t.html();},validator:a},delay:{value:250},hide:{value:function(t){return t.hide();},validator:a},index:{value:[],validator:i},input:{setter:l.one},matchRegex:{validator:function(t){return(t instanceof RegExp);},value:/(.)*/g},nodes:{setter:function(t){return this._setNodes(t);}},show:{value:function(t){return t.show();},validator:a}},EXTENDS:l.Base,prototype:{normalizedQuery:s,query:s,timer:null,initializer:function(){var t=this;t.refreshIndex();t.bindUI();},bindUI:function(){var t=this;var u=t.get(b);u.on("keyup",l.bind(t._inputKeyUp,t));t.publish("search",{defaultFn:t.search});},destroy:function(){var t=this;var u=t.get(b);u.detach("keyup");},filter:function(y){var t=this;var w=[];var u=t.get(d);var v=t.get(q);t.query=y;t.normalizedQuery=t._normalizeQuery(y);var x=new RegExp(t.normalizedQuery);l.each(v,function(B,z){var A=u.item(z);w.push({content:B,match:x.test(B),node:A});});return w;},refreshIndex:function(){var t=this;var v=[];var u=t.get(d);u.refresh();u.each(function(x){var w=h.trim(t.get(g).apply(t,[x]).toLowerCase());v.push(w);});t.set(q,v);},search:function(v){var t=this;var w=t.get(b).val();var u=t.filter(w);l.each(u,function(x){var y=x.node;if(x.match){t.get(e).apply(t,[y]);}else{t.get(o).apply(t,[y]);}});v.liveSearch.results=u;},_normalizeQuery:function(v){var t=this;var u=t.get(n);v=h.trim(v.toLowerCase());v=v.match(u).join(s);v=v.replace(c,s);v=l.Lang.String.escapeRegEx(v);return v;},_inputKeyUp:function(v){var t=this;var u=t.get(k);var w=v.keyCode;if(w=f){v.halt();}if(i(t.timer)){t.timer.cancel();}t.timer=l.later(u,t,function(){t.fire("search",{liveSearch:{inputEvent:v}});});},_setNodes:function(u){var t=this;if(m(u)){return u;}else{if(j(u)){return l.all(u);}}return new l.NodeList([u]);}}});l.LiveSearch=p;},"gallery-2011.02.09-21-32",{requires:["gallery-aui-base"],skinnable:false});