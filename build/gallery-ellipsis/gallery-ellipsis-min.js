YUI.add("gallery-ellipsis",function(h){var d=0.01,g=function(j,i){return Math.abs(j-i)<=d;},b=function(j,i){return j-i>=d;},f=function(j,i){return j-i<=d;},c=false,a={"white-space":"nowrap","overflow":"hidden"},e=false;h.DOM.ellipsis=function(k,q){q=q||{};h.mix(q,{"ellipsis":"\u2026","fudge":3,"lines":1,"remember":true,"native":true});var p=h.one(k),i="ellipsis-original-text",m=q.remember&&p.getData(i)||p.get("text"),n=m.length,l=n,s=h.one(document.createElement(p.get("nodeName"))),t,o,j,r;s.setStyles({"overflow":"hidden","position":"absolute","visibility":"hidden","display":"block","bottom":"-10px","left":"-10px","width":e?k.offsetWidth:p.getComputedStyle("width"),"fontSize":e?k.currentStyle.fontSize:p.getComputedStyle("fontSize"),"fontFamily":p.getComputedStyle("fontFamily"),"fontWeight":p.getComputedStyle("fontWeight"),"letterSpacing":p.getComputedStyle("letterSpacing"),"lineHeight":p.getComputedStyle("lineHeight")});s.set("text","some sample text");h.one("body").append(s);t=parseFloat(s.getComputedStyle("height"));if(h.DOM.ellipsis.nativeSupport&&q["native"]&&1==q.lines&&"\u2026"===q.ellipsis){p.setStyles(a);p.setStyle("height",t+"px");s.remove();return;}s.setStyle("overflow","visible");o=q.lines*t;s.set("text",m);j=parseFloat(s.getComputedStyle("height"));if(f(j,o)&&m.length===p.get("text").length){s.remove();return;}for(;l>=1;){l=Math.floor(l/2);n+=b(j,o)?-l:+l;s.set("text",m.slice(0,n-q.ellipsis.length)+q.ellipsis);j=parseFloat(s.getComputedStyle("height"));if(g(j,o)||f(j,o)){r=n;}}s.remove();if(q.remember&&!p.getData(i)){p.setData(i,m);}if(m.length===(s.get("text").length-q.ellipsis.length)){p.set("text",m);}else{if("undefined"!==typeof r){p.set("text",m.slice(0,r-q.ellipsis.length-q.fudge)+q.ellipsis);}}return p;};h.Node.importMethod(h.DOM,"ellipsis");h.NodeList.importMethod(h.Node.prototype,"ellipsis");h.on("domready",function(){var i,j=h.Node.create('<div style="visibility:hidden;position:absolute;white-space:nowrap;overflow:hidden;"></div>'),k=["textOverflow","OTextOverflow"];e=!!(document.body.currentStyle&&(window.CSSCurrentStyleDeclaration||!window.CSSStyleDeclaration));h.each(k,function(l){j.setStyle(l,"ellipsis");});h.one("body").appendChild(j);i=j.cloneNode(true);h.some(k,function(l){if("ellipsis"===i.getStyle(l)){c=l;a[c]="ellipsis";h.DOM.ellipsis.nativeSupport=true;return true;}});j.remove();j=i=null;});},"gallery-2011.04.13-22-38",{requires:["base","node"]});