YUI.add("gallery-inline-xhr",function(e){var k="0.3.0",G="gallery-inline-xhr",m={mode:null,url:null,method:"POST"},d=null,D={},q={},a=false,u=0,c="Executing",x="method",C="ResponseText",I="undefined",H=" ",y="is empty",h="in",n="error",f="info",z="alert",j="not found",A="HTML",l="cursor",B="JSON syntax error in responseText: ",o=function(S,L){if(L.responseText!==undefined){if(L.responseText.length===0){if(z===m.mode){alert(C+H+y+H+h+H+G);}return;}try{var M=e.JSON.parse(L.responseText);if(M.c!==200){var R=M.c,K=M.t;t(R,K);}else{var N;for(N in M.ff){if(M.ff.hasOwnProperty(N)){var J=M.ff[N],O=J.f,Q=J.a;if(!w(O,Q,S,L)){if(!i(O,Q,S,L)){if(z===m.mode){alert(x+" '"+O+"' "+j+" in Y or "+G);}}}}}}}catch(P){if(z===m.mode){alert(B+L.responseText+H+h+H+G+" "+P);}return;}}else{if(z===m.mode){alert(C+H+I+H+h+H+G);}}},w=function(M,K,J,L){if(e[M]===undefined){return false;}else{e[M](K,J,L);return true;}},i=function(M,K,J,L){if(q===undefined){return false;}if(q[M]!==undefined){q[M](K,J,L);return true;}else{return false;}},t=function(K,J){if(m.mode===z){alert("Error response received from server: "+K+": "+J);}},b=function(){u++;},v=function(){u--;},r=function(){return u;},E=function(){b();e.one(A).setStyle(l,"wait");},F=function(){v();if(0===r()){e.one(A).setStyle(l,"default");}},s=function(J,L){if(m.mode===z){var K="Failure for xhr Id: "+J+".\n";K+="HTTP status: "+L.status+"\n";K+="HTTP headers received: "+L.getAllResponseHeaders()+"\n";K+="Status code message: "+L.statusText+".";alert(K);}},p=function(J){if(undefined===D[J]){D[J]={};}if(undefined===D[J].request){D[J].request=g;}return D[J];},g=function(){var J;for(J in this){if(this.hasOwnProperty(J)&&J!=="request"){this[J]();}}};InlineXhr=function(){InlineXhr.superclass.constructor.apply(this,arguments);};InlineXhr.NAME=G;e.extend(InlineXhr,e.Base,{register:function(L,N,K,M){var J=p(L);J[N]=function(){m.url=m.url?m.url:document.location.href;var Q=false,P=null;if(M!==undefined){P={id:e.one(M),useDisabled:false};}var O=e.io(m.url,{method:m.method,data:K+"&ajaxAction="+N,form:P,on:{success:o,failure:s,start:E,complete:F}});};return J;},header:function(J,K){e.io.header.apply(e,arguments);},usePrivate:function(K,J){q[J]=K;},setConfig:function(J){var K;for(K in J){if(J.hasOwnProperty(K)){if(m[K]===undefined){if(J.mode===z){alert("Wrong configuration parameter passed to xhr object: "+K);}}m[K]=J[K];}}},startSpinner:function(){e.one(A).setStyle(l,"wait");},stopSpinner:function(){if(0===r()){e.one(A).setStyle(l,"default");}}});e.Base.InlineXhr=InlineXhr;},"gallery-2011.05.12-13-26",{optional:["io-form"],requires:["json-parse","node","io-base","base"]});