YUI.add("gallery-carousel",function(E){function D(){D.superclass.constructor.apply(this,arguments);}var B=E.ClassNameManager.getClassName,C=E.Lang,A=E.Node;D.NAME="carousel";D.ATTRS={autoPlayInterval:{validator:C.isNumber,value:0},carouselItemEl:{validator:C.isString,value:"li"},hidePagination:{validator:C.isBoolean,value:false},isCircular:{validator:C.isBoolean,value:false},isVertical:{setter:"_setVertical",validator:C.isBoolean,value:false},useMenuForNav:{validator:C.isBoolean,value:false},numItems:{value:0},numVisible:{validator:"_validateNumVisible",value:3},revealAmount:{validator:"_validateRevealAmount",value:0},scrollIncrement:{validator:C.isNumber,value:1},selectedItem:{validator:C.isNumber,value:0},strings:{value:{GOTO_PAGE:"Go to page {page}",NEXT_PAGE:"Next Page",PREV_PAGE:"Previous Page"}}};E.Carousel=E.extend(D,E.Widget,{addItem:function(I,J){var F=this,H,G;if(C.isString(I)){G=A.create(E.substitute(F.ITEM_TEMPLATE,{content:I}));}else{if(C.isObject(I)&&I.constructor.NAME==="node"){G=I;}else{return false;}}if(!F._vtbl.item.content){F._vtbl.item.content=G;}if(C.isUndefined(J)){F._vtbl.items.push(G);}else{if(!F._vtbl.items[J]){F._vtbl.items[J]=undefined;}F._vtbl.items.splice(J,1,G);}H=this.get("numItems");this.set("numItems",H+1);return true;},addItems:function(G){var F=this,K=false,I,H,J;if(!C.isArray(G)){return false;}K=true;for(H=0,J=G.length;H<J;++H){I=G[H].content;if(!F.addItem(I,G[H].pos)){K=false;}}return K;},clearItems:function(){var F=this,G=F._vtbl.items;while(G.length>0){F.removeItem(0);}},getElementForItem:function(F){return this.getItem(F);},getElementForItems:function(F){return this.getItems(F);},getFirstVisible:function(){var F=this,H=F.get("numVisible"),G=F.get("selectedItem");return F._getFirstVisible(G,H);},getFirstVisibleOnPage:function(F){return(F-1)*this.get("numVisible");},getItem:function(G){var F=this;if(G<0||G>F._vtbl.items.length-1){return null;}return C.isUndefined(F._vtbl.items[G])?null:F._vtbl.items[G];},getItems:function(J){var G=this,F=[],H,I;if(C.isUndefined(J)){for(H=0,I=G._vtbl.items.length;H<I;++H){F[H]=G.getItem(H);}}else{for(H=0,I=J.length;H<I;++H){F[J[H]]=G.getItem(J[H]);}}return F;},getPageForItem:function(F){return Math.floor(F/this.get("numVisible"));},getVisibleItems:function(){var F=this,H=F.get("numVisible"),K=F.getFirstVisible(),J=[],G,I;for(G=K,I=K+H;G<I;++G){J.push(F._vtbl.items[G]);}return J;},removeItem:function(G){var F=this,I,H;if(G<0||G>F._vtbl.items.length-1){return false;}I=F._vtbl.items.splice(G,1);if(!I){return false;}H=F.get("numItems");--H;F.set("numItems",H);return true;},scrollBackward:function(){var G=this,F=G.get("scrollIncrement"),H=G.get("selectedItem");G.scrollTo(H-F);},scrollForward:function(){var G=this,F=G.get("scrollIncrement"),H=G.get("selectedItem");G.scrollTo(H+F);},scrollPageBackward:function(){var F=this,H=F.get("numVisible"),G=F.get("selectedItem");F.scrollTo(G-H);},scrollPageForward:function(){var F=this,H=F.get("numVisible"),G=F.get("selectedItem");F.scrollTo(G+H);},scrollTo:function(J){var I=this,H=I.get("isCircular"),K=I.get("numItems"),G,F,L;if(J<0){if(H){J+=K;}else{J=0;}}else{if(J>K-1){if(H){J=K-J;}else{J=K-1;}}}L=I._getOffsetForIndex(J);F=I.get("contentBox");G=I.get("isVertical")?"top":"left";F.setStyle(G,L);I.set("selectedItem",J);},scrollToPage:function(G){var F=this;F.scrollTo(G*F.get("numVisible"));},bindUI:function(){var F=this,G=F.get("boundingBox");F.after("selectedItemChange",F._afterSelectedItemChange);if(!F.get("hidePagination")){G.delegate("click",E.bind(F._onNavItemClick,F),".yui3-carousel-nav-item > a");G.delegate("click",E.bind(F._onNavButtonClick,F),".yui3-carousel-button");}},initializer:function(){var F=this;F._vtbl={items:[],item:{content:null,hsz:0,vsz:0}};F.get("boundingBox").addClass(B(D.NAME,"loading"));F._parseItems();},renderUI:function(){var F=this;if(F.get("numItems")<1){F.get("boundingBox").addClass(B(D.NAME,"hidden"));return;}if(F._vtbl.item.hsz===0){F._vtbl.item.hsz=F._getNodeSize(F._vtbl.item.content,"width");}if(F._vtbl.item.vsz===0){F._vtbl.item.vsz=F._getNodeSize(F._vtbl.item.content,"height");}F._renderItems();if(!F.get("hidePagination")){F._renderNavigation();}F._renderContainer();},syncUI:function(){var F=this,G=F.get("selectedItem");F._uiSetSelectedItem(G,true);if(!F.get("hidePagination")){F._updateNavigation(G);}},_afterSelectedItemChange:function(G){var F=this;F._uiSetSelectedItem(G.prevVal,false);F._uiSetSelectedItem(G.newVal,true);if(!F.get("hidePagination")){F._updateNavigation(G.newVal);}},_getFirstVisible:function(G,F){return G-(G%F);},_getOffsetForIndex:function(G){var F=this,H;H=F.get("isVertical")?F._vtbl.item.vsz:F._vtbl.item.hsz;return -H*G;},_getNodeSize:function(F,H){var G=0;if(F&&F.constructor.NAME==="node"){if(H==="height"){G=parseInt(F.getComputedStyle("marginTop"),10)+parseInt(F.getComputedStyle("paddingTop"),10)+parseInt(F.getComputedStyle("borderTopWidth"),10)+parseInt(F.getComputedStyle("height"),10)+parseInt(F.getComputedStyle("borderBottomWidth"),10)+parseInt(F.getComputedStyle("paddingBottom"),10)+parseInt(F.getComputedStyle("marginBottom"),10);}else{if(H=="width"){G=parseInt(F.getComputedStyle("marginLeft"),10)+parseInt(F.getComputedStyle("paddingLeft"),10)+parseInt(F.getComputedStyle("borderLeftWidth"),10)+parseInt(F.getComputedStyle("width"),10)+parseInt(F.getComputedStyle("borderRightWidth"),10)+parseInt(F.getComputedStyle("paddingRight"),10)+parseInt(F.getComputedStyle("marginRight"),10);}}}return G;},_onNavButtonClick:function(G){var F=this,H;G.preventDefault();H=G&&G.target?G.target:null;if(!H){return;}if(!H.test(".yui3-carousel-button")){H=H.ancestor();}if(H.hasClass("yui3-carousel-first-button")){F.scrollPageBackward();}else{if(H.hasClass("yui3-carousel-next-button")){F.scrollPageForward();}}},_onNavItemClick:function(H){var F=this,G,I;H.preventDefault();I=H&&H.target?H.target:null;if(!I){return;}G=I.get("href");if(G){G=parseInt(G.replace(/.*#(.*)$/,"$1"),10);if(C.isNumber(G)){F.scrollToPage(G-1);F._uiSetNavItem(I.ancestor());}}},_parseItems:function(){var F,H,G=this;
F=G.get("contentBox");H=F.all(G.get("carouselItemEl"));H.each(function(J,I){if(!G.addItem(J)){}},G);},_renderContainer:function(){var F=this,M=F.get("boundingBox"),I=F.get("hidePagination"),J=F.get("numVisible"),G=F.get("revealAmount"),H=0,L,K;if(!I){L=M.one(".yui3-carousel-nav");H=F._getNodeSize(L,"height");}if(this.get("isVertical")){K=F._vtbl.item.vsz*J;if(G>0){K+=(K*G/100);}F._uiSetHeight(K+H);F._uiSetWidth(F._vtbl.item.vsz);F._uiSetWidthCB(F._vtbl.item.vsz);}else{K=F._vtbl.item.hsz*J;if(G>0){K+=(K*G/100);}F._uiSetWidth(K);F._uiSetHeight(F._vtbl.item.hsz+H);F._uiSetHeightCB(F._vtbl.item.hsz);}},_renderItems:function(){var H=this,G=H.get("contentBox"),F,J,L,K,I;if(H.get("isVertical")){F="top";I=H._vtbl.item.vsz;}else{F="left";I=H._vtbl.item.hsz;}for(J=0,L=H._vtbl.items.length;J<L;++J){K=H._vtbl.items[J];if(K){if(!K.inDoc()){if(J===0){G.appendChild(K);}else{G.insertBefore(K,H._vtbl.items[J-1]);}}K.setStyle(F,I*J);}}},_renderNavigation:function(){var M=this,J=M.get("boundingBox"),H=M.get("contentBox"),K=[],I,F,G,N,L;G=Math.ceil(M.get("numItems")/M.get("numVisible"));if(G<1){M.set("hidePagination",true);return;}N=M.get("strings.GOTO_PAGE");for(I=1;I<=G;++I){L=E.substitute(N,{page:I});K.push(E.substitute(M.DEF_NAV_ITEM_TEMPLATE,{pagenum:I,label:L}));}M._navBtns={prev:E.guid(),next:E.guid()};F=A.create(E.substitute(M.DEF_NAV_TEMPLATE,{nav_items:K.join(""),nav_prev_btn_id:M.prev,nav_prev_btn_text:M.get("strings.PREV_PAGE"),nav_next_btn_id:M.next,nav_next_btn_text:M.get("strings.NEXT_PAGE")}));J.insertBefore(F,H);},_setVertical:function(F,G){this._uiSetVertical(F);},_uiSetHeight:function(G){var F=this;if(G){F.get("boundingBox").setStyle("height",G);}},_uiSetHeightCB:function(G){var F=this;if(G){F.get("contentBox").setStyle("height",G);}},_uiSetNavItem:function(H){var F=this,I=F.get("boundingBox"),G;G=B(D.NAME,"nav-item-selected");I.all(".yui3-carousel-nav-item").removeClass(G);H.addClass(G);},_uiSetSelectedItem:function(H,F){var G=this,J=G._vtbl.items[H],I=B(D.NAME,"selected");if(J){if(F){J.addClass(I);}else{J.removeClass(I);}}},_uiSetVertical:function(G){var F=this.get("boundingBox");if(G){F.addClass(B(D.NAME,"vertical"));}else{F.addClass(B(D.NAME,"horizontal"));}},_uiSetWidth:function(G){var F=this;if(G){F.get("boundingBox").setStyle("width",G);}},_uiSetWidthCB:function(G){var F=this;if(G){F.get("contentBox").setStyle("width",G);}},_updateNavigation:function(J){var H=this,L=H.get("boundingBox"),G=H.get("isCircular"),I,K,F;J=J||H.get("selectedItem");H._uiSetSelectedItem(J,true);F=L.all(".yui3-carousel-nav-item");K=H.getPageForItem(J);H._uiSetNavItem(F.item(K));if(J===0){I=L.one(".yui3-carousel-next-button");if(I){I.removeClass(".yui3-carousel-button-disabled");}if(!G){I=L.one(".yui3-carousel-first-button");if(I){I.addClass(".yui3-carousel-first-button-disabled");}}}else{if(J==H.get("numItems")-1){I=L.one(".yui3-carousel-first-button");if(I){I.removeClass(".yui3-carousel-first-button-disabled");}if(!G){I=L.one(".yui3-carousel-next-button");if(I){I.addClass(".yui3-carousel-button-disabled");}}}else{I=L.one(".yui3-carousel-first-button");if(I){I.removeClass(".yui3-carousel-first-button-disabled");}I=L.one(".yui3-carousel-next-button");if(I){I.removeClass(".yui3-carousel-button-disabled");}}}},_validateNumVisible:function(F,G){return F>0;},_validateRevealAmount:function(F,G){return F>=0&&F<=100;},ITEM_TEMPLATE:"<li>{content}</li>",DEF_NAV_TEMPLATE:'<div class="yui3-carousel-nav">'+"<ul>{nav_items}</ul>"+'<span class="yui3-carousel-button yui3-carousel-first-button">'+'<button type="button">'+"{nav_prev_btn_text}</button>"+"</span>"+'<span class="yui3-carousel-button yui3-carousel-next-button">'+'<button type="button">'+"{nav_next_btn_text}</button>"+"</span>"+"</div>",DEF_NAV_ITEM_TEMPLATE:'<li class="yui3-carousel-nav-item">'+'<a class="yui3-carousel-pager-item" '+'href="#{pagenum}"><em>{label}</em></a></li>',_navBtns:null,_vtbl:null});},"@VERSION@",{requires:["widget"]});