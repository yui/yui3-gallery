YUI.add("gallery-aui-paginator",function(ag){var W=ag.Lang,f=W.isArray,aw=W.isBoolean,au=W.isFunction,N=W.isNumber,F=W.isObject,aB=W.isString,B="alwaysVisible",o="boundingBox",C="circular",c="container",I="containers",ab="content",ap="current",V=".",x="first",ai="firstPageLink",aI="firstPageLinkLabel",g="last",K="lastPageLink",aE="lastPageLinkLabel",ac="link",al="maxPageLinks",m="next",at="nextPageLink",af="nextPageLinkLabel",p="page",w="pageContainerTemplate",J="pageLinkContent",H="pageLinkTemplate",e="pageReportEl",u="pageReportLabelTemplate",ak="paginator",av="per",ax="prev",j="prevPageLink",b="prevPageLinkLabel",Z="report",k="rows",aj="rowsPerPage",aD="rowsPerPageEl",t="rowsPerPageOptions",M="select",r=" ",S="state",ar="template",ae="total",O="totalEl",U="totalLabel",ad="totalPages",aC=function(){return Array.prototype.slice.call(arguments).join(r);},aF=function(A){return(A instanceof ag.NodeList);},aG=function(A){return parseInt(A,10)||0;},E=ag.ClassNameManager.getClassName,y=E(ak),s=E(ak,c),am=E(ak,ab),z=E(ak,ap,p),aH=E(ak,x,ac),l=E(ak,g,ac),az=E(ak,ac),d=E(ak,m,ac),a=E(ak,p,c),ao=E(ak,p,ac),v=E(ak,ap,p,Z),an=E(ak,ax,ac),q=E(ak,k,av,p),i=E(ak,ae),T="(Total {total})",Q="({page} of {totalPages})",Y="{FirstPageLink} {PrevPageLink} {PageLinks} {NextPageLink} {LastPageLink} {CurrentPageReport} {Total} {RowsPerPageSelect}",aq="&gt;",P="&lt;",h='<a href="#" class="'+aC(az,aH)+'"></a>',aa='<a href="#" class="'+aC(az,l)+'"></a>',G='<a href="#" class="'+aC(az,d)+'"></a>',aA="<span></span>",X='<a href="#"></a>',n='<span class="'+aC(v)+'"></span>',ay='<a href="#" class="'+aC(az,an)+'"></a>',ah='<select class="'+q+'"></select>',R='<span class="'+aC(i)+'"></span>';var D=ag.Component.create({NAME:ak,ATTRS:{alwaysVisible:{value:true,validator:aw},circular:{value:false,validator:aw},containers:{writeOnce:true,setter:function(L){var A=this;if(aF(L)){return L;}else{if(aB(L)){return ag.all(L);}}return new ag.NodeList([L]);}},firstPageLink:{setter:ag.one,valueFn:function(){var A=this.get(aI);return ag.Node.create(h).html(A);}},firstPageLinkLabel:{value:x,validator:aB},lastPageLink:{setter:ag.one,valueFn:function(){var A=this.get(aE);return ag.Node.create(aa).html(A);}},lastPageLinkLabel:{value:g,validator:aB},maxPageLinks:{value:10,getter:function(A){var L=this.get(ad);return Math.min(L,A);},validator:N},nextPageLink:{setter:ag.one,valueFn:function(){var A=this.get(af);return ag.Node.create(G).html(A);}},nextPageLinkLabel:{value:aC(m,aq),validator:aB},page:{setter:aG,value:1},pageContainerTemplate:{getter:function(A){return ag.Node.create(A).addClass(a);},value:aA,validator:aB},pageLinkContent:{value:function(aJ,A,L){aJ.html(A);},validator:au},pageLinkTemplate:{getter:function(A){var L=ag.Node.create(A);return L.addClass(aC(az,ao));},value:X,validator:aB},pageReportEl:{setter:ag.one,valueFn:function(){var A=this.get(u);return ag.Node.create(n).html(A);}},pageReportLabelTemplate:{getter:function(){var A=this;return ag.substitute(Q,{page:A.get(p),totalPages:A.get(ad)});},validator:aB},prevPageLink:{setter:ag.one,valueFn:function(){var A=this.get(b);return ag.Node.create(ay).html(A);}},prevPageLinkLabel:{value:aC(P,ax),validator:aB},rowsPerPageOptions:{value:{},validator:f},rowsPerPage:{setter:aG,value:1},rowsPerPageEl:{setter:ag.one,valueFn:function(){return ag.Node.create(ah);}},state:{setter:"_setState",getter:"_getState",value:{},validator:F},template:{getter:"_getTemplate",writeOnce:true,value:Y,validator:aB},total:{setter:function(A){return this._setTotal(A);},value:0,validator:N},totalEl:{setter:ag.one,valueFn:function(){var A=this.get(U);return ag.Node.create(R).html(A);}},totalLabel:{getter:function(){var A=this;return ag.substitute(T,{total:A.get(ae)});},validator:aB},totalPages:{readOnly:true,getter:function(A){return Math.ceil(this.get(ae)/this.get(aj));}}},prototype:{lastState:null,templatesCache:null,renderUI:function(){var A=this;var L=A.get(I);L.unselectable();A._renderRowsPerPageOptions();A._renderTemplateUI();L.addClass(s);},bindUI:function(){var A=this;A._delegateDOM();A.publish("changeRequest");A.after("stateChange",ag.bind(A._afterSetState,A));A.before("stateChange",ag.bind(A._beforeSetState,A));A.after("maxPageLinksChange",ag.bind(A._renderTemplateUI,A));A.after("rowsPerPageChange",ag.bind(A._renderTemplateUI,A));A.after("totalChange",ag.bind(A._renderTemplateUI,A));},syncUI:function(){var A=this;A.changeRequest();},destructor:function(){var A=this;A.get(I).remove(true);},_syncPageLinksUI:function(){var A=this;var aK=A.get(I);var aJ=A.get(p);var L=A.calculateRange(aJ);aK.each(function(aN){var aM=0;var aL=L.start;var aP=aN.all(V+ao);if(aP){aP.removeClass(z);while(aL<=L.end){var aO=aP.item(aM);A.get(J).apply(A,[aO,aL,aM]);aO.setAttribute(p,aL);if(aL==aJ){aO.addClass(z);}aM++;aL++;}}});},_syncPageReportUI:function(L){var A=this;var aJ=A.get(I);aJ.each(function(aK){var aL=aK.one(V+v);if(aL){aL.html(A.get(u));}});},calculateRange:function(aK){var A=this;var aJ=A.get(ad);var aN=A.get(al);var aL=Math.ceil(aN/2);var aM=Math.min(Math.max(aK-aL,1),(aJ-aN+1));var L=Math.min(aM+aN-1,aJ);return{start:aM,end:L};},changeRequest:function(){var A=this;var aK=A.get(S);if(A.get(C)){var aJ=aK.page;var L=aK.totalPages;if(aK.before&&(aK.before.page==aJ)){if(aJ<=1){aK.page=L;}else{if(aJ>=L){aK.page=1;}}A.set(S,aK);}}A.fire("changeRequest",{state:aK});},eachContainer:function(L){var A=this;A.get(I).each(function(aJ){if(aJ){L.apply(A,arguments);}});},hasNextPage:function(){var A=this;return A.hasPage(A.get(p)+1);},hasPage:function(aJ){var A=this;var L=A.get(ad);return((aJ>0)&&(aJ<=L));},hasPrevPage:function(){var A=this;return A.hasPage(A.get(p)-1);},_renderRowsPerPageOptions:function(){var A=this;var aJ=0;var L=A.get(aD);var aK=A.get(t);ag.each(aK,function(aL){L.getDOM().options[aJ++]=new Option(aL,aL);});},_renderTemplateUI:function(){var A=this;var L=A.get(I);A.templatesCache=null;L.html(A.get(ar));A._syncPageLinksUI();A._syncPageReportUI();A._bindDOMEvents();},setState:function(L){var A=this;A.set(S,L);},_getState:function(L){var A=this;
return{before:A.lastState,paginator:A,page:A.get(p),total:A.get(ae),totalPages:A.get(ad),rowsPerPage:A.get(aj)};},_getTemplate:function(L){var A=this;var aJ=function(aO){return A.get(aO).outerHTML();};if(!A.templatesCache){var aM=0;var aL=A.get(ad);var aN=A.get(al);var aK=A.get(w);while(aM++<aN){aK.append(A.get(H));}A.templatesCache=ag.substitute(L,{CurrentPageReport:aJ(e),FirstPageLink:aJ(ai),LastPageLink:aJ(K),NextPageLink:aJ(at),PageLinks:aK.outerHTML(),PrevPageLink:aJ(j),RowsPerPageSelect:aJ(aD),Total:aJ(O)});}return A.templatesCache;},_setState:function(L){var A=this;ag.each(L,function(aK,aJ){A.set(aJ,aK);});return L;},_setTotal:function(aJ){var A=this;var L=A.get(B);var aK=A.get(I);if(!L&&(aJ===0)){aK.hide();}else{aK.show();}return aJ;},_afterSetState:function(L){var A=this;A._syncPageLinksUI();A._syncPageReportUI();},_beforeSetState:function(L){var A=this;A.lastState=L.prevVal;},_onClickFirstLinkEl:function(L){var A=this;A.set(p,1);A.changeRequest();L.halt();},_onClickPrevLinkEl:function(L){var A=this;var aJ=A.get(p);A.set(p,(A.hasPrevPage()?aJ-1:aJ));A.changeRequest();L.halt();},_onClickPageLinkEl:function(aJ){var A=this;var L=aJ.currentTarget.attr(p);A.set(p,L);A.changeRequest();aJ.halt();},_onClickNextLinkEl:function(L){var A=this;var aJ=A.get(p);A.set(p,(A.hasNextPage()?aJ+1:aJ));A.changeRequest();L.halt();},_onClickLastLinkEl:function(aJ){var A=this;var L=A.get(ad);A.set(p,L);A.changeRequest();aJ.halt();},_bindDOMEvents:function(){var A=this;A.eachContainer(function(aJ){var L=aJ.one(V+q);if(L){L.val(A.get(aj));L.detach("change");L.on("change",function(aL){var aK=A.get(aj);try{aK=aL.target.val();}catch(aM){}A.set(p,1);A.set(aj,aK);A.changeRequest();});}});},_delegateDOM:function(){var A=this;A.eachContainer(function(aJ,L){aJ.delegate("click",ag.bind(A._onClickFirstLinkEl,A),V+aH);aJ.delegate("click",ag.bind(A._onClickPrevLinkEl,A),V+an);aJ.delegate("click",ag.bind(A._onClickPageLinkEl,A),V+ao);aJ.delegate("click",ag.bind(A._onClickNextLinkEl,A),V+d);aJ.delegate("click",ag.bind(A._onClickLastLinkEl,A),V+l);});}}});ag.Paginator=D;},"gallery-2011.02.09-21-32",{requires:["gallery-aui-base","substitute"],skinnable:true});