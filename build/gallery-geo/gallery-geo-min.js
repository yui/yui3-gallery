YUI.add("gallery-geo",function(c){function a(e,d){navigator.geolocation.getCurrentPosition(function(f){e.call(d,{success:true,coords:{latitude:f.coords.latitude,longitude:f.coords.longitude,accuracy:f.coords.accuracy,altitude:f.coords.altitude,altitudeAccuracy:f.coords.altitudeAccuracy,heading:f.coords.heading,speed:f.coords.speed},timestamp:f.timestamp,source:"native"});},function(f){if(f.code==1){e.call(d,{success:false,denied:true});}else{getCurrentPositionByGeoIp(e,d);}});}function b(e,d){c.YQL("select * from pidgets.geoip",{on:{success:function(f){var g;if(f.error){e.call(d,{success:false});}else{g=f.query.results.Result;e.call(d,{success:true,coords:{latitude:parseFloat(g.latitude),longitude:parseFloat(g.longitude),accuracy:Infinity},timestamp:+new Date(),source:"pidgets.geoip"});}},failure:function(){e.call(d,{success:false});}}});}c.Geo={getCurrentPosition:navigator.geolocation?a:b};},"gallery-2011.05.04-20-03",{requires:["yql"]});