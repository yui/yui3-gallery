YUI.add("gallery-geo",function(c){function a(f,d,e){navigator.geolocation.getCurrentPosition(function(g){f.call(d,{success:true,coords:{latitude:g.coords.latitude,longitude:g.coords.longitude,accuracy:g.coords.accuracy,altitude:g.coords.altitude,altitudeAccuracy:g.coords.altitudeAccuracy,heading:g.coords.heading,speed:g.coords.speed},timestamp:g.timestamp,source:"native"});},function(g){if(g.code==1){f.call(d,{success:false,denied:true});}else{b(f,d);}},e);}function b(g,e,f){f=f||{};var d=c.Lang.isNumber(f.maximumAge)?{_maxage:f.maximumAge}:{};c.YQL("select * from pidgets.geoip",{on:{success:function(h){var i;if(h.error){g.call(e,{success:false});}else{i=h.query.results.Result;g.call(e,{success:true,coords:{latitude:parseFloat(i.latitude),longitude:parseFloat(i.longitude),accuracy:Infinity},timestamp:+new Date(),source:"pidgets.geoip"});}},failure:function(){g.call(e,{success:false});},timeout:function(){g.call(e,{success:false});}},timeout:f.timeout},d);}c.Geo={getCurrentPosition:navigator.geolocation?a:b};},"gallery-2011.05.12-13-26",{requires:["yql"]});