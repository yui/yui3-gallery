YUI.add("gallery-deferred",function(b){var f=b.Lang,i=b.Array,j=Array.prototype,g=j.push,c=1,e=2;function h(k){this._config=k||{};this._done=[];this._fail=[];this._args=[];this.status=0;}b.mix(h.prototype,{then:function(l,k){if(l){l=h._flatten(l);if(this.status===c){i.each(l,function(m){m.apply(this,this._args);},this);}else{g.apply(this._done,l);}}if(k){k=h._flatten(k);if(this.status===e){i.each(k,function(m){m.apply(this,this._args);},this);}else{g.apply(this._fail,k);}}return this;},done:function(){return this.then(i(arguments));},fail:function(){return this.then(null,i(arguments));},always:function(){var k=i(arguments);return this.then(k,k);},resolve:function(){this.status=c;return this._notify(i(arguments));},reject:function(){this.status=e;return this._notify(i(arguments));},_notify:function(l){var m=[],k=this;if(this.status===c){m=this._done;this._done=[];}else{if(this.status===e){m=this._fail;this._fail=[];}}i.each(m,function(n){n.apply(k,l);});return this;},defer:function(m,k){var l=new this.constructor(this._config);this.then(b.bind(m,k||this,l));return l;}});h._flatten=function(k){var l=0;k=f.isArray(k)?k.concat():[k];while(l<k.length){if(f.isArray(k[l])){j.splice.apply(k,[l,1].concat(k[l]));}else{l++;}}return k;};b.Promise=h;b.defer=function(l,k){var m=new b.Promise();l(m);return m;};b.when=function(){var m=b.Promise._flatten(i(arguments)),l=[],k=0,n=0;return b.defer(function(r){function q(s){l.push(i(s));if(k+n===m.length){if(n>0){r.reject.apply(r,l);}else{r.resolve.apply(r,l);}}}function p(){k++;q(arguments);}function o(){n++;q(arguments);}i.each(m,function(s){if(b.Lang.isFunction(s)){p(s());}else{s.then(p,o);}});});};function a(){a.superclass.constructor.apply(this,arguments);}b.extend(a,b.Promise,null,{NAME:"io-request"});if(b.io){b.mix(b.io,{Request:a,_normalizeConfig:function(l,k){if(b.Lang.isFunction(l)){l={on:{complete:l}};}else{l=l||{};l.on=l.on||{};}return b.mix(l,k,true);},_eventsToCallbacks:function(l,k){b.each(k,function(n,m){if(m==="success"){l.done(n);}else{if(m==="failure"){l.fail(n);}else{l.always(n);}}});},_defer:function(m,k){k=b.io._normalizeConfig(k);var l=new b.io.Request();if(k.on){b.io._eventsToCallbacks(l,k.on);}k.on={success:function(p,n){if(k.parser){try{args.data=k.parser(n.responseText);}catch(o){l.reject.apply(l,arguments);return;}}l.resolve.apply(l,arguments);},failure:b.bind(l.reject,l)};return b.mix(l,b.io(m,k));},addMethod:function(k,l){b.io[k]=l;a.prototype[k]=function(){return b.io[k].apply(b.io,arguments);};},addMethods:function(k){b.each(k,function(m,l){b.io.addMethod(l,m);});}});b.io.addMethods({get:function(l,k){return b.io._defer(l,b.io._normalizeConfig(k,{method:"GET"}));},post:function(l,m,k){return b.io._defer(l,b.io._normalizeConfig(k,{method:"POST",data:m}));},postForm:function(l,m,k){return b.io._defer(l,b.io._normalizeConfig(k,{method:"POST",form:{id:m}}));}});if(b.JSON){b.io.addMethod("getJSON",function(l,k){k=b.io._normalizeConfig(k);k.parser=b.JSON.parse;return b.io._defer(l,k);});}if(b.jsonp){b.io.addMethod("jsonp",function(m,k){k=b.io._normalizeConfig(k);var l=new b.io.Request();if(k.on){b.io._eventsToCallbacks(l,k.on);}k.on={success:b.bind(l.resolve,l),failure:b.bind(l.reject,l)};b.jsonp(m,k);return l;});}}if(b.Node&&b.Plugin){function d(k){d.superclass.constructor.apply(this,arguments);this.host=k.host;}b.extend(d,b.Promise,null,{NS:"deferred",deferMethod:function(k){d.prototype[k]=function(){if(this.host.deferred===this){this.resolve();}if(this.host[k]){var m=b.Array(arguments),l,n;if(b.Lang.isFunction(m[m.length-1])){n=m.pop();}l=this.defer(function(o){this.host[k].apply(this.host,m.concat([b.bind(o.resolve,o)]));});if(n){l.done(n);}return l;}else{if(b.instanceOf(this.host,b.NodeList)&&k=="load"){b.error("NodeList doesn't have a "+k+"() method");}else{b.error("Missing required module for "+k);}}return this;};},importMethod:function(k){d.prototype[k]=function(){this.host[k].apply(this.host,arguments);return this;};}});b.each(["hide","load","show","transition","once","onceAfter"],d.deferMethod);b.each(["addClass","append","appendTo","blur","clearData","destroy","empty","focus","insert","insertBefore","plug","prepend","remove","removeAttribute","removeChild","removeClass","replaceChild","replaceClass","select","set","setAttrs","setContent","setData","setStyle","setStyles","setX","setXY","setY","simulate","swapXY","toggleClass","unplug","wrap","unwrap"],d.importMethod);b.Plugin.NodeDeferred=d;}},"gallery-2011.10.06-19-55",{optional:["node","plugin","node-load","transition","io-base","json","jsonp"],requires:["event-custom"]});