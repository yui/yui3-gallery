YUI.add("gallery-event-selection",function(d){var c=d.UA.ios?400:0,b=300;function a(){if(d.config.win.getSelection){return d.config.win.getSelection().toString();}else{if(d.config.doc.selection){return d.config.doc.selection.createRange().text;}}return"";}d.Event.define("selection",{on:function(h,f,g,e){var i=e?"delegate":"on";f._notifier=g;f._handle=new d.EventHandle([h[i]("gesturemovestart",function(j){},e),h[i]("gesturemoveend",d.bind(function(j){f._x=j.pageX;f._y=j.pageY;d.later(c,this,this._checkSelection,f);},this),e)]);},delegate:function(){this.on.apply(this,arguments);},detach:function(g,e,f){e._handle.detach();},detachDelegate:function(){this.detach.apply(this,arguments);},_checkSelection:function(f){var e=a();if(e!==""){f._notifier.fire({selection:e,pageX:f._x,pageY:f._y});}}});d.Event.define("selectionchange",{_poll:null,on:function(h,f,g,e){var i=e?"delegate":"on";f._selection="";f._notifier=g;f._handle=new d.EventHandle([d.on("gesturemovestart",d.bind(function(j){this._unpoll();if(f._selection){d.later(0,this,this._checkSelectionChange,f);}},this)),h[i]("gesturemovestart",function(j){},e),h[i]("gesturemoveend",d.bind(function(j){f._x=j.pageX;f._y=j.pageY;d.later(c,this,this._checkSelection,f);},this),e)]);},delegate:function(){this.on.apply(this,arguments);},detach:function(g,e,f){this._unpoll();e._handle.detach();},detachDelegate:function(){this.detach.apply(this,arguments);},_checkSelection:function(e){this._unpoll();this._checkSelectionChange(e);this._poll=d.later(b,this,this._checkSelectionChange,e,true);},_checkSelectionChange:function(f){var e=a();if(e!==f._selection){f._selection=e;f._notifier.fire({selection:f._selection,pageX:f._x,pageY:f._y});}},_unpoll:function(){if(this._poll){this._poll.cancel();this._poll=null;}}});},"gallery-2012.07.05-20-01",{requires:["event-move"],skinnable:false});