YUI.add("gallery-node-accordion",function(B){var S=B.UA,f=B.ClassNameManager.getClassName,X={},I={fast:0.1,slow:0.6,normal:0.4},J="accordion",E="item",a="scrollHeight",e="scrollWidth",F="width",V="height",i="px",G=".",O="host",j="orientation",D="fade",W="multiple",L="persistent",k="speed",c="anim",T="items",g=f(J),Z=f(J,"hidden"),H=f(J,E),M=f(J,E,"active"),A=f(J,E,"sliding"),d=f(J,E,"hd"),b=f(J,E,"bd"),K=f(J,E,"ft"),P=f(J,E,"trigger"),h=G+H,C=G+b,Q=">.",U=Q+H,R=U+G+P+", "+U+Q+d+G+P+", "+U+Q+d+Q+P+", "+U+Q+K+G+P+", "+U+Q+K+Q+P,N=function(){N.superclass.constructor.apply(this,arguments);};N.NAME="NodeAccordion";N.NS=J;N.ATTRS={activeItems:{readOnly:true,getter:function(Y){return this._root.all(Q+M);}},items:{readOnly:true,getter:function(Y){return this._root.all(U);}},orientation:{value:V,writeOnce:true},fade:{value:false},anim:{value:false,validator:function(Y){return !B.Lang.isUndefined(B.Anim);}},multiple:{value:true},persistent:{value:false},speed:{value:0.4,validator:function(Y){return(B.Lang.isNumber(Y)||(B.Lang.isString(Y)&&I.hasOwnProperty(Y)));},setter:function(Y){return(I.hasOwnProperty(Y)?I[Y]:Y);}}};B.extend(N,B.Plugin.Base,{_root:null,initializer:function(l){var m=this.get(O),Y=[];if(m){this._root=m;this.get(T).each(function(n){if(n.hasClass(M)){this.expandItem(n);}else{this.collapseItem(n);}},this);Y.push(m.delegate("click",function(n){this.toggleItem(n.currentTarget);n.target.blur();n.halt();},R,this));Y=this._eventHandlers;m.removeClass(Z);}},destructor:function(){var Y=this._eventHandlers;if(Y){B.Array.each(Y,function(l){l.detach();});this._eventHandlers=null;}},_getItem:function(l){if(B.Lang.isNumber(l)){l=this.get(T).item(l);}var Y=function(m){return m.hasClass(H);};if(l&&!l.hasClass(H)){return l.ancestor(Y);}return l;},_animate:function(n,Y,l){var m=X[n];if((m)&&(m.get("running"))){m.stop();}if(B.Lang.isFunction(this.get(c))){Y.easing=this.get(c);}m=new B.Anim(Y);m.on("end",l,this);m.run();X[n]=m;return m;},_openItem:function(u){var p,Y,s,n,m,r=this.get(T),l=this.get(j),q={duration:this.get(k),to:{scroll:[]}},t;if(u&&r.size()&&!u.hasClass(M)&&(p=u.one(C))&&(Y=B.stamp(p))){if(!this.get(W)){t=this._root.one(Q+M);}q.to[l]=(l==F?p.get(e):p.get(a));q.node=p;u.addClass(A);s=function(){u.removeClass(A);u.addClass(M);};if(!this.get(c)){n=p.get(l);if(B.Lang.isObject(t)){n=t.get(l);t.addClass(A);}for(m=1;m<=n;m++){if(B.Lang.isObject(t)){t.setStyle(l,(n-m)+i);}p.setStyle(l,m+i);}if(B.Lang.isObject(t)){t.removeClass(A);t.removeClass(M);}s();}else{q.to.scroll=[0,0];if(this.get(D)){q.to.opacity=1;}if(B.Lang.isObject(t)){this._closeItem(t);}this._animate(Y,q,s);}}},_closeItem:function(t){var p,Y,s,n,m,r=this.get(T),l=this.get(j),q={duration:this.get(k),to:{scroll:[]}};if(t&&r.size()&&(p=t.one(C))&&(Y=B.stamp(p))){q.to[l]=(((l==V)&&S.ie&&(S.ie<7))?1:0);q.node=p;t.addClass(A);s=function(){t.removeClass(A);t.removeClass(M);};if(!this.get(c)){n=p.get(l);for(m=n;m>=q.to[l].to;m--){p.setStyle(l,m+i);}s();}else{q.to.scroll=(l==F?[p.get(e),0]:[0,p.get(a)]);if(this.get(D)){q.to.opacity=0;}this._animate(Y,q,s);}}},expandAllItems:function(){if(this.get(W)){this.get(T).each(function(Y){this.expandItem(Y);},this);}return this;},collapseAllItems:function(){if(this.get(W)||!this.get(L)){this.get(T).each(function(Y){this.collapseItem(Y);},this);}return this;},expandItem:function(l){var Y=this._getItem(l);if(Y){this._openItem(Y);}return this;},collapseItem:function(l){var Y=this._getItem(l);if(Y&&Y.hasClass(M)&&(this.get(W)||!this.get(L))){this._closeItem(Y);}return this;},toggleItem:function(l){var Y=this._getItem(l);if(Y){((Y.hasClass(M)&&(this.get(W)||!this.get(L)))?this._closeItem(Y):this._openItem(Y));}return this;}});B.namespace("Plugin");B.Plugin.NodeAccordion=N;},"gallery-2010.04.02-17-26",{requires:["node-base","node-style","plugin","node-event-delegate","classnamemanager"],optional:["anim"]});