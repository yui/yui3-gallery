YUI.add("gallery-model-sync-yql",function(e){var a,c=e.Lang,b=c.sub,d=c.isValue;a=function(){};a.prototype={query:"",initializer:function(f){f||(f={});d(f.query)&&(this.query=f.query);},buildQuery:function(f){f||(f={});return b(this.query,e.merge(f,(this instanceof e.Model)&&{id:this.get("id")}));},sync:function(j,g,k){if(j!=="read"){return k(null);}var i=this.buildQuery(g),f=this.cache,h=f&&f.retrieve(i);if(h){return k(null,h.response);}e.YQL(i,function(l){if(l.error){k(l.error,l);}else{h=l.query.results;f&&f.add(i,h);k(null,h);}});}};e.namespace("ModelSync").YQL=a;},"gallery-2011.08.24-23-44",{requires:["yql"],skinnable:false,optional:["cache","cache-offline"]});