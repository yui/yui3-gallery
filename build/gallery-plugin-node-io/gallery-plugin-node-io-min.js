YUI.add("gallery-plugin-node-io",function(B){var A=B.Lang;B.Plugin.NodeIo=B.Base.create("node-io",B.Base,[],{initializer:function(){this.publish("success",{defaultFn:this._defSuccessFn});this.after("uriChange",this._afterUriChange);this._ioHandlers={complete:B.bind(this._handleResponse,this,"complete"),success:B.bind(this._handleResponse,this,"success"),failure:B.bind(this._handleResponse,this,"failure"),end:B.bind(this._handleResponse,this,"end")};},load:function(D){var C=this.get("ioConfig");if(!D){D=this.get("uri");}else{this.set("uri",D);}C.on=this._ioHandlers;this._io=B.io(D,C);return this;},refresh:function(){return this.load();},abort:function(){this._stopIO();return this;},_io:null,_ioHandlers:null,_stopIO:function(){if(this._io){this._io.abort();this._io=null;}},_handleResponse:function(C,E,D){this.fire(C,{id:E,response:D});this._io=null;},_defSuccessFn:function(C){this.get("host").insert(C.response.responseText,this.get("placement"));},_afterUriChange:function(){this._stopIO();}},{NS:"io",ATTRS:{host:{writeOnce:true},ioConfig:{value:{},validator:A.isObject},placement:{value:"replace",validator:function(C){return(/replace|(?:ap|pre)pend/).test(C);}},uri:{validator:A.isString}}});},"gallery-2010.09.08-19-45",{requires:["plugin","node-base","node-pluginhost","io-base","base-build"]});