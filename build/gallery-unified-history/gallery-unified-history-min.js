YUI.add("gallery-unified-history",function(a){var c="popstate",f=a.Do,e=a.Lang,g=a.config.win,j=g.location,h=a.HistoryHash,i=h.prototype._init,d=h.parseHash,b=h.createHash;h.prototype._init=function(k){this._config=k||{};f.before(h._injectInstance,h,"parseHash",this);f.after(h._ejectInstance,h,"parseHash",this);f.before(h._injectInstance,h,"createHash",this);f.after(h._ejectInstance,h,"createHash",this);i.apply(this,arguments);};h._injectInstance=function(){h._currInstance=this;};h._ejectInstance=function(k){delete h._currInstance;};h.parseHash=function(l){var k=h._currInstance&&h._currInstance._config&&h._currInstance._config.usePath;if(!k){return d.apply(this,arguments);}else{return h._parsePath(l,k);}};h._parsePath=function(n,s){var k=h.decode,o,r,p,l,m={},q=h.hashPrefix,t;n=e.isValue(n)?n:h.getHash();if(q){t=n.indexOf(q);if(t===0||(t===1&&n.charAt(0)==="#")){n=n.replace(q,"");}}p=n.split("/");for(o=0,r=p.length;o<r;++o){m[k(s[o])]=k(p[o]);}return m;};h.createHash=function(l){var k=h._currInstance&&h._currInstance._config&&h._currInstance._config.usePath;if(!k){return b.apply(this,arguments);}else{return h._createPath(l,k);}};h._createPath=function(m,n){var l=h.encode,k=[];a.Array.each(n,function(p,o){if(e.isValue(m[p])){k.push(m[p]);}});return k.join("/");};},"gallery-2011.04.13-22-38",{requires:["history-hash"],skinnable:false});