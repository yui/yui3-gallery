YUI.add("gallery-plugin-collapse",function(A){A.namespace("Plugin").Collapse=A.Base.create("collapse",A.Plugin.Base,[],{_anim:null,_maxWidth:0,_maxHeight:0,initializer:function(){var C=this.get("host"),B={};this._maxWidth=C.get("offsetWidth");this._maxHeight=C.get("offsetHeight");if(this.get("state")==="closed"){B.overflow=this.get("endOverflow");if(!this.get("lockWidth")){B.width=0;}else{B.width=this._maxWidth;}if(!this.get("lockHeight")){B.height=0;}else{B.height=this._maxHeight;}C.setStyles(B);}},open:function(){if(this._anim&&this._anim.get("running")){this._anim.stop(false);}var C={},B=this._getBaseConfig();if(!this.get("lockWidth")){C.width=this._maxWidth;}if(!this.get("lockHeight")){C.height=this._maxHeight;}B.to=C;this._anim=new A.Anim(B);this._anim.run();this.set("state","opened");},close:function(){if(this._anim&&this._anim.get("running")){this._anim.stop(false);}var C={},B=this._getBaseConfig();if(!this.get("lockWidth")){C.width=0;}else{C.width=this._maxWidth;}if(!this.get("lockHeight")){C.height=0;}else{C.height=this._maxHeight;}B.to=C;this._anim=new A.Anim(B);this._anim.run();this.set("state","closed");},toggle:function(){if(this.get("state")==="closed"){this.open();}else{this.close();}},refresh:function(){var E={},D=this.get("host"),B=this.get("lockWidth"),C=this.get("lockHeight");E.height=D.getStyle("height");E.width=D.getStyle("width");E.overflow=D.getStyle("overflow");E.opactiy=D.getStyle("opacity");E.visibility=D.getStyle("visibility");D.setStyles({"overflow":"auto","opacity":1,"visibility":"visible"});if(!B){D.setStyle("width","auto");}if(!C){D.setStyle("height","auto");this._maxHeight=D.get("offsetHeight");}if(!B){this._maxWidth=D.get("offsetWidth");}D.setStyles(E);},_getBaseConfig:function(){return{node:this.get("host"),easing:this.get("easing"),duration:this.get("duration"),on:{start:function(B){B.currentTarget.get("node").setStyle("overflow","hidden");},end:function(B){B.currentTarget.get("node").setStyle("overflow",this.get("endOverflow"));}}};}},{NS:"collapse",ATTRS:{lockWidth:{value:true},lockHeight:{value:false},state:{value:"opened"},easing:{value:A.Easing.easeOutStrong},duration:{value:0.5},endOverflow:{value:"hidden"}}});},"gallery-2010.09.08-19-45",{requires:["plugin","node-pluginhost","anim-easing","base-build"]});