YUI.add("gallery-ttw-button",function(b){var a,i="http://tiptheweb.org/tip/",k="https://tiptheweb.org/tip/",g=b.config.win.location.protocol==="https:",c=b.QueryString,d=c.parse,f=c.stringify,e;a=function(){};a.prototype={url:null,iframe:null,container:null,_initialized:false,init:function(){this.container=b.Node.create('<div class="ttw-widget-overlay" />').plug(b.Plugin.Align);this.iframe=b.Node.create("<iframe />").setAttrs({frameBorder:"0",scrolling:"no"});this.container.append('<span class="ttw-widget-overlay-loading" />');b.Node.create('<span class="ttw-widget-overlay-close" />').appendTo(this.container).on("click",b.bind(this.close,this));this.container.append(this.iframe);b.one("win").on("message",b.bind(this._handleMessage,this));this._initialized=true;},open:function(m){if(!this._initialized){this.init();}m||(m={});var n=b.config.win,o=n.location.toString(),l=(g?k:i)+"?"+f({link:m.link||o,title:m.title||"",r:o});if(n.screen.width<=480){l+="&mode=mobile";n.top.location=l;return this;}l+="&mode=embed";if(this.url!==l){this.url=l;this.iframe.set("src",l);}this.container.appendTo("body");return this.center();},close:function(){if(this._initialized){this.container.remove().setStyle("width",null);}return this;},center:function(m){var l=this.container;l.align.center(l.get("viewportRegion"),m);return this;},_handleMessage:function(o){if(this.url.indexOf(o._event.origin)!==0){return;}var m=o._event.data.split(":"),l=m[0],n=m[1];switch(l){case"close":this.close();break;case"width":this.container.setStyle("width",n);this.center();break;}}};function j(m){var l=m.get("href")||"",o=l.indexOf("?"),n=o>-1?l.substr(o+1):"";return d(n);}function h(l){l.preventDefault();e||(e=new a());e.open(j(l.currentTarget));}b.delegate("click",h,b.config.doc,"a.ttw-button");},"gallery-2011.06.08-20-04",{requires:["node-base","node-event-delegate","align-plugin","querystring-parse-simple","querystring-stringify-simple"],skinnable:false});