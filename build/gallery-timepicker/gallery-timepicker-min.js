YUI.add("gallery-timepicker",function(a){var h=a.Array,j=a.ClassNameManager.getClassName,c="Saw",m="Timepicker",g="cell",e="hour",q="minute",r="ampm",d="active",f="NAME",k="row",i="strings.am",o="strings.pm",p="delay",l=0,n=1;function b(u){b.superclass.constructor.apply(this,arguments);this._model={ampm:{},hour:{},minute:{}};}function s(u){return(u<10)?"0"+u:u;}function t(w,v){var u=j(b[f],b[w]),x='<li class="'+u+" "+b[g]+" "+b[v]+'">'+w+"</li>";return x;}b[f]="timepicker";b.ATTRS={time:{value:{hour:0,minute:0,ampm:l}},delay:{value:15},strings:{value:{am:"AM",pm:"PM",seperator:":"}}};b[e]=j(b[f],e);b[q]=j(b[f],q);b[r]=j(b[f],r);b[e]=j(b[f],e,k);b[q]=j(b[f],q,k);b[g]=j(b[f],g);b[d]=j(b[f],d);a.extend(b,a.Widget,{AM:l,PM:n,_timer:null,initializer:function(){this.set("time.ampm",l);var u=this.get("time.hour");this.set("time.hour",((u===0)?12:u));},destructor:function(){delete (this._model.ampm);delete (this._model.hour);delete (this._model.minute);},_syncTime:function(){var y=this.get("time"),v=y.ampm,w=this.get("strings.seperator"),z=s(y.minute),x=(v===l)?this.get(i):this.get(o);this.set("time.s12hour",((y.hour===0)?12:y.hour)+w+z+x);var u=(v===n)?parseInt(y.hour,10)+12:parseInt(y.hour,10);if(u==24||u===0){u=Math.abs(u-12);}if(u==12&&v==l){u=0;}this.set("time.s24hour",u+w+z);this.fire("timeset",this.get("time"));},_handleClick:function(u){if(u.target.test("."+b[g])){this.fire("cellclick",this.get("time"));}},_handleOver:function(w){var v=w.target,u=this.get(p);if(this._timer){this._timer.cancel();this._timer=null;}this._timer=a.later(u,this,this._highlight,v);},_highlight:function(u){if(u.test("."+b[g])){var v=u.get("innerHTML");if(u.hasClass(b[e])){this.set("time.hour",v);}else{if(u.hasClass(b[r])){var w=this.get(i);if(v==w){this.set("time.ampm",l);}else{this.set("time.ampm",n);}}else{this.set("time.minute",v);}}}this._syncTime();this.syncUI();},_handleOut:function(u){if(this._timer){this._timer.cancel();this._timer=null;}},renderUI:function(){var v=this.get("contentBox"),u=this._model,C=[],w;function x(){return v.create("<ol>");}var B=[];for(w=0;w<=3;w++){B[w]=x();}function y(D,E){return v.create(t(D,E));}u[r].AM=y(this.get(i),r);u[r].PM=y(this.get(o),r);B[0].appendChild(u[r].AM);B[0].appendChild(u[r].PM);function A(J,H,E,G,I){for(var F=J;F<=E;F=F+G){var D=y(F,I);u[I][F]=D;H.appendChild(D);}}A(1,B[1],12,1,e);A(0,B[2],45,15,q);this._model[r].row=B[0];this._model[e].row=B[1];this._model[q].row=B[2];var z=v.create("<div>");h.each(B,function(D){z.appendChild(D);});v.appendChild(z);this.allCells=v.all("li");},toggle:function(){this[(this.get("visible")?"hide":"show")]();this.syncUI();},bindUI:function(){var u=this.get("contentBox");u.on("click",this._handleClick,this);u.on("mouseover",this._handleOver,this);u.on("mouseout",this._handleOut,this);},syncUI:function(){var w=this.get("time");this.allCells.removeClass(b[d]);var u=this._model;var v=0;if(w.ampm==l){u.ampm.AM.addClass(b[d]);v=u.ampm.AM.getX();}else{if(w.ampm==n){u.ampm.PM.addClass(b[d]);v=u.ampm.PM.getX();}}u.minute[w.minute].addClass(b[d]);u.hour[w.hour].addClass(b[d]);u.hour.row.setX(v);u.minute.row.setX(u.hour[w.hour].getX());}});a.Base.build(b.NAME,b,{dynamic:false});a.namespace(c+"."+m);a[c][m]=b;},"gallery-2011.10.12-20-24",{requires:["oop","event-custom","attribute","base","dom","classnamemanager","widget","event"]});